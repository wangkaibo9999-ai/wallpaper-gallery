import{_ as ee,t as To,S as to,a as Lo,u as lt,F as Na,R as zo,b as xa,c as fe,d as Oo,r as Io,e as Ao,f as $e,g as Te,h as Le,i as Se,j as Ue,k as ze,l as We,m as Ye,n as Xe,o as je,I as wt,p as ra,q as Ro,s as Fo,v as Ca,w as zt,x as Po,y as Ho,z as Uo,A as Wo,B as Yo,C as Xo,D as jo,E as Ba}from"./index-DHOMu9pD.js";import{a as qo,b as Go,c as Qo}from"./element-plus-B6GQZf_j.js";import{g as Q}from"./gsap-Bc0iluX2.js";import{P as Ko}from"./vant-BMxSPfAy.js";const Zo={__name:"DiyAvatarBanner",setup(o){const t=Vue.ref(!1),e=Vue.ref(!1);let a=null;Vue.onMounted(()=>{a=setTimeout(()=>{t.value=!0,a=null},300)}),Vue.onUnmounted(()=>{a&&(clearTimeout(a),a=null)});function l(){To(),window.open("http://diyavatar.061129.xyz/","_blank")}return(n,i)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(["diy-avatar-banner",{"is-visible":t.value,"is-hovered":e.value}]),onMouseenter:i[0]||(i[0]=s=>e.value=!0),onMouseleave:i[1]||(i[1]=s=>e.value=!1),onClick:l},[...i[2]||(i[2]=[Vue.createStaticVNode('<div class="banner-bg" data-v-da6ae403><div class="bg-gradient" data-v-da6ae403></div><div class="bg-pattern" data-v-da6ae403></div><div class="floating-shapes" data-v-da6ae403><div class="shape shape-1" data-v-da6ae403></div><div class="shape shape-2" data-v-da6ae403></div><div class="shape shape-3" data-v-da6ae403></div></div></div><div class="banner-content" data-v-da6ae403><div class="avatar-preview" data-v-da6ae403><div class="avatar-showcase" data-v-da6ae403><div class="avatar-item avatar-1" data-v-da6ae403><svg viewBox="0 0 100 100" class="avatar-svg" data-v-da6ae403><circle cx="50" cy="50" r="45" fill="#FFE0BD" data-v-da6ae403></circle><circle cx="35" cy="40" r="5" fill="#333" data-v-da6ae403></circle><circle cx="65" cy="40" r="5" fill="#333" data-v-da6ae403></circle><path d="M 35 60 Q 50 75 65 60" stroke="#333" stroke-width="3" fill="none" data-v-da6ae403></path><path d="M 20 25 Q 50 5 80 25 Q 75 15 50 10 Q 25 15 20 25" fill="#8B4513" data-v-da6ae403></path></svg></div><div class="avatar-item avatar-2" data-v-da6ae403><svg viewBox="0 0 100 100" class="avatar-svg" data-v-da6ae403><circle cx="50" cy="50" r="45" fill="#F5D0C5" data-v-da6ae403></circle><circle cx="35" cy="40" r="5" fill="#333" data-v-da6ae403></circle><circle cx="65" cy="40" r="5" fill="#333" data-v-da6ae403></circle><ellipse cx="50" cy="62" rx="8" ry="5" fill="#FF6B6B" data-v-da6ae403></ellipse><path d="M 15 30 Q 30 10 50 15 Q 70 10 85 30 L 80 35 Q 65 20 50 22 Q 35 20 20 35 Z" fill="#2C3E50" data-v-da6ae403></path></svg></div><div class="avatar-item avatar-3" data-v-da6ae403><svg viewBox="0 0 100 100" class="avatar-svg" data-v-da6ae403><circle cx="50" cy="50" r="45" fill="#DEB887" data-v-da6ae403></circle><path d="M 30 42 L 40 38 L 40 42" stroke="#333" stroke-width="2" fill="none" data-v-da6ae403></path><path d="M 70 42 L 60 38 L 60 42" stroke="#333" stroke-width="2" fill="none" data-v-da6ae403></path><circle cx="35" cy="42" r="4" fill="#333" data-v-da6ae403></circle><circle cx="65" cy="42" r="4" fill="#333" data-v-da6ae403></circle><path d="M 40 60 Q 50 68 60 60" stroke="#333" stroke-width="2" fill="none" data-v-da6ae403></path><ellipse cx="50" cy="20" rx="35" ry="15" fill="#FF69B4" data-v-da6ae403></ellipse></svg></div></div><div class="sparkles" data-v-da6ae403><span class="sparkle sparkle-1" data-v-da6ae403>âœ¨</span><span class="sparkle sparkle-2" data-v-da6ae403>â­</span><span class="sparkle sparkle-3" data-v-da6ae403>âœ¨</span></div></div><div class="banner-info" data-v-da6ae403><div class="badge" data-v-da6ae403><span class="badge-icon" data-v-da6ae403>ğŸ¨</span><span class="badge-text" data-v-da6ae403>æ–°åŠŸèƒ½</span></div><h3 class="banner-title" data-v-da6ae403> DIY å¡é€šå¤´åƒç”Ÿæˆå™¨ </h3><p class="banner-desc" data-v-da6ae403> è‡ªå®šä¹‰äº”å®˜ã€å‘å‹ã€é…é¥°ï¼Œæ‰“é€ ä¸“å±ä¸ªæ€§å¤´åƒ </p><div class="banner-features" data-v-da6ae403><span class="feature" data-v-da6ae403><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-da6ae403><polyline points="20 6 9 17 4 12" data-v-da6ae403></polyline></svg> å¤šç§é£æ ¼ </span><span class="feature" data-v-da6ae403><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-da6ae403><polyline points="20 6 9 17 4 12" data-v-da6ae403></polyline></svg> ä¸€é”®å¯¼å‡º </span><span class="feature" data-v-da6ae403><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-da6ae403><polyline points="20 6 9 17 4 12" data-v-da6ae403></polyline></svg> å®Œå…¨å…è´¹ </span></div><button class="banner-btn" data-v-da6ae403><span data-v-da6ae403>ç«‹å³ä½“éªŒ</span><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-da6ae403><path d="M5 12h14M12 5l7 7-7 7" data-v-da6ae403></path></svg></button></div></div>',2)])],34))}},Jo=ee(Zo,[["__scopeId","data-v-da6ae403"]]),Ma="announcement_banner_closed_v1",en={__name:"AnnouncementBanner",setup(o){const t=Vue.ref(!1),e=Vue.ref(!1);let a=null;Vue.onMounted(()=>{localStorage.getItem(Ma)!=="true"&&(t.value=!0)}),Vue.onUnmounted(()=>{a&&(clearTimeout(a),a=null)});function l(){e.value=!0,a=setTimeout(()=>{a=null,t.value=!1,localStorage.setItem(Ma,"true")},300)}return(n,i)=>t.value?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:Vue.normalizeClass(["announcement-wrapper",{"is-closing":e.value}])},[Vue.createElementVNode("div",{class:"announcement-banner"},[i[1]||(i[1]=Vue.createStaticVNode('<div class="banner-icon" data-v-b50eb673><span class="icon-emoji" data-v-b50eb673>ğŸ“¢</span></div><div class="banner-content" data-v-b50eb673><p class="banner-text desktop-text" data-v-b50eb673><strong data-v-b50eb673>æ¬¢è¿æ¥åˆ°å£çº¸ç”»å»Šï¼</strong> ç½‘ç«™åˆšåˆšä¸Šçº¿ï¼Œç›®å‰æ”¶å½•åšä¸»ç²¾é€‰é«˜è´¨é‡å£çº¸ï¼Œ<span class="highlight" data-v-b50eb673>å®šæœŸæ›´æ–°</span>ä¸­ã€‚ PC/æ‰‹æœºå‡å¯è®¿é—®ï¼Œè®°å¾—æ”¶è—å“¦~ </p><p class="banner-text mobile-text" data-v-b50eb673><strong data-v-b50eb673>æ¬¢è¿ï¼</strong> ç²¾é€‰å£çº¸<span class="highlight" data-v-b50eb673>å®šæœŸæ›´æ–°</span>ï¼Œè®°å¾—æ”¶è—~ <span class="tag" data-v-b50eb673>è¡¨æƒ…åŒ…å³å°†ä¸Šçº¿</span></p></div>',2)),Vue.createElementVNode("button",{class:"close-btn","aria-label":"å…³é—­é€šçŸ¥",onClick:l},[...i[0]||(i[0]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M6 18L18 6M6 6l12 12"})],-1)])])])],2)):Vue.createCommentVNode("",!0)}},tn=ee(en,[["__scopeId","data-v-b50eb673"]]),an={__name:"BingDatePicker",props:{modelValue:{type:String,default:"all"},minDate:{type:String,default:"2019-06"},maxDate:{type:String,default:null}},emits:["update:modelValue"],setup(o,{emit:t}){const e=o,a=t,l=Vue.ref(null);Vue.watch(()=>e.modelValue,d=>{if(d==="all"||!d)l.value=null;else{const[r,c]=d.split("-");l.value=new Date(Number.parseInt(r),Number.parseInt(c)-1,1)}},{immediate:!0});function n(d){if(!d)a("update:modelValue","all");else{const r=d.getFullYear(),c=String(d.getMonth()+1).padStart(2,"0");a("update:modelValue",`${r}-${c}`)}}function i(d){const r=new Date,c=r.getFullYear(),u=r.getMonth(),p=d.getFullYear(),h=d.getMonth();if(p>c||p===c&&h>u)return!0;if(e.minDate){const[f,g]=e.minDate.split("-").map(Number);if(p<f||p===f&&h<g-1)return!0}if(e.maxDate){const[f,g]=e.maxDate.split("-").map(Number);if(p>f||p===f&&h>g-1)return!0}return!1}const s=Vue.computed(()=>{if(e.modelValue==="all"||!e.modelValue)return"å…¨éƒ¨æœˆä»½";const[d,r]=e.modelValue.split("-");return`${d}å¹´${Number.parseInt(r)}æœˆ`});return(d,r)=>{const c=qo;return Vue.openBlock(),Vue.createBlock(c,{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=u=>l.value=u),type:"month",placeholder:s.value,"disabled-date":i,clearable:!0,size:"default",style:{width:"160px"},format:"YYYYå¹´MMæœˆ","popper-class":"bing-date-picker-popper",onChange:n},null,8,["modelValue","placeholder"])}}},on={class:"trigger-text"},nn={class:"panel-content"},ln={class:"category-list primary-list"},rn={class:"list-items"},sn=["onClick"],un={class:"item-label"},cn={key:0,class:"item-arrow",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},dn={key:0,class:"category-list secondary-list"},pn={class:"list-header"},mn={class:"list-items"},Vn=["onClick"],vn={class:"item-label"},hn={__name:"CategoryDropdown",props:{categoryOptions:{type:Array,default:()=>[]},categoryFilter:{type:String,default:"all"},subcategoryFilter:{type:String,default:"all"}},emits:["update:categoryFilter","update:subcategoryFilter"],setup(o,{emit:t}){const e=o,a=t,l=Vue.ref(!1),n=Vue.ref(null),i=Vue.ref(e.categoryFilter),s=Vue.computed(()=>i.value==="all"?[]:e.categoryOptions.find(w=>w.value===i.value)?.subcategories||[]),d=Vue.computed(()=>{if(e.categoryFilter==="all")return"å…¨éƒ¨åˆ†ç±»";let V=e.categoryFilter;return e.subcategoryFilter!=="all"&&(V+=` Â· ${e.subcategoryFilter}`),V}),r=Vue.computed(()=>e.categoryFilter!=="all");function c(){i.value=e.categoryFilter,l.value=!0}function u(){l.value=!1}function p(){l.value?u():c()}function h(V){i.value=V.value,(!V.subcategories?.length||V.value==="all")&&(a("update:categoryFilter",V.value),a("update:subcategoryFilter","all"),u())}function f(V){a("update:categoryFilter",i.value),a("update:subcategoryFilter",V),u()}function g(V){n.value&&!n.value.contains(V.target)&&u()}return Vue.watch(()=>e.categoryFilter,V=>{l.value||(i.value=V)}),Vue.onMounted(()=>{document.addEventListener("click",g)}),Vue.onUnmounted(()=>{document.removeEventListener("click",g)}),(V,w)=>(Vue.openBlock(),Vue.createElementBlock("div",{ref_key:"dropdownRef",ref:n,class:"category-dropdown"},[Vue.createElementVNode("button",{class:Vue.normalizeClass(["dropdown-trigger",{"is-open":l.value,"has-selection":r.value}]),onClick:p},[Vue.createElementVNode("span",on,Vue.toDisplayString(d.value),1),w[1]||(w[1]=Vue.createElementVNode("svg",{class:"trigger-arrow",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M6 9l6 6 6-6"})],-1))],2),Vue.createVNode(Vue.Transition,{name:"dropdown"},{default:Vue.withCtx(()=>[l.value?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:Vue.normalizeClass(["dropdown-panel",{"single-column":s.value.length===0}])},[Vue.createElementVNode("div",nn,[Vue.createElementVNode("div",ln,[w[3]||(w[3]=Vue.createElementVNode("div",{class:"list-header"}," åˆ†ç±» ",-1)),Vue.createElementVNode("div",rn,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(o.categoryOptions,x=>(Vue.openBlock(),Vue.createElementBlock("button",{key:x.value,class:Vue.normalizeClass(["category-item",{"is-active":i.value===x.value,"has-children":x.subcategories?.length>0}]),onClick:C=>h(x)},[Vue.createElementVNode("span",un,Vue.toDisplayString(x.label),1),x.subcategories?.length>0?(Vue.openBlock(),Vue.createElementBlock("svg",cn,[...w[2]||(w[2]=[Vue.createElementVNode("path",{d:"M9 18l6-6-6-6"},null,-1)])])):Vue.createCommentVNode("",!0)],10,sn))),128))])]),Vue.createVNode(Vue.Transition,{name:"slide-right"},{default:Vue.withCtx(()=>[s.value.length>0?(Vue.openBlock(),Vue.createElementBlock("div",dn,[Vue.createElementVNode("div",pn,Vue.toDisplayString(i.value),1),Vue.createElementVNode("div",mn,[Vue.createElementVNode("button",{class:Vue.normalizeClass(["category-item",{"is-active":o.categoryFilter===i.value&&o.subcategoryFilter==="all"}]),onClick:w[0]||(w[0]=x=>f("all"))},[...w[4]||(w[4]=[Vue.createElementVNode("span",{class:"item-label"},"å…¨éƒ¨",-1)])],2),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(s.value,x=>(Vue.openBlock(),Vue.createElementBlock("button",{key:x.name,class:Vue.normalizeClass(["category-item",{"is-active":o.categoryFilter===i.value&&o.subcategoryFilter===x.name}]),onClick:C=>f(x.name)},[Vue.createElementVNode("span",vn,Vue.toDisplayString(x.name),1)],10,Vn))),128))])])):Vue.createCommentVNode("",!0)]),_:1})])],2)):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(Vue.Transition,{name:"fade"},{default:Vue.withCtx(()=>[l.value?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"dropdown-overlay",onClick:u})):Vue.createCommentVNode("",!0)]),_:1})],512))}},fn=ee(hn,[["__scopeId","data-v-204e7cf8"]]);function sa(){const o=Vue.ref(!1),t=Vue.ref(0);function e(){o.value||(t.value=window.scrollY||window.pageYOffset,document.body.style.top=`-${t.value}px`,document.body.classList.add("modal-open"),o.value=!0)}function a(){o.value&&(document.body.classList.remove("modal-open"),document.body.style.top="",window.scrollTo({top:t.value,behavior:"instant"}),o.value=!1)}return Vue.onUnmounted(()=>{o.value&&a()}),{lock:e,unlock:a,isLocked:o}}const gn={key:0,class:"category-drawer"},wn={class:"drawer-body"},yn={class:"category-list"},kn=["onClick"],En={class:"category-name"},bn={class:"subcategory-panel"},Nn={class:"subcategory-header"},xn={class:"subcategory-grid"},Cn=["onClick"],Bn={key:1,class:"no-subcategory"},Mn={__name:"MobileCategoryDrawer",props:{show:{type:Boolean,default:!1},categoryOptions:{type:Array,default:()=>[]},categoryFilter:{type:String,default:"all"},subcategoryFilter:{type:String,default:"all"}},emits:["update:show","update:categoryFilter","update:subcategoryFilter","confirm"],setup(o,{emit:t}){const e=o,a=t,l=Vue.ref(e.categoryFilter),n=Vue.ref(e.subcategoryFilter),i=sa();Vue.watch(()=>e.show,async f=>{if(f){if(await Vue.nextTick(),requestAnimationFrame(()=>{i.lock()}),e.categoryFilter==="all"){const g=e.categoryOptions.find(V=>V.value!=="all");l.value=g?g.value:""}else l.value=e.categoryFilter;n.value=e.subcategoryFilter}else i.unlock()});const s=Vue.computed(()=>l.value==="all"?[]:e.categoryOptions.find(g=>g.value===l.value)?.subcategories||[]),d=Vue.computed(()=>s.value.length>0);function r(f){l.value=f,n.value="all"}function c(f){n.value=f}function u(){a("update:categoryFilter",l.value),a("update:subcategoryFilter",n.value),a("confirm"),h()}function p(){a("update:categoryFilter","all"),a("update:subcategoryFilter","all"),h()}function h(){a("update:show",!1)}return(f,g)=>(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{to:"body"},[Vue.createVNode(Vue.Transition,{name:"fade"},{default:Vue.withCtx(()=>[o.show?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"drawer-overlay",onClick:h})):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(Vue.Transition,{name:"slide-up"},{default:Vue.withCtx(()=>[o.show?(Vue.openBlock(),Vue.createElementBlock("div",gn,[Vue.createElementVNode("div",{class:"drawer-header"},[Vue.createElementVNode("button",{class:"header-btn reset-btn",onClick:p}," é‡ç½® "),g[2]||(g[2]=Vue.createElementVNode("span",{class:"header-title"},"é€‰æ‹©åˆ†ç±»",-1)),Vue.createElementVNode("button",{class:"header-btn close-btn",onClick:h},[...g[1]||(g[1]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])])]),Vue.createElementVNode("div",wn,[Vue.createElementVNode("div",yn,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(o.categoryOptions.filter(V=>V.value!=="all"),V=>(Vue.openBlock(),Vue.createElementBlock("div",{key:V.value,class:Vue.normalizeClass(["category-item",{"is-active":l.value===V.value}]),onClick:w=>r(V.value)},[Vue.createElementVNode("span",En,Vue.toDisplayString(V.label),1)],10,kn))),128))]),Vue.createElementVNode("div",bn,[d.value?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:0},[Vue.createElementVNode("div",Nn,[Vue.createElementVNode("span",null,Vue.toDisplayString(l.value),1)]),Vue.createElementVNode("div",xn,[Vue.createElementVNode("button",{class:Vue.normalizeClass(["subcategory-btn",{"is-active":n.value==="all"}]),onClick:g[0]||(g[0]=V=>c("all"))}," å…¨éƒ¨ ",2),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(s.value,V=>(Vue.openBlock(),Vue.createElementBlock("button",{key:V.name,class:Vue.normalizeClass(["subcategory-btn",{"is-active":n.value===V.name}]),onClick:w=>c(V.name)},Vue.toDisplayString(V.name),11,Cn))),128))])],64)):(Vue.openBlock(),Vue.createElementBlock("div",Bn,[...g[3]||(g[3]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[Vue.createElementVNode("path",{d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),Vue.createElementVNode("p",null,"è¯¥åˆ†ç±»æš‚æ— å­åˆ†ç±»",-1)])]))])]),Vue.createElementVNode("div",{class:"drawer-footer"},[Vue.createElementVNode("button",{class:"confirm-btn",onClick:u}," ç¡®è®¤é€‰æ‹© ")])])):Vue.createCommentVNode("",!0)]),_:1})]))}},Dn=ee(Mn,[["__scopeId","data-v-64bd8979"]]),_n={__name:"AnimatedNumber",props:{value:{type:Number,default:0},duration:{type:Number,default:.6},ease:{type:String,default:"power2.out"},animateOnMount:{type:Boolean,default:!0},formatter:{type:Function,default:null}},setup(o){const t=o,e=Vue.ref(t.animateOnMount?0:t.value),a=Vue.ref(null);function l(i){return t.formatter?t.formatter(i):Math.round(i).toLocaleString()}function n(i,s=null){const d=s!==null?s:e.value;if(d===i)return;const r=Math.abs(i-d);let c=t.duration;r<=30?c=.3:r<=100&&(c=.4),Q.to(e,{value:i,duration:c,ease:t.ease})}return Vue.watch(()=>t.value,(i,s)=>{i!==s&&n(i)}),Vue.onMounted(()=>{t.animateOnMount&&t.value>0?n(t.value,0):e.value=t.value}),(i,s)=>(Vue.openBlock(),Vue.createElementBlock("span",{ref_key:"numberRef",ref:a,class:"animated-number"},Vue.toDisplayString(l(e.value)),513))}},Da=ee(_n,[["__scopeId","data-v-01845f59"]]);function Sn(){return typeof window>"u"?!1:window.innerWidth<1024}function $n(){const o=localStorage.getItem(to.VIEW_MODE);return o?Sn()&&o==="masonry"?"grid":o:"grid"}const Ot=Vue.ref($n());function ao(){return{viewMode:Ot,setViewMode:e=>{const a=Ot.value;Ot.value=e,localStorage.setItem(to.VIEW_MODE,e),a!==e&&Lo(e)},viewModeOptions:[{value:"grid",icon:"grid",label:"ç½‘æ ¼"},{value:"list",icon:"list",label:"åˆ—è¡¨"},{value:"masonry",icon:"masonry",label:"ç€‘å¸ƒæµ"}]}}const Tn={class:"filter-left"},Ln={class:"result-count"},zn={key:0,class:"filtered-hint"},On={key:0,class:"filter-right"},In={key:0,class:"filter-item"},An={key:1,class:"filter-item"},Rn={key:2,class:"filter-item"},Fn={key:3,class:"filter-item"},Pn={class:"filter-item"},Hn={key:1,class:"filter-right-mobile"},Un={class:"view-mode-toggle-mobile"},Wn={class:"category-btn-text"},Yn={class:"popup-content"},Xn={class:"popup-body"},jn={key:0,class:"filter-group"},qn={class:"option-grid"},Gn=["onClick"],Qn={class:"filter-group"},Kn={class:"option-grid"},Zn=["onClick"],Jn={__name:"FilterPanel",props:{sortBy:{type:String,default:"newest"},formatFilter:{type:String,default:"all"},resolutionFilter:{type:String,default:"all"},categoryFilter:{type:String,default:"all"},subcategoryFilter:{type:String,default:"all"},categoryOptions:{type:Array,default:()=>[{value:"all",label:"å…¨éƒ¨åˆ†ç±»"}]},subcategoryOptions:{type:Array,default:()=>[{value:"all",label:"å…¨éƒ¨"}]},resultCount:{type:Number,default:0},totalCount:{type:Number,default:0},loading:{type:Boolean,default:!1},hideFormatFilter:{type:Boolean,default:!1},currentSeries:{type:String,default:""}},emits:["update:sortBy","update:formatFilter","update:resolutionFilter","update:categoryFilter","update:subcategoryFilter","reset"],setup(o,{emit:t}){const e=o,a=t,{isMobileOrTablet:l}=lt(),{viewMode:n,setViewMode:i}=ao(),s=Vue.ref(!1),d=Vue.ref(!1),r=Vue.ref(e.sortBy),c=Vue.ref(e.formatFilter);function u(){const M=new Date,k=M.getFullYear(),R=String(M.getMonth()+1).padStart(2,"0");return`${k}-${R}`}const p=Vue.computed(()=>{if(e.formatFilter!=="all"||e.resolutionFilter!=="all"||e.subcategoryFilter!=="all"||e.sortBy!=="newest")return!0;if(e.currentSeries==="bing"){const M=u();return e.categoryFilter!==M}return e.categoryFilter!=="all"}),h=Vue.computed(()=>e.currentSeries==="bing"),f=Vue.computed(()=>{if(h.value)return n.value==="list"?"is-list-two":"is-grid";switch(n.value){case"list":return"is-list";case"masonry":return"is-masonry";default:return"is-grid"}}),g=Vue.computed(()=>n.value==="list"?"is-list":"is-grid"),V=Vue.computed(()=>{if(e.categoryFilter==="all")return"åˆ†ç±»";let M=e.categoryFilter;return e.subcategoryFilter!=="all"&&(M+=` Â· ${e.subcategoryFilter}`),M}),w=Vue.computed(()=>e.categoryFilter!=="all");function x(M){a("update:sortBy",M),fe("sort",M)}function C(M){a("update:formatFilter",M),fe("format",M)}function z(M){a("update:resolutionFilter",M),fe("resolution",M)}function _(M){a("update:categoryFilter",M),fe("category",M)}function m(M){a("update:subcategoryFilter",M),fe("subcategory",M)}function $(M){a("update:categoryFilter",M),fe("category",M)}function T(M){a("update:subcategoryFilter",M),M!=="all"&&fe("subcategory",M)}function F(){a("update:sortBy","newest"),a("update:formatFilter","all"),a("update:resolutionFilter","all"),a("update:categoryFilter","all"),a("update:subcategoryFilter","all"),a("reset")}function I(){d.value=!0}function L(){fe("category",e.categoryFilter),e.subcategoryFilter!=="all"&&fe("subcategory",e.subcategoryFilter)}function B(){r.value=e.sortBy,c.value=e.formatFilter,s.value=!0}function y(){s.value=!1}function A(){a("update:sortBy",r.value),a("update:formatFilter",c.value),r.value!==e.sortBy&&fe("sort",r.value),c.value!==e.formatFilter&&fe("format",c.value),y()}function v(){r.value="newest",c.value="all"}return(M,k)=>{const R=Qo,H=Go,O=Ko;return Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(["filter-panel",{"has-filters":p.value}])},[Vue.createElementVNode("div",Tn,[Vue.createElementVNode("span",Ln,[o.loading?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:0},[Vue.createTextVNode(" åŠ è½½ä¸­... ")],64)):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[k[9]||(k[9]=Vue.createTextVNode(" å…± ",-1)),Vue.createVNode(Da,{value:o.resultCount,class:"count-value"},null,8,["value"]),Vue.createTextVNode(" å¼ "+Vue.toDisplayString(o.currentSeries==="avatar"?"å¤´åƒ":o.currentSeries==="mobile"?"æ‰‹æœºå£çº¸":"å£çº¸")+" ",1),p.value&&o.resultCount!==o.totalCount?(Vue.openBlock(),Vue.createElementBlock("span",zn,[k[7]||(k[7]=Vue.createTextVNode(" (ç­›é€‰è‡ª ",-1)),Vue.createVNode(Da,{value:o.totalCount,duration:.4},null,8,["value"]),k[8]||(k[8]=Vue.createTextVNode(" å¼ ) ",-1))])):Vue.createCommentVNode("",!0)],64))]),Vue.createVNode(Vue.Transition,{name:"fade"},{default:Vue.withCtx(()=>[p.value&&!Vue.unref(l)?(Vue.openBlock(),Vue.createElementBlock("button",{key:0,class:"reset-btn",onClick:F},[...k[10]||(k[10]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),Vue.createElementVNode("path",{d:"M3 3v5h5"})],-1),Vue.createTextVNode(" é‡ç½® ",-1)])])):Vue.createCommentVNode("",!0)]),_:1})]),Vue.unref(l)?(Vue.openBlock(),Vue.createElementBlock("div",Hn,[Vue.createElementVNode("div",Un,[Vue.createElementVNode("div",{class:Vue.normalizeClass(["view-mode-slider-mobile",g.value])},null,2),Vue.createElementVNode("button",{class:Vue.normalizeClass(["view-mode-btn-mobile",{"is-active":Vue.unref(n)==="grid"||Vue.unref(n)==="masonry"}]),"aria-label":"ç½‘æ ¼è§†å›¾",onClick:k[3]||(k[3]=P=>Vue.unref(i)("grid"))},[...k[20]||(k[20]=[Vue.createStaticVNode('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-cbbff14b><rect x="3" y="3" width="7" height="7" data-v-cbbff14b></rect><rect x="14" y="3" width="7" height="7" data-v-cbbff14b></rect><rect x="3" y="14" width="7" height="7" data-v-cbbff14b></rect><rect x="14" y="14" width="7" height="7" data-v-cbbff14b></rect></svg>',1)])],2),Vue.createElementVNode("button",{class:Vue.normalizeClass(["view-mode-btn-mobile",{"is-active":Vue.unref(n)==="list"}]),"aria-label":"åˆ—è¡¨è§†å›¾",onClick:k[4]||(k[4]=P=>Vue.unref(i)("list"))},[...k[21]||(k[21]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})],-1)])],2)]),Vue.createElementVNode("button",{class:Vue.normalizeClass(["category-btn",{"is-active":w.value}]),onClick:I},[k[22]||(k[22]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M4 6h16M4 12h16M4 18h7"})],-1)),Vue.createElementVNode("span",Wn,Vue.toDisplayString(V.value),1),k[23]||(k[23]=Vue.createElementVNode("svg",{class:"arrow-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M6 9l6 6 6-6"})],-1))],2),Vue.createElementVNode("button",{class:"filter-btn filter-btn-compact",onClick:B},[...k[24]||(k[24]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})],-1)])])])):(Vue.openBlock(),Vue.createElementBlock("div",On,[Vue.createElementVNode("div",{class:Vue.normalizeClass(["view-mode-toggle",{"is-two-options":h.value}])},[Vue.createElementVNode("div",{class:Vue.normalizeClass(["view-mode-slider",f.value])},null,2),Vue.createElementVNode("button",{class:Vue.normalizeClass(["view-mode-btn",{"is-active":Vue.unref(n)==="grid"}]),"aria-label":"ç½‘æ ¼è§†å›¾",onClick:k[0]||(k[0]=P=>Vue.unref(i)("grid"))},[...k[11]||(k[11]=[Vue.createStaticVNode('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-cbbff14b><rect x="3" y="3" width="7" height="7" data-v-cbbff14b></rect><rect x="14" y="3" width="7" height="7" data-v-cbbff14b></rect><rect x="3" y="14" width="7" height="7" data-v-cbbff14b></rect><rect x="14" y="14" width="7" height="7" data-v-cbbff14b></rect></svg>',1)])],2),Vue.createElementVNode("button",{class:Vue.normalizeClass(["view-mode-btn",{"is-active":Vue.unref(n)==="list"}]),"aria-label":"åˆ—è¡¨è§†å›¾",onClick:k[1]||(k[1]=P=>Vue.unref(i)("list"))},[...k[12]||(k[12]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})],-1)])],2),h.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("button",{key:0,class:Vue.normalizeClass(["view-mode-btn",{"is-active":Vue.unref(n)==="masonry"}]),"aria-label":"ç€‘å¸ƒæµè§†å›¾",onClick:k[2]||(k[2]=P=>Vue.unref(i)("masonry"))},[...k[13]||(k[13]=[Vue.createStaticVNode('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-cbbff14b><rect x="3" y="3" width="7" height="10" data-v-cbbff14b></rect><rect x="14" y="3" width="7" height="6" data-v-cbbff14b></rect><rect x="3" y="16" width="7" height="5" data-v-cbbff14b></rect><rect x="14" y="12" width="7" height="9" data-v-cbbff14b></rect></svg>',1)])],2))],2),k[19]||(k[19]=Vue.createElementVNode("div",{class:"filter-divider"},null,-1)),o.currentSeries==="bing"?(Vue.openBlock(),Vue.createElementBlock("div",In,[k[14]||(k[14]=Vue.createElementVNode("span",{class:"filter-label"},"æ—¥æœŸ",-1)),Vue.createVNode(an,{"model-value":o.categoryFilter,"onUpdate:modelValue":$},null,8,["model-value"])])):(Vue.openBlock(),Vue.createElementBlock("div",An,[k[15]||(k[15]=Vue.createElementVNode("span",{class:"filter-label"},"åˆ†ç±»",-1)),Vue.createVNode(fn,{"category-options":o.categoryOptions,"category-filter":o.categoryFilter,"subcategory-filter":o.subcategoryFilter,"onUpdate:categoryFilter":$,"onUpdate:subcategoryFilter":T},null,8,["category-options","category-filter","subcategory-filter"])])),o.hideFormatFilter?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",Rn,[k[16]||(k[16]=Vue.createElementVNode("span",{class:"filter-label"},"æ ¼å¼",-1)),Vue.createVNode(H,{"model-value":o.formatFilter,placeholder:"å…¨éƒ¨æ ¼å¼",size:"default",style:{width:"140px"},onChange:C},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(Na),P=>(Vue.openBlock(),Vue.createBlock(R,{key:P.value,label:P.label,value:P.value},null,8,["label","value"]))),128))]),_:1},8,["model-value"])])),o.currentSeries==="desktop"?(Vue.openBlock(),Vue.createElementBlock("div",Fn,[k[17]||(k[17]=Vue.createElementVNode("span",{class:"filter-label"},"åˆ†è¾¨ç‡",-1)),Vue.createVNode(H,{"model-value":o.resolutionFilter,placeholder:"å…¨éƒ¨åˆ†è¾¨ç‡",size:"default",style:{width:"140px"},onChange:z},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(zo),P=>(Vue.openBlock(),Vue.createBlock(R,{key:P.value,label:P.label,value:P.value},null,8,["label","value"]))),128))]),_:1},8,["model-value"])])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",Pn,[k[18]||(k[18]=Vue.createElementVNode("span",{class:"filter-label"},"æ’åº",-1)),Vue.createVNode(H,{"model-value":o.sortBy,placeholder:"æ’åºæ–¹å¼",size:"default",style:{width:"160px"},onChange:x},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(xa),P=>(Vue.openBlock(),Vue.createBlock(R,{key:P.value,label:P.label,value:P.value},null,8,["label","value"]))),128))]),_:1},8,["model-value"])])])),Vue.createVNode(Dn,{show:d.value,"onUpdate:show":k[5]||(k[5]=P=>d.value=P),"category-options":o.categoryOptions,"category-filter":o.categoryFilter,"subcategory-filter":o.subcategoryFilter,"onUpdate:categoryFilter":_,"onUpdate:subcategoryFilter":m,onConfirm:L},null,8,["show","category-options","category-filter","subcategory-filter"]),(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{to:"body"},[Vue.createVNode(O,{show:s.value,"onUpdate:show":k[6]||(k[6]=P=>s.value=P),position:"bottom",round:"",class:"filter-popup-dark","close-on-click-overlay":!0,"lock-scroll":!0,duration:.3,"safe-area-inset-bottom":"",teleport:!1},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",Yn,[Vue.createElementVNode("div",{class:"popup-header"},[Vue.createElementVNode("button",{class:"popup-reset",onClick:v}," é‡ç½® "),k[26]||(k[26]=Vue.createElementVNode("span",{class:"popup-title"},"ç­›é€‰",-1)),Vue.createElementVNode("button",{class:"popup-close",onClick:y},[...k[25]||(k[25]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])])]),Vue.createElementVNode("div",Xn,[o.hideFormatFilter?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",jn,[k[27]||(k[27]=Vue.createElementVNode("h3",{class:"group-title"}," æ ¼å¼ ",-1)),Vue.createElementVNode("div",qn,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(Na),P=>(Vue.openBlock(),Vue.createElementBlock("button",{key:P.value,class:Vue.normalizeClass(["option-btn",{"is-active":c.value===P.value}]),onClick:q=>c.value=P.value},Vue.toDisplayString(P.label),11,Gn))),128))])])),Vue.createElementVNode("div",Qn,[k[28]||(k[28]=Vue.createElementVNode("h3",{class:"group-title"}," æ’åº ",-1)),Vue.createElementVNode("div",Kn,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(xa),P=>(Vue.openBlock(),Vue.createElementBlock("button",{key:P.value,class:Vue.normalizeClass(["option-btn",{"is-active":r.value===P.value}]),onClick:q=>r.value=P.value},Vue.toDisplayString(P.label),11,Zn))),128))])])]),Vue.createElementVNode("div",{class:"popup-footer"},[Vue.createElementVNode("button",{class:"confirm-btn",onClick:A}," ç¡®è®¤ç­›é€‰ ")])])]),_:1},8,["show"])]))],2)}}},el=ee(Jn,[["__scopeId","data-v-cbbff14b"]]);function tl(){const o=Vue.ref(!1),t=()=>window.innerWidth<768?200:400,e=()=>{o.value=window.scrollY>t()},a=()=>{window.scrollTo({top:0,behavior:"smooth"})};return Vue.onMounted(()=>{window.addEventListener("scroll",e,{passive:!0})}),Vue.onUnmounted(()=>{window.removeEventListener("scroll",e)}),{showButton:o,scrollToTop:a}}const al={__name:"BackToTop",setup(o){const{showButton:t,scrollToTop:e}=tl(),a=Vue.ref(null);Vue.watch(t,n=>{a.value&&(n?Q.fromTo(a.value,{opacity:0,scale:.5,y:20},{opacity:1,scale:1,y:0,duration:.4,ease:"back.out(2)"}):Q.to(a.value,{opacity:0,scale:.5,y:20,duration:.3,ease:"power2.in"}))});function l(){const n=window.scrollY||document.documentElement.scrollTop;Oo(n),a.value&&Q.to(a.value,{scale:.9,duration:.1,yoyo:!0,repeat:1,ease:"power2.inOut"}),e()}return(n,i)=>(Vue.openBlock(),Vue.createBlock(Vue.Transition,{name:"fade"},{default:Vue.withCtx(()=>[Vue.withDirectives(Vue.createElementVNode("button",{ref_key:"buttonRef",ref:a,class:"back-to-top","aria-label":"å›åˆ°é¡¶éƒ¨",onClick:l},[...i[0]||(i[0]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M12 19V5M5 12l7-7 7 7"})],-1)])],512),[[Vue.vShow,Vue.unref(t)]])]),_:1}))}},ol=ee(al,[["__scopeId","data-v-52c61066"]]);function qe(o,t){Io(o,t)}function Ge(o,t){Ao(o,t)}const nl={__name:"LoadingSpinner",props:{size:{type:String,default:"md",validator:o=>["sm","md","lg"].includes(o)}},setup(o){return(t,e)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(["loading-spinner",[`size-${o.size}`]])},[...e[0]||(e[0]=[Vue.createElementVNode("div",{class:"spinner"},null,-1)])],2))}},ie=ee(nl,[["__scopeId","data-v-1070a350"]]),ll={class:"avatar-desktop-modal__content"},il={class:"avatar-desktop-modal__preview"},rl={class:"screen-container"},sl={class:"avatar-showcase"},ul={key:0,class:"loading-placeholder"},cl=["src","alt"],dl={class:"avatar-desktop-modal__info"},pl={class:"info-header"},ml={class:"info-title"},Vl={key:0,class:"info-category"},vl={class:"shape-switcher"},hl={class:"shape-toggle"},fl={class:"info-tags"},gl={class:"tag tag--secondary"},wl={key:0,class:"tag tag--view"},yl={key:1,class:"tag tag--download"},kl={class:"info-details"},El={class:"detail-row"},bl={class:"detail-value"},Nl={class:"detail-row"},xl={class:"detail-value"},Cl={key:0,class:"detail-row"},Bl={class:"detail-value"},Ml=["disabled"],Dl={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},_l={__name:"AvatarDesktopModal",props:{wallpaper:{type:Object,default:null},isOpen:{type:Boolean,default:!1}},emits:["close"],setup(o,{emit:t}){const e=o,a=t,{currentSeries:l}=$e(),n=Te(),i=Vue.ref(!1),s=Vue.ref(!1),d=Vue.ref(!1),r=Vue.ref({width:0,height:0}),c=Vue.ref(!1),u=Vue.computed(()=>e.wallpaper?n.getDownloadCount(e.wallpaper.filename):0),p=Vue.computed(()=>e.wallpaper?n.getViewCount(e.wallpaper.filename):0),h=Vue.ref(!1),f=Vue.computed(()=>e.wallpaper?Le(e.wallpaper.filename):""),g=Vue.computed(()=>{if(!e.wallpaper?.category)return"";const{category:B,subcategory:y}=e.wallpaper;return y?`${B} / ${y}`:B}),V=Vue.computed(()=>e.wallpaper?.resolution?e.wallpaper.resolution:r.value.width>0?Se(r.value.width,r.value.height):{label:"åŠ è½½ä¸­",type:"secondary"}),w=Vue.computed(()=>e.wallpaper?Ue(e.wallpaper.filename).toUpperCase():""),x=Vue.computed(()=>e.wallpaper?ze(e.wallpaper.size):""),C=Vue.computed(()=>e.wallpaper?We(e.wallpaper.createdAt):""),z=Vue.computed(()=>e.wallpaper?.url?e.wallpaper.url:"");Vue.watch(()=>e.isOpen,B=>{B&&e.wallpaper?_():!B&&i.value&&m()}),Vue.watch(()=>e.wallpaper,()=>I());function _(){Ye(e.wallpaper),qe(e.wallpaper,l.value),i.value=!0}function m(){i.value=!1}function $(){a("close")}async function T(){if(!(!e.wallpaper||d.value)){d.value=!0;try{await Xe(e.wallpaper.url,e.wallpaper.filename),je(e.wallpaper,l.value),Ge(e.wallpaper,l.value)}finally{d.value=!1}}}function F(B){s.value=!0,r.value={width:B.target.naturalWidth,height:B.target.naturalHeight}}function I(){s.value=!1,r.value={width:0,height:0}}function L(B){i.value&&B.key==="Escape"&&m()}return Vue.onMounted(()=>{document.addEventListener("keydown",L)}),Vue.onUnmounted(()=>{document.removeEventListener("keydown",L)}),(B,y)=>(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{to:"body"},[Vue.createVNode(Vue.Transition,{name:"modal",onAfterLeave:$},{default:Vue.withCtx(()=>[i.value&&o.wallpaper?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"avatar-desktop-modal",onClick:Vue.withModifiers(m,["self"])},[Vue.createElementVNode("div",ll,[Vue.createElementVNode("button",{class:"avatar-desktop-modal__close","aria-label":"å…³é—­",onClick:m},[...y[4]||(y[4]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])]),Vue.createElementVNode("div",il,[Vue.createElementVNode("div",{class:Vue.normalizeClass(["iphone-frame",{"is-hovered":h.value}]),onMouseenter:y[0]||(y[0]=A=>h.value=!0),onMouseleave:y[1]||(y[1]=A=>h.value=!1)},[Vue.createElementVNode("div",rl,[y[6]||(y[6]=Vue.createElementVNode("div",{class:"screen-bg"},null,-1)),Vue.createElementVNode("div",sl,[Vue.createElementVNode("div",{class:Vue.normalizeClass(["avatar-wrapper",{"is-square":c.value}])},[s.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",ul,[Vue.createVNode(ie,{size:"md"})])),Vue.createElementVNode("img",{src:z.value,alt:o.wallpaper.filename,class:Vue.normalizeClass({loaded:s.value}),onLoad:F},null,42,cl)],2),y[5]||(y[5]=Vue.createElementVNode("div",{class:"avatar-name"}," å¤´åƒé¢„è§ˆ ",-1))])]),y[7]||(y[7]=Vue.createElementVNode("div",{class:"home-indicator"},null,-1)),y[8]||(y[8]=Vue.createElementVNode("div",{class:"mute-btn"},null,-1)),y[9]||(y[9]=Vue.createElementVNode("div",{class:"volume-up-btn"},null,-1)),y[10]||(y[10]=Vue.createElementVNode("div",{class:"volume-down-btn"},null,-1)),y[11]||(y[11]=Vue.createElementVNode("div",{class:"power-btn"},null,-1))],34)]),Vue.createElementVNode("div",dl,[Vue.createElementVNode("div",pl,[Vue.createElementVNode("h2",ml,Vue.toDisplayString(f.value),1),g.value?(Vue.openBlock(),Vue.createElementBlock("p",Vl,[y[12]||(y[12]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),Vue.createElementVNode("circle",{cx:"12",cy:"7",r:"4"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(g.value),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",vl,[y[15]||(y[15]=Vue.createElementVNode("span",{class:"shape-label"},"å¤´åƒå½¢çŠ¶",-1)),Vue.createElementVNode("div",hl,[Vue.createElementVNode("button",{class:Vue.normalizeClass(["shape-btn",{active:!c.value}]),title:"åœ†å½¢",onClick:y[2]||(y[2]=A=>c.value=!1)},[...y[13]||(y[13]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"10"})],-1),Vue.createElementVNode("span",null,"åœ†å½¢",-1)])],2),Vue.createElementVNode("button",{class:Vue.normalizeClass(["shape-btn",{active:c.value}]),title:"åœ†è§’æ–¹å½¢",onClick:y[3]||(y[3]=A=>c.value=!0)},[...y[14]||(y[14]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3"})],-1),Vue.createElementVNode("span",null,"æ–¹å½¢",-1)])],2)])]),Vue.createElementVNode("div",fl,[Vue.createElementVNode("span",{class:Vue.normalizeClass(["tag",[`tag--${V.value.type||"success"}`]])},Vue.toDisplayString(V.value.label),3),Vue.createElementVNode("span",gl,Vue.toDisplayString(w.value),1),p.value>0?(Vue.openBlock(),Vue.createElementBlock("span",wl,[y[16]||(y[16]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(p.value),1)])):Vue.createCommentVNode("",!0),u.value>0?(Vue.openBlock(),Vue.createElementBlock("span",yl,[y[17]||(y[17]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(u.value),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",kl,[Vue.createElementVNode("div",El,[y[18]||(y[18]=Vue.createElementVNode("span",{class:"detail-label"},"æ–‡ä»¶å¤§å°",-1)),Vue.createElementVNode("span",bl,Vue.toDisplayString(x.value),1)]),Vue.createElementVNode("div",Nl,[y[19]||(y[19]=Vue.createElementVNode("span",{class:"detail-label"},"ä¸Šä¼ æ—¶é—´",-1)),Vue.createElementVNode("span",xl,Vue.toDisplayString(C.value),1)]),r.value.width>0?(Vue.openBlock(),Vue.createElementBlock("div",Cl,[y[20]||(y[20]=Vue.createElementVNode("span",{class:"detail-label"},"å°ºå¯¸",-1)),Vue.createElementVNode("span",Bl,Vue.toDisplayString(r.value.width)+" Ã— "+Vue.toDisplayString(r.value.height),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("button",{class:"download-btn",disabled:d.value,onClick:T},[d.value?(Vue.openBlock(),Vue.createBlock(ie,{key:0,size:"sm"})):(Vue.openBlock(),Vue.createElementBlock("svg",Dl,[...y[21]||(y[21]=[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"},null,-1)])])),Vue.createElementVNode("span",null,Vue.toDisplayString(d.value?"ä¸‹è½½ä¸­...":"ä¸‹è½½å¤´åƒ"),1)],8,Ml)])])])):Vue.createCommentVNode("",!0)]),_:1})]))}},Sl=ee(_l,[["__scopeId","data-v-e2d77faa"]]),$l={class:"avatar-modal__content"},Tl={class:"avatar-modal__preview"},Ll={key:0,class:"loading-placeholder"},zl=["src","alt"],Ol={class:"shape-toggle"},Il={class:"avatar-modal__info"},Al={class:"info-header"},Rl={class:"info-title"},Fl={key:0,class:"info-category"},Pl={class:"info-tags"},Hl={class:"tag tag--secondary"},Ul={key:0,class:"tag tag--view"},Wl={key:1,class:"tag tag--download"},Yl={class:"info-details"},Xl={class:"detail-row"},jl={class:"detail-value"},ql={class:"detail-row"},Gl={class:"detail-value"},Ql={class:"detail-row"},Kl={class:"detail-value"},Zl={class:"info-actions"},Jl=["disabled"],ei={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ti={__name:"AvatarMobileModal",props:{wallpaper:{type:Object,default:null},isOpen:{type:Boolean,default:!1}},emits:["close"],setup(o,{emit:t}){const e=o,a=t,{currentSeries:l}=$e(),n=sa(),i=Te(),s=Vue.ref(!1),d=Vue.ref(!1),r=Vue.ref(!1),c=Vue.ref({width:0,height:0}),u=Vue.ref(!1),p=Vue.computed(()=>e.wallpaper?i.getDownloadCount(e.wallpaper.filename):0),h=Vue.computed(()=>e.wallpaper?i.getViewCount(e.wallpaper.filename):0),f=Vue.computed(()=>e.wallpaper?Le(e.wallpaper.filename):""),g=Vue.computed(()=>{if(!e.wallpaper?.category)return"";const{category:L,subcategory:B}=e.wallpaper;return B?`${L} / ${B}`:L}),V=Vue.computed(()=>e.wallpaper?.resolution?e.wallpaper.resolution:c.value.width>0?Se(c.value.width,c.value.height):{label:"åŠ è½½ä¸­",type:"secondary"}),w=Vue.computed(()=>e.wallpaper?Ue(e.wallpaper.filename).toUpperCase():""),x=Vue.computed(()=>e.wallpaper?ze(e.wallpaper.size):""),C=Vue.computed(()=>e.wallpaper?We(e.wallpaper.createdAt):"");Vue.watch(()=>e.isOpen,L=>{L&&e.wallpaper?z():!L&&s.value&&_()}),Vue.watch(()=>e.wallpaper,()=>{F()});function z(){Ye(e.wallpaper),qe(e.wallpaper,l.value),n.lock(),s.value=!0}function _(){s.value=!1}function m(){n.unlock(),a("close")}async function $(){if(!(!e.wallpaper||r.value)){r.value=!0;try{await Xe(e.wallpaper.url,e.wallpaper.filename),je(e.wallpaper,l.value),Ge(e.wallpaper,l.value)}finally{r.value=!1}}}function T(L){d.value=!0,c.value={width:L.target.naturalWidth,height:L.target.naturalHeight}}function F(){d.value=!1,c.value={width:0,height:0}}function I(L){s.value&&L.key==="Escape"&&_()}return Vue.onMounted(()=>document.addEventListener("keydown",I)),Vue.onUnmounted(()=>document.removeEventListener("keydown",I)),(L,B)=>(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{to:"body"},[Vue.createVNode(Vue.Transition,{name:"modal",onAfterLeave:m},{default:Vue.withCtx(()=>[s.value&&o.wallpaper?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"avatar-modal",onClick:Vue.withModifiers(_,["self"])},[Vue.createElementVNode("div",$l,[Vue.createElementVNode("button",{class:"avatar-modal__close","aria-label":"å…³é—­",onClick:_},[...B[2]||(B[2]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])]),Vue.createElementVNode("div",Tl,[Vue.createElementVNode("div",{class:Vue.normalizeClass(["avatar-frame",{"is-square":u.value}])},[d.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",Ll,[Vue.createVNode(ie,{size:"lg"})])),Vue.createElementVNode("img",{src:o.wallpaper.url,alt:o.wallpaper.filename,class:Vue.normalizeClass({loaded:d.value}),onLoad:T},null,42,zl)],2),Vue.createElementVNode("div",Ol,[Vue.createElementVNode("button",{class:Vue.normalizeClass(["shape-btn",{active:!u.value}]),title:"åœ†å½¢",onClick:B[0]||(B[0]=y=>u.value=!1)},[...B[3]||(B[3]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"10"})],-1)])],2),Vue.createElementVNode("button",{class:Vue.normalizeClass(["shape-btn",{active:u.value}]),title:"æ–¹å½¢",onClick:B[1]||(B[1]=y=>u.value=!0)},[...B[4]||(B[4]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3"})],-1)])],2)])]),Vue.createElementVNode("div",Il,[Vue.createElementVNode("div",Al,[Vue.createElementVNode("h3",Rl,Vue.toDisplayString(f.value),1),g.value?(Vue.openBlock(),Vue.createElementBlock("p",Fl,[B[5]||(B[5]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),Vue.createElementVNode("circle",{cx:"12",cy:"7",r:"4"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(g.value),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",Pl,[Vue.createElementVNode("span",{class:Vue.normalizeClass(["tag",[`tag--${V.value.type||"success"}`]])},Vue.toDisplayString(V.value.label),3),Vue.createElementVNode("span",Hl,Vue.toDisplayString(w.value),1),h.value>0?(Vue.openBlock(),Vue.createElementBlock("span",Ul,[B[6]||(B[6]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(h.value),1)])):Vue.createCommentVNode("",!0),p.value>0?(Vue.openBlock(),Vue.createElementBlock("span",Wl,[B[7]||(B[7]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(p.value),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",Yl,[Vue.createElementVNode("div",Xl,[B[8]||(B[8]=Vue.createElementVNode("span",{class:"detail-label"},"æ–‡ä»¶å¤§å°",-1)),Vue.createElementVNode("span",jl,Vue.toDisplayString(x.value),1)]),Vue.createElementVNode("div",ql,[B[9]||(B[9]=Vue.createElementVNode("span",{class:"detail-label"},"ä¸Šä¼ æ—¶é—´",-1)),Vue.createElementVNode("span",Gl,Vue.toDisplayString(C.value),1)]),Vue.createElementVNode("div",Ql,[B[10]||(B[10]=Vue.createElementVNode("span",{class:"detail-label"},"å°ºå¯¸",-1)),Vue.createElementVNode("span",Kl,Vue.toDisplayString(c.value.width>0?`${c.value.width} Ã— ${c.value.height}`:"åŠ è½½ä¸­..."),1)])]),Vue.createElementVNode("div",Zl,[Vue.createElementVNode("button",{class:"action-btn action-btn--primary",disabled:r.value,onClick:$},[r.value?(Vue.openBlock(),Vue.createBlock(ie,{key:0,size:"sm"})):(Vue.openBlock(),Vue.createElementBlock("svg",ei,[...B[11]||(B[11]=[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"},null,-1)])])),Vue.createElementVNode("span",null,Vue.toDisplayString(r.value?"ä¸‹è½½ä¸­...":"ä¸‹è½½å¤´åƒ"),1)],8,Jl)])])])])):Vue.createCommentVNode("",!0)]),_:1})]))}},ai=ee(ti,[["__scopeId","data-v-d5aae111"]]);function oo(){const o=Vue.ref(!1),t=Vue.ref(!1);function e(){return t.value||o.value?!1:(t.value=!0,o.value=!0,!0)}function a(){return t.value||!o.value?!1:(t.value=!0,o.value=!1,!0)}function l(){t.value=!1}function n(){return o.value?a():e()}function i(){o.value=!1,t.value=!1}return{isDeviceMode:o,isAnimating:t,enter:e,exit:a,toggle:n,onAnimationEnd:l,reset:i}}const oi={class:"desktop-modal__content"},ni={class:"desktop-modal__preview"},li={class:"screen-container"},ii={key:0,class:"loading-placeholder"},ri=["src","alt"],si={class:"clock"},ui={class:"desktop-modal__info"},ci={class:"info-header"},di={class:"info-title"},pi={key:0,class:"info-category"},mi={class:"info-tags"},Vi={class:"tag tag--secondary"},vi={key:0,class:"tag tag--view"},hi={key:1,class:"tag tag--download"},fi={class:"info-details"},gi={class:"detail-row"},wi={class:"detail-value"},yi={class:"detail-row"},ki={class:"detail-value"},Ei={key:0,class:"detail-row"},bi={class:"detail-value"},Ni=["disabled"],xi={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ci={__name:"DesktopModal",props:{wallpaper:{type:Object,default:null},isOpen:{type:Boolean,default:!1}},emits:["close"],setup(o,{emit:t}){const e=o,a=t,{currentSeries:l}=$e(),n=Te(),i=Vue.ref(!1),s=Vue.ref(!1),d=Vue.ref(!1),r=Vue.ref({width:0,height:0}),c=Vue.computed(()=>e.wallpaper?n.getDownloadCount(e.wallpaper.filename):0),u=Vue.computed(()=>e.wallpaper?n.getViewCount(e.wallpaper.filename):0),p=Vue.ref(["0","0","0","0"]);let h=null;const f=Vue.ref(!1);let g=null;const V=Vue.ref(!1);function w(){const k=new Date,R=k.getHours().toString().padStart(2,"0"),H=k.getMinutes().toString().padStart(2,"0");p.value=[R[0],R[1],H[0],H[1]]}function x(){i.value&&(f.value=!0,setTimeout(()=>{f.value=!1},3500))}const C=Vue.computed(()=>e.wallpaper?Le(e.wallpaper.filename):""),z=Vue.computed(()=>{if(!e.wallpaper?.category)return"";const{category:k,subcategory:R}=e.wallpaper;return R?`${k} / ${R}`:k}),_=Vue.computed(()=>e.wallpaper?.resolution?e.wallpaper.resolution:r.value.width>0?Se(r.value.width,r.value.height):{label:"åŠ è½½ä¸­",type:"secondary"}),m=Vue.computed(()=>e.wallpaper?Ue(e.wallpaper.filename).toUpperCase():""),$=Vue.computed(()=>e.wallpaper?ze(e.wallpaper.size):""),T=Vue.computed(()=>e.wallpaper?We(e.wallpaper.createdAt):""),F=Vue.computed(()=>e.wallpaper?.url?(e.wallpaper.url.includes(".webp")||e.wallpaper.url.includes("/preview/"),e.wallpaper.url):"");Vue.watch(()=>e.isOpen,async k=>{k&&e.wallpaper?I():!k&&i.value&&L()}),Vue.watch(()=>e.wallpaper,()=>{v()});function I(){Ye(e.wallpaper),qe(e.wallpaper,l.value),i.value=!0,w(),h&&clearInterval(h),h=setInterval(w,1e3),setTimeout(x,1500),g=setInterval(x,8e3)}function L(){i.value=!1,h&&(clearInterval(h),h=null),g&&(clearInterval(g),g=null)}function B(){a("close")}async function y(){if(!(!e.wallpaper||d.value)){d.value=!0;try{await Xe(e.wallpaper.url,e.wallpaper.filename),je(e.wallpaper,l.value),Ge(e.wallpaper,l.value)}finally{d.value=!1}}}function A(k){s.value=!0,r.value={width:k.target.naturalWidth,height:k.target.naturalHeight}}function v(){s.value=!1,r.value={width:0,height:0},f.value=!1}function M(k){i.value&&k.key==="Escape"&&L()}return Vue.onMounted(()=>{document.addEventListener("keydown",M)}),Vue.onUnmounted(()=>{document.removeEventListener("keydown",M),h&&clearInterval(h),g&&clearInterval(g)}),(k,R)=>(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{to:"body"},[Vue.createVNode(Vue.Transition,{name:"modal",onAfterLeave:B},{default:Vue.withCtx(()=>[i.value&&o.wallpaper?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"desktop-modal",onClick:Vue.withModifiers(L,["self"])},[Vue.createElementVNode("div",oi,[Vue.createElementVNode("button",{class:"desktop-modal__close","aria-label":"å…³é—­",onClick:L},[...R[2]||(R[2]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])]),Vue.createElementVNode("div",ni,[Vue.createElementVNode("div",{class:Vue.normalizeClass(["iphone-frame",{"is-hovered":V.value}]),onMouseenter:R[0]||(R[0]=H=>V.value=!0),onMouseleave:R[1]||(R[1]=H=>V.value=!1)},[Vue.createElementVNode("div",li,[s.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",ii,[Vue.createVNode(ie,{size:"md"})])),Vue.createElementVNode("img",{src:F.value,alt:o.wallpaper.filename,class:Vue.normalizeClass({loaded:s.value}),onLoad:A},null,42,ri)]),Vue.createElementVNode("div",{class:Vue.normalizeClass(["dynamic-island",{expanded:f.value}])},[...R[3]||(R[3]=[Vue.createElementVNode("div",{class:"caller"},[Vue.createElementVNode("div",{class:"avatar"}),Vue.createElementVNode("div",{class:"info"},[Vue.createElementVNode("span",null,"iPhone"),Vue.createElementVNode("p",null,"æ¥ç”µä¸­...")])],-1),Vue.createElementVNode("div",{class:"actions"},[Vue.createElementVNode("div",{class:"refuse"},[Vue.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"14",height:"14"},[Vue.createElementVNode("path",{fill:"currentColor",d:"M199.232 125.568 90.624 379.008a32 32 0 0 0 6.784 35.2l512.384 512.384a32 32 0 0 0 35.2 6.784l253.44-108.608a32 32 0 0 0 10.048-52.032L769.6 633.92a32 32 0 0 0-36.928-5.952l-130.176 65.088-271.488-271.552 65.024-130.176a32 32 0 0 0-5.952-36.928L251.2 115.52a32 32 0 0 0-51.968 10.048"})])]),Vue.createElementVNode("div",{class:"answer"},[Vue.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"14",height:"14"},[Vue.createElementVNode("path",{fill:"currentColor",d:"M199.232 125.568 90.624 379.008a32 32 0 0 0 6.784 35.2l512.384 512.384a32 32 0 0 0 35.2 6.784l253.44-108.608a32 32 0 0 0 10.048-52.032L769.6 633.92a32 32 0 0 0-36.928-5.952l-130.176 65.088-271.488-271.552 65.024-130.176a32 32 0 0 0-5.952-36.928L251.2 115.52a32 32 0 0 0-51.968 10.048"})])])],-1)])],2),Vue.createElementVNode("div",si,[Vue.createElementVNode("span",null,Vue.toDisplayString(p.value[0]),1),Vue.createElementVNode("span",null,Vue.toDisplayString(p.value[1]),1),R[4]||(R[4]=Vue.createElementVNode("span",{class:"colon"},":",-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(p.value[2]),1),Vue.createElementVNode("span",null,Vue.toDisplayString(p.value[3]),1)]),R[5]||(R[5]=Vue.createElementVNode("div",{class:"home-indicator"},null,-1)),R[6]||(R[6]=Vue.createElementVNode("div",{class:"mute-btn"},null,-1)),R[7]||(R[7]=Vue.createElementVNode("div",{class:"volume-up-btn"},null,-1)),R[8]||(R[8]=Vue.createElementVNode("div",{class:"volume-down-btn"},null,-1)),R[9]||(R[9]=Vue.createElementVNode("div",{class:"power-btn"},null,-1))],34)]),Vue.createElementVNode("div",ui,[Vue.createElementVNode("div",ci,[Vue.createElementVNode("h2",di,Vue.toDisplayString(C.value),1),z.value?(Vue.openBlock(),Vue.createElementBlock("p",pi,[R[10]||(R[10]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),Vue.createElementVNode("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(z.value),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",mi,[Vue.createElementVNode("span",{class:Vue.normalizeClass(["tag",[`tag--${_.value.type||"success"}`]])},Vue.toDisplayString(_.value.label),3),Vue.createElementVNode("span",Vi,Vue.toDisplayString(m.value),1),u.value>0?(Vue.openBlock(),Vue.createElementBlock("span",vi,[R[11]||(R[11]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(u.value),1)])):Vue.createCommentVNode("",!0),c.value>0?(Vue.openBlock(),Vue.createElementBlock("span",hi,[R[12]||(R[12]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(c.value),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",fi,[Vue.createElementVNode("div",gi,[R[13]||(R[13]=Vue.createElementVNode("span",{class:"detail-label"},"æ–‡ä»¶å¤§å°",-1)),Vue.createElementVNode("span",wi,Vue.toDisplayString($.value),1)]),Vue.createElementVNode("div",yi,[R[14]||(R[14]=Vue.createElementVNode("span",{class:"detail-label"},"ä¸Šä¼ æ—¶é—´",-1)),Vue.createElementVNode("span",ki,Vue.toDisplayString(T.value),1)]),r.value.width>0?(Vue.openBlock(),Vue.createElementBlock("div",Ei,[R[15]||(R[15]=Vue.createElementVNode("span",{class:"detail-label"},"åˆ†è¾¨ç‡",-1)),Vue.createElementVNode("span",bi,Vue.toDisplayString(r.value.width)+" Ã— "+Vue.toDisplayString(r.value.height),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("button",{class:"download-btn",disabled:d.value,onClick:y},[d.value?(Vue.openBlock(),Vue.createBlock(ie,{key:0,size:"sm"})):(Vue.openBlock(),Vue.createElementBlock("svg",xi,[...R[16]||(R[16]=[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"},null,-1)])])),Vue.createElementVNode("span",null,Vue.toDisplayString(d.value?"ä¸‹è½½ä¸­...":"ä¸‹è½½å£çº¸"),1)],8,Ni)])])])):Vue.createCommentVNode("",!0)]),_:1})]))}},Bi=ee(Ci,[["__scopeId","data-v-5c4c6b1d"]]),Mi={class:"device-mode__frame"},Di={class:"screen-container"},_i=["src","alt"],Si={class:"clock"},$i={__name:"DeviceMode",props:{visible:{type:Boolean,default:!1},imageSrc:{type:String,required:!0},imageAlt:{type:String,default:""}},emits:["exit","afterEnter","afterLeave"],setup(o,{emit:t}){const e=o,a=t,{isMobile:l}=lt(),n=Vue.ref(["0","0","0","0"]),i=Vue.ref(!1),s=Vue.ref(!1);let d=null,r=null;function c(){const V=new Date,w=V.getHours().toString().padStart(2,"0"),x=V.getMinutes().toString().padStart(2,"0");n.value=[w[0],w[1],x[0],x[1]]}function u(){e.visible&&(i.value=!0,setTimeout(()=>{i.value=!1},3500))}function p(){s.value=!0}const h=Vue.computed(()=>{if(!l.value)return{width:280,height:580};const V=window.innerHeight,w=window.innerWidth,x=V-80,C=w-40,z=280/580;let _=Math.min(x*.9,580),m=_*z;return m>C*.85&&(m=C*.85,_=m/z),{width:Math.floor(m),height:Math.floor(_)}});function f(){a("afterEnter"),c(),d&&clearInterval(d),d=setInterval(c,1e3),setTimeout(u,1500),r=setInterval(u,8e3)}function g(){a("afterLeave"),d&&(clearInterval(d),d=null),r&&(clearInterval(r),r=null),s.value=!1}return Vue.onMounted(()=>{}),Vue.onUnmounted(()=>{d&&(clearInterval(d),d=null),r&&(clearInterval(r),r=null)}),(V,w)=>(Vue.openBlock(),Vue.createBlock(Vue.Transition,{name:"device-mode",onAfterEnter:f,onAfterLeave:g},{default:Vue.withCtx(()=>[o.visible?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:Vue.normalizeClass(["device-mode",{"is-mobile":Vue.unref(l)}])},[Vue.createElementVNode("button",{class:"device-mode__exit","aria-label":"é€€å‡ºçœŸæœºæ˜¾ç¤º",onClick:w[0]||(w[0]=x=>a("exit"))},[...w[1]||(w[1]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M18 6L6 18M6 6l12 12"})],-1),Vue.createElementVNode("span",null,"é€€å‡ºçœŸæœº",-1)])]),Vue.createElementVNode("div",Mi,[Vue.createElementVNode("div",{class:"iphone-frame",style:Vue.normalizeStyle({width:`${h.value.width}px`,height:`${h.value.height}px`})},[Vue.createElementVNode("div",Di,[Vue.createElementVNode("img",{src:o.imageSrc,alt:o.imageAlt,class:Vue.normalizeClass({loaded:s.value}),onLoad:p},null,42,_i)]),Vue.createElementVNode("div",{class:Vue.normalizeClass(["dynamic-island",{expanded:i.value}])},[...w[2]||(w[2]=[Vue.createElementVNode("div",{class:"caller"},[Vue.createElementVNode("div",{class:"avatar"}),Vue.createElementVNode("div",{class:"info"},[Vue.createElementVNode("span",null,"iPhone"),Vue.createElementVNode("p",null,"æ¥ç”µä¸­...")])],-1),Vue.createElementVNode("div",{class:"actions"},[Vue.createElementVNode("div",{class:"refuse"},[Vue.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"14",height:"14"},[Vue.createElementVNode("path",{fill:"currentColor",d:"M199.232 125.568 90.624 379.008a32 32 0 0 0 6.784 35.2l512.384 512.384a32 32 0 0 0 35.2 6.784l253.44-108.608a32 32 0 0 0 10.048-52.032L769.6 633.92a32 32 0 0 0-36.928-5.952l-130.176 65.088-271.488-271.552 65.024-130.176a32 32 0 0 0-5.952-36.928L251.2 115.52a32 32 0 0 0-51.968 10.048"})])]),Vue.createElementVNode("div",{class:"answer"},[Vue.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"14",height:"14"},[Vue.createElementVNode("path",{fill:"currentColor",d:"M199.232 125.568 90.624 379.008a32 32 0 0 0 6.784 35.2l512.384 512.384a32 32 0 0 0 35.2 6.784l253.44-108.608a32 32 0 0 0 10.048-52.032L769.6 633.92a32 32 0 0 0-36.928-5.952l-130.176 65.088-271.488-271.552 65.024-130.176a32 32 0 0 0-5.952-36.928L251.2 115.52a32 32 0 0 0-51.968 10.048"})])])],-1)])],2),Vue.createElementVNode("div",Si,[Vue.createElementVNode("span",null,Vue.toDisplayString(n.value[0]),1),Vue.createElementVNode("span",null,Vue.toDisplayString(n.value[1]),1),w[3]||(w[3]=Vue.createElementVNode("span",{class:"colon"},":",-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(n.value[2]),1),Vue.createElementVNode("span",null,Vue.toDisplayString(n.value[3]),1)]),w[4]||(w[4]=Vue.createElementVNode("div",{class:"home-indicator"},null,-1)),w[5]||(w[5]=Vue.createElementVNode("div",{class:"mute-btn"},null,-1)),w[6]||(w[6]=Vue.createElementVNode("div",{class:"volume-up-btn"},null,-1)),w[7]||(w[7]=Vue.createElementVNode("div",{class:"volume-down-btn"},null,-1)),w[8]||(w[8]=Vue.createElementVNode("div",{class:"power-btn"},null,-1))],4)])],2)):Vue.createCommentVNode("",!0)]),_:1}))}},no=ee($i,[["__scopeId","data-v-424d7eee"]]),Ti={class:"mobile-modal__preview"},Li={key:0,class:"loading-placeholder"},zi=["src","alt"],Oi={class:"mobile-modal__info"},Ii={class:"info-header"},Ai={class:"info-title"},Ri={key:0,class:"info-category"},Fi={class:"info-tags"},Pi={class:"tag tag--secondary"},Hi={key:0,class:"tag tag--view"},Ui={key:1,class:"tag tag--download"},Wi={class:"info-details"},Yi={class:"detail-row"},Xi={class:"detail-value"},ji={class:"detail-row"},qi={class:"detail-value"},Gi={class:"detail-row"},Qi={class:"detail-value"},Ki={class:"info-actions"},Zi=["disabled"],Ji={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},er={__name:"MobileModal",props:{wallpaper:{type:Object,default:null},isOpen:{type:Boolean,default:!1}},emits:["close"],setup(o,{emit:t}){const e=o,a=t,{currentSeries:l}=$e(),n=oo(),i=sa(),s=Te(),d=Vue.ref(!1),r=Vue.ref(!1),c=Vue.ref(!1),u=Vue.ref({width:0,height:0}),p=Vue.computed(()=>e.wallpaper?s.getDownloadCount(e.wallpaper.filename):0),h=Vue.computed(()=>e.wallpaper?s.getViewCount(e.wallpaper.filename):0),f=Vue.computed(()=>e.wallpaper?Le(e.wallpaper.filename):""),g=Vue.computed(()=>{if(!e.wallpaper?.category)return"";const{category:B,subcategory:y}=e.wallpaper;return y?`${B} / ${y}`:B}),V=Vue.computed(()=>e.wallpaper?.resolution?e.wallpaper.resolution:u.value.width>0?Se(u.value.width,u.value.height):{label:"åŠ è½½ä¸­",type:"secondary"}),w=Vue.computed(()=>e.wallpaper?Ue(e.wallpaper.filename).toUpperCase():""),x=Vue.computed(()=>e.wallpaper?ze(e.wallpaper.size):""),C=Vue.computed(()=>e.wallpaper?We(e.wallpaper.createdAt):""),z=Vue.computed(()=>l.value==="mobile");Vue.watch(()=>e.isOpen,B=>{B&&e.wallpaper?_():!B&&d.value&&m()}),Vue.watch(()=>e.wallpaper,()=>{I()});function _(){Ye(e.wallpaper),qe(e.wallpaper,l.value),i.lock(),d.value=!0}function m(){if(n.isDeviceMode.value){n.exit();return}d.value=!1}function $(){i.unlock(),a("close")}async function T(){if(!(!e.wallpaper||c.value)){c.value=!0;try{await Xe(e.wallpaper.url,e.wallpaper.filename),je(e.wallpaper,l.value),Ge(e.wallpaper,l.value)}finally{c.value=!1}}}function F(B){r.value=!0,u.value={width:B.target.naturalWidth,height:B.target.naturalHeight}}function I(){r.value=!1,u.value={width:0,height:0},n.isDeviceMode.value&&n.reset()}function L(B){d.value&&B.key==="Escape"&&(n.isDeviceMode.value?n.exit():m())}return Vue.onMounted(()=>document.addEventListener("keydown",L)),Vue.onUnmounted(()=>document.removeEventListener("keydown",L)),(B,y)=>(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{to:"body"},[Vue.createVNode(Vue.Transition,{name:"modal",onAfterLeave:$},{default:Vue.withCtx(()=>[d.value&&o.wallpaper?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:Vue.normalizeClass(["mobile-modal",{"is-device-mode":Vue.unref(n).isDeviceMode.value}]),onClick:Vue.withModifiers(m,["self"])},[Vue.createElementVNode("div",{class:Vue.normalizeClass(["mobile-modal__content",{"is-device-mode":Vue.unref(n).isDeviceMode.value}])},[Vue.createVNode(Vue.Transition,{name:"fade"},{default:Vue.withCtx(()=>[Vue.unref(n).isDeviceMode.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("button",{key:0,class:"mobile-modal__close","aria-label":"å…³é—­",onClick:m},[...y[2]||(y[2]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])]))]),_:1}),Vue.createVNode(Vue.Transition,{name:"content-fade"},{default:Vue.withCtx(()=>[Vue.withDirectives(Vue.createElementVNode("div",Ti,[r.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",Li,[Vue.createVNode(ie,{size:"lg"})])),Vue.createElementVNode("img",{src:o.wallpaper.url,alt:o.wallpaper.filename,class:Vue.normalizeClass({loaded:r.value}),onLoad:F},null,42,zi)],512),[[Vue.vShow,!Vue.unref(n).isDeviceMode.value]])]),_:1}),z.value?(Vue.openBlock(),Vue.createBlock(no,{key:0,visible:Vue.unref(n).isDeviceMode.value,"image-src":o.wallpaper.url,"image-alt":o.wallpaper.filename,onExit:Vue.unref(n).exit,onAfterEnter:Vue.unref(n).onAnimationEnd,onAfterLeave:y[0]||(y[0]=()=>{Vue.unref(n).onAnimationEnd(),e.isOpen||(d.value=!1)})},null,8,["visible","image-src","image-alt","onExit","onAfterEnter"])):Vue.createCommentVNode("",!0),Vue.withDirectives(Vue.createElementVNode("div",Oi,[Vue.createElementVNode("div",Ii,[Vue.createElementVNode("h3",Ai,Vue.toDisplayString(f.value),1),g.value?(Vue.openBlock(),Vue.createElementBlock("p",Ri,[y[3]||(y[3]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),Vue.createElementVNode("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(g.value),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",Fi,[Vue.createElementVNode("span",{class:Vue.normalizeClass(["tag",[`tag--${V.value.type||"success"}`]])},Vue.toDisplayString(V.value.label),3),Vue.createElementVNode("span",Pi,Vue.toDisplayString(w.value),1),h.value>0?(Vue.openBlock(),Vue.createElementBlock("span",Hi,[y[4]||(y[4]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(h.value),1)])):Vue.createCommentVNode("",!0),p.value>0?(Vue.openBlock(),Vue.createElementBlock("span",Ui,[y[5]||(y[5]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(p.value),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",Wi,[Vue.createElementVNode("div",Yi,[y[6]||(y[6]=Vue.createElementVNode("span",{class:"detail-label"},"æ–‡ä»¶å¤§å°",-1)),Vue.createElementVNode("span",Xi,Vue.toDisplayString(x.value),1)]),Vue.createElementVNode("div",ji,[y[7]||(y[7]=Vue.createElementVNode("span",{class:"detail-label"},"ä¸Šä¼ æ—¶é—´",-1)),Vue.createElementVNode("span",qi,Vue.toDisplayString(C.value),1)]),Vue.createElementVNode("div",Gi,[y[8]||(y[8]=Vue.createElementVNode("span",{class:"detail-label"},"åˆ†è¾¨ç‡",-1)),Vue.createElementVNode("span",Qi,Vue.toDisplayString(u.value.width>0?`${u.value.width} Ã— ${u.value.height}`:"åŠ è½½ä¸­..."),1)])]),Vue.createElementVNode("div",Ki,[z.value?(Vue.openBlock(),Vue.createElementBlock("button",{key:0,class:Vue.normalizeClass(["action-btn action-btn--secondary",{"is-active":Vue.unref(n).isDeviceMode.value}]),onClick:y[1]||(y[1]=(...A)=>Vue.unref(n).toggle&&Vue.unref(n).toggle(...A))},[...y[9]||(y[9]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2"}),Vue.createElementVNode("path",{d:"M12 18h.01"})],-1),Vue.createElementVNode("span",null,"çœŸæœºé¢„è§ˆ",-1)])],2)):Vue.createCommentVNode("",!0),Vue.createElementVNode("button",{class:"action-btn action-btn--primary",disabled:c.value,onClick:T},[c.value?(Vue.openBlock(),Vue.createBlock(ie,{key:0,size:"sm"})):(Vue.openBlock(),Vue.createElementBlock("svg",Ji,[...y[10]||(y[10]=[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"},null,-1)])])),Vue.createElementVNode("span",null,Vue.toDisplayString(c.value?"ä¸‹è½½ä¸­...":"ä¸‹è½½å£çº¸"),1)],8,Zi)])],512),[[Vue.vShow,!Vue.unref(n).isDeviceMode.value]])],2)],2)):Vue.createCommentVNode("",!0)]),_:1})]))}},tr=ee(er,[["__scopeId","data-v-9b669cef"]]),ar={key:0,class:"modal-content__loading"},or={key:0,class:"modal-content__error"},nr=["src","alt"],lr={__name:"ModalContent",props:{src:{type:String,required:!0},alt:{type:String,default:""},isAvatar:{type:Boolean,default:!1}},emits:["load","error"],setup(o,{expose:t,emit:e}){const a=e,l=Vue.ref(!1),n=Vue.ref(!1);function i(d){l.value=!0,a("load",{width:d.target.naturalWidth,height:d.target.naturalHeight})}function s(){n.value=!0,l.value=!0,a("error")}return t({isLoaded:l,hasError:n}),(d,r)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(["modal-content",{"is-avatar":o.isAvatar}])},[Vue.createVNode(Vue.Transition,{name:"fade"},{default:Vue.withCtx(()=>[l.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",ar,[Vue.createVNode(ie,{size:"lg"})]))]),_:1}),Vue.createVNode(Vue.Transition,{name:"fade"},{default:Vue.withCtx(()=>[n.value?(Vue.openBlock(),Vue.createElementBlock("div",or,[...r[0]||(r[0]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),Vue.createElementVNode("path",{d:"M12 8v4M12 16h.01"})],-1),Vue.createElementVNode("p",null,"å›¾ç‰‡åŠ è½½å¤±è´¥",-1)])])):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(Vue.Transition,{name:"image-reveal"},{default:Vue.withCtx(()=>[Vue.withDirectives(Vue.createElementVNode("img",{src:o.src,alt:o.alt,class:Vue.normalizeClass(["modal-content__image",{"is-avatar":o.isAvatar}]),onLoad:i,onError:s},null,42,nr),[[Vue.vShow,l.value&&!n.value]])]),_:1})],2))}},ir=ee(lr,[["__scopeId","data-v-354e7e0a"]]),rr={class:"modal-info"},sr={key:0,class:"modal-info__skeleton"},ur={class:"modal-info__main"},cr={class:"modal-info__title"},dr={key:0,class:"modal-info__category"},pr={class:"modal-info__meta"},mr={class:"modal-info__tags"},Vr={class:"tag tag--secondary"},vr={key:0,class:"tag tag--view"},hr={key:1,class:"tag tag--download"},fr={class:"modal-info__details"},gr={class:"detail-item"},wr={class:"detail-item"},yr={class:"modal-info__actions"},kr={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Er={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},br=["disabled"],Nr={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},xr={__name:"ModalInfo",props:{wallpaper:{type:Object,default:null},dimensions:{type:Object,default:()=>({width:0,height:0})},viewCount:{type:Number,default:0},downloadCount:{type:Number,default:0},isLoading:{type:Boolean,default:!0},isDownloading:{type:Boolean,default:!1},canUseDeviceMode:{type:Boolean,default:!1},isDeviceMode:{type:Boolean,default:!1}},emits:["download","toggleDeviceMode"],setup(o,{emit:t}){const e=o,a=t,l=Vue.computed(()=>e.wallpaper?Le(e.wallpaper.filename):""),n=Vue.computed(()=>{if(!e.wallpaper?.category)return"";const{category:c,subcategory:u}=e.wallpaper;return u?`${c} / ${u}`:c}),i=Vue.computed(()=>e.wallpaper?.resolution?e.wallpaper.resolution:e.dimensions.width>0?Se(e.dimensions.width,e.dimensions.height):{label:"åŠ è½½ä¸­",type:"secondary"}),s=Vue.computed(()=>e.wallpaper?Ue(e.wallpaper.filename).toUpperCase():""),d=Vue.computed(()=>e.wallpaper?ze(e.wallpaper.size):""),r=Vue.computed(()=>e.wallpaper?We(e.wallpaper.createdAt):"");return(c,u)=>(Vue.openBlock(),Vue.createElementBlock("div",rr,[o.isLoading?(Vue.openBlock(),Vue.createElementBlock("div",sr,[...u[2]||(u[2]=[Vue.createStaticVNode('<div class="skeleton__left" data-v-703611ce><div class="skeleton__title" data-v-703611ce></div><div class="skeleton__tags" data-v-703611ce><div class="skeleton__tag" data-v-703611ce></div><div class="skeleton__tag skeleton__tag--short" data-v-703611ce></div></div></div><div class="skeleton__btn" data-v-703611ce></div>',2)])])):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createElementVNode("div",ur,[Vue.createElementVNode("h3",cr,Vue.toDisplayString(l.value),1),n.value?(Vue.openBlock(),Vue.createElementBlock("div",dr,[u[3]||(u[3]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),Vue.createElementVNode("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(n.value),1)])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",pr,[Vue.createElementVNode("div",mr,[Vue.createElementVNode("span",{class:Vue.normalizeClass(["tag",[`tag--${i.value.type||"success"}`]])},Vue.toDisplayString(i.value.label),3),Vue.createElementVNode("span",Vr,Vue.toDisplayString(s.value),1),o.viewCount>0?(Vue.openBlock(),Vue.createElementBlock("span",vr,[u[4]||(u[4]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(o.viewCount),1)])):Vue.createCommentVNode("",!0),o.downloadCount>0?(Vue.openBlock(),Vue.createElementBlock("span",hr,[u[5]||(u[5]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(o.downloadCount),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",fr,[Vue.createElementVNode("span",gr,Vue.toDisplayString(d.value),1),Vue.createElementVNode("span",wr,Vue.toDisplayString(r.value),1)])])]),Vue.createElementVNode("div",yr,[o.canUseDeviceMode?(Vue.openBlock(),Vue.createElementBlock("button",{key:0,class:Vue.normalizeClass(["action-btn action-btn--secondary",{"is-active":o.isDeviceMode}]),onClick:u[0]||(u[0]=p=>a("toggleDeviceMode"))},[o.isDeviceMode?(Vue.openBlock(),Vue.createElementBlock("svg",Er,[...u[7]||(u[7]=[Vue.createElementVNode("path",{d:"M18 6L6 18M6 6l12 12"},null,-1)])])):(Vue.openBlock(),Vue.createElementBlock("svg",kr,[...u[6]||(u[6]=[Vue.createElementVNode("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2"},null,-1),Vue.createElementVNode("path",{d:"M12 18h.01"},null,-1)])]))],2)):Vue.createCommentVNode("",!0),Vue.createElementVNode("button",{class:"action-btn action-btn--primary",disabled:o.isDownloading,onClick:u[1]||(u[1]=p=>a("download"))},[o.isDownloading?(Vue.openBlock(),Vue.createBlock(ie,{key:0,size:"sm"})):(Vue.openBlock(),Vue.createElementBlock("svg",Nr,[...u[8]||(u[8]=[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"},null,-1)])]))],8,br)])],64))]))}},Cr=ee(xr,[["__scopeId","data-v-703611ce"]]),Br={__name:"index",props:{wallpaper:{type:Object,default:null},isOpen:{type:Boolean,default:!1}},emits:["close"],setup(o,{emit:t}){const e=o,a=t,{currentSeries:l}=$e(),{isMobile:n,isDesktop:i}=lt(),s=oo(),d=Te(),r=Vue.computed(()=>i.value&&l.value==="mobile"),c=Vue.computed(()=>i.value&&l.value==="avatar"),u=Vue.computed(()=>n.value&&l.value==="mobile"),p=Vue.computed(()=>n.value&&l.value==="avatar"),h=Vue.ref(null),f=Vue.ref({width:0,height:0}),g=Vue.ref(!1),V=Vue.ref(!1),w=Vue.ref(0),x=Vue.computed(()=>e.wallpaper?d.getDownloadCount(e.wallpaper.filename):0),C=Vue.computed(()=>e.wallpaper?d.getViewCount(e.wallpaper.filename):0),z=Vue.ref(!1),_=Vue.computed(()=>l.value==="mobile"),m=Vue.computed(()=>l.value==="avatar");Vue.watch(()=>e.isOpen,async H=>{r.value||c.value||u.value||p.value||(H&&e.wallpaper?$():!H&&z.value&&T())}),Vue.watch(()=>e.wallpaper,()=>{k()});function $(){Ye(e.wallpaper),qe(e.wallpaper,l.value),w.value=window.scrollY||window.pageYOffset,document.body.style.top=`-${w.value}px`,document.body.classList.add("modal-open"),z.value=!0}function T(){if(s.isDeviceMode.value){s.exit();return}z.value=!1}function F(){document.body.classList.remove("modal-open"),document.body.style.top="",window.scrollTo({top:w.value,behavior:"instant"}),a("close")}function I(){s.onAnimationEnd()}function L(){s.onAnimationEnd(),e.isOpen||(z.value=!1)}function B(){s.toggle()}function y(){s.exit()}async function A(){if(!(!e.wallpaper||V.value)){V.value=!0;try{await Xe(e.wallpaper.url,e.wallpaper.filename),je(e.wallpaper,l.value),Ge(e.wallpaper,l.value)}finally{V.value=!1}}}function v(H){g.value=!0,f.value=H}function M(){g.value=!0}function k(){g.value=!1,f.value={width:0,height:0},s.isDeviceMode.value&&s.reset()}function R(H){z.value&&H.key==="Escape"&&(s.isDeviceMode.value?y():T())}return Vue.onMounted(()=>{document.addEventListener("keydown",R)}),Vue.onUnmounted(()=>{document.removeEventListener("keydown",R),!r.value&&!c.value&&!u.value&&!p.value&&(document.body.classList.remove("modal-open"),document.body.style.top="",w.value>0&&window.scrollTo({top:w.value,behavior:"instant"}))}),(H,O)=>r.value?(Vue.openBlock(),Vue.createBlock(Bi,{key:0,wallpaper:o.wallpaper,"is-open":o.isOpen,onClose:O[0]||(O[0]=P=>a("close"))},null,8,["wallpaper","is-open"])):c.value?(Vue.openBlock(),Vue.createBlock(Sl,{key:1,wallpaper:o.wallpaper,"is-open":o.isOpen,onClose:O[1]||(O[1]=P=>a("close"))},null,8,["wallpaper","is-open"])):u.value?(Vue.openBlock(),Vue.createBlock(tr,{key:2,wallpaper:o.wallpaper,"is-open":o.isOpen,onClose:O[2]||(O[2]=P=>a("close"))},null,8,["wallpaper","is-open"])):p.value?(Vue.openBlock(),Vue.createBlock(ai,{key:3,wallpaper:o.wallpaper,"is-open":o.isOpen,onClose:O[3]||(O[3]=P=>a("close"))},null,8,["wallpaper","is-open"])):(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{key:4,to:"body"},[Vue.createVNode(Vue.Transition,{name:"modal",onAfterLeave:F},{default:Vue.withCtx(()=>[z.value&&o.wallpaper?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:Vue.normalizeClass(["portrait-modal",{"is-device-mode":Vue.unref(s).isDeviceMode.value&&Vue.unref(n)}]),onClick:Vue.withModifiers(T,["self"])},[Vue.createElementVNode("div",{ref_key:"contentRef",ref:h,class:Vue.normalizeClass(["portrait-modal__content",{"is-device-mode":Vue.unref(s).isDeviceMode.value&&Vue.unref(n),"is-avatar":m.value}])},[Vue.createVNode(Vue.Transition,{name:"fade"},{default:Vue.withCtx(()=>[Vue.unref(s).isDeviceMode.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("button",{key:0,class:"portrait-modal__close","aria-label":"å…³é—­",onClick:T},[...O[4]||(O[4]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])]))]),_:1}),Vue.createVNode(Vue.Transition,{name:"content-fade"},{default:Vue.withCtx(()=>[Vue.withDirectives(Vue.createVNode(ir,{ref_key:"contentRef",ref:h,src:o.wallpaper.url,alt:o.wallpaper.filename,"is-avatar":m.value,onLoad:v,onError:M},null,8,["src","alt","is-avatar"]),[[Vue.vShow,!Vue.unref(s).isDeviceMode.value]])]),_:1}),_.value?(Vue.openBlock(),Vue.createBlock(no,{key:0,visible:Vue.unref(s).isDeviceMode.value,"image-src":o.wallpaper.url,"image-alt":o.wallpaper.filename,onExit:y,onAfterEnter:I,onAfterLeave:L},null,8,["visible","image-src","image-alt"])):Vue.createCommentVNode("",!0),Vue.createVNode(Cr,{wallpaper:o.wallpaper,dimensions:f.value,"view-count":C.value,"download-count":x.value,"is-loading":!g.value,"is-downloading":V.value,"can-use-device-mode":_.value,"is-device-mode":Vue.unref(s).isDeviceMode.value,onDownload:A,onToggleDeviceMode:B},null,8,["wallpaper","dimensions","view-count","download-count","is-loading","is-downloading","can-use-device-mode","is-device-mode"])],2)],2)):Vue.createCommentVNode("",!0)]),_:1})]))}},Mr=ee(Br,[["__scopeId","data-v-8cc54537"]]);var xe,Re,ua,St,dt,xt,Ct,pt,we="transform",jt=we+"Origin",lo,ca=function(t){var e=t.ownerDocument||t;for(!(we in t.style)&&("msTransform"in t.style)&&(we="msTransform",jt=we+"Origin");e.parentNode&&(e=e.parentNode););if(Re=window,Ct=new Fe,e){xe=e,ua=e.documentElement,St=e.body,pt=xe.createElementNS("http://www.w3.org/2000/svg","g"),pt.style.transform="none";var a=e.createElement("div"),l=e.createElement("div"),n=e&&(e.body||e.firstElementChild);n&&n.appendChild&&(n.appendChild(a),a.appendChild(l),a.style.position="static",a.style.transform="translate3d(0,0,1px)",lo=l.offsetParent!==a,n.removeChild(a))}return e},Dr=function(t){for(var e,a;t&&t!==St;)a=t._gsap,a&&a.uncache&&a.get(t,"x"),a&&!a.scaleX&&!a.scaleY&&a.renderTransform&&(a.scaleX=a.scaleY=1e-4,a.renderTransform(1,a),e?e.push(a):e=[a]),t=t.parentNode;return e},io=[],ro=[],da=function(){return Re.pageYOffset||xe.scrollTop||ua.scrollTop||St.scrollTop||0},pa=function(){return Re.pageXOffset||xe.scrollLeft||ua.scrollLeft||St.scrollLeft||0},ma=function(t){return t.ownerSVGElement||((t.tagName+"").toLowerCase()==="svg"?t:null)},_r=function o(t){if(Re.getComputedStyle(t).position==="fixed")return!0;if(t=t.parentNode,t&&t.nodeType===1)return o(t)},It=function o(t,e){if(t.parentNode&&(xe||ca(t))){var a=ma(t),l=a?a.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",n=a?e?"rect":"g":"div",i=e!==2?0:100,s=e===3?100:0,d={position:"absolute",display:"block",pointerEvents:"none",margin:"0",padding:"0"},r=xe.createElementNS?xe.createElementNS(l.replace(/^https/,"http"),n):xe.createElement(n);return e&&(a?(xt||(xt=o(t)),r.setAttribute("width",.01),r.setAttribute("height",.01),r.setAttribute("transform","translate("+i+","+s+")"),r.setAttribute("fill","transparent"),xt.appendChild(r)):(dt||(dt=o(t),Object.assign(dt.style,d)),Object.assign(r.style,d,{width:"0.1px",height:"0.1px",top:s+"px",left:i+"px"}),dt.appendChild(r))),r}throw"Need document and parent."},Sr=function(t){for(var e=new Fe,a=0;a<t.numberOfItems;a++)e.multiply(t.getItem(a).matrix);return e},so=function(t){var e=t.getCTM(),a;return e||(a=t.style[we],t.style[we]="none",t.appendChild(pt),e=pt.getCTM(),t.removeChild(pt),a?t.style[we]=a:t.style.removeProperty(we.replace(/([A-Z])/g,"-$1").toLowerCase())),e||Ct.clone()},$r=function(t,e){var a=ma(t),l=t===a,n=a?io:ro,i=t.parentNode,s=i&&!a&&i.shadowRoot&&i.shadowRoot.appendChild?i.shadowRoot:i,d,r,c,u,p,h;if(t===Re)return t;if(n.length||n.push(It(t,1),It(t,2),It(t,3)),d=a?xt:dt,a)l?(c=so(t),u=-c.e/c.a,p=-c.f/c.d,r=Ct):t.getBBox?(c=t.getBBox(),r=t.transform?t.transform.baseVal:{},r=r.numberOfItems?r.numberOfItems>1?Sr(r):r.getItem(0).matrix:Ct,u=r.a*c.x+r.c*c.y,p=r.b*c.x+r.d*c.y):(r=new Fe,u=p=0),e&&t.tagName.toLowerCase()==="g"&&(u=p=0),(l||!t.getBoundingClientRect().width?a:i).appendChild(d),d.setAttribute("transform","matrix("+r.a+","+r.b+","+r.c+","+r.d+","+(r.e+u)+","+(r.f+p)+")");else{if(u=p=0,lo)for(r=t.offsetParent,c=t;c&&(c=c.parentNode)&&c!==r&&c.parentNode;)(Re.getComputedStyle(c)[we]+"").length>4&&(u=c.offsetLeft,p=c.offsetTop,c=0);if(h=Re.getComputedStyle(t),h.position!=="absolute"&&h.position!=="fixed")for(r=t.offsetParent;i&&i!==r;)u+=i.scrollLeft||0,p+=i.scrollTop||0,i=i.parentNode;c=d.style,c.top=t.offsetTop-p+"px",c.left=t.offsetLeft-u+"px",c[we]=h[we],c[jt]=h[jt],c.position=h.position==="fixed"?"fixed":"absolute",s.appendChild(d)}return d},At=function(t,e,a,l,n,i,s){return t.a=e,t.b=a,t.c=l,t.d=n,t.e=i,t.f=s,t},Fe=(function(){function o(e,a,l,n,i,s){e===void 0&&(e=1),a===void 0&&(a=0),l===void 0&&(l=0),n===void 0&&(n=1),i===void 0&&(i=0),s===void 0&&(s=0),At(this,e,a,l,n,i,s)}var t=o.prototype;return t.inverse=function(){var a=this.a,l=this.b,n=this.c,i=this.d,s=this.e,d=this.f,r=a*i-l*n||1e-10;return At(this,i/r,-l/r,-n/r,a/r,(n*d-i*s)/r,-(a*d-l*s)/r)},t.multiply=function(a){var l=this.a,n=this.b,i=this.c,s=this.d,d=this.e,r=this.f,c=a.a,u=a.c,p=a.b,h=a.d,f=a.e,g=a.f;return At(this,c*l+p*i,c*n+p*s,u*l+h*i,u*n+h*s,d+f*l+g*i,r+f*n+g*s)},t.clone=function(){return new o(this.a,this.b,this.c,this.d,this.e,this.f)},t.equals=function(a){var l=this.a,n=this.b,i=this.c,s=this.d,d=this.e,r=this.f;return l===a.a&&n===a.b&&i===a.c&&s===a.d&&d===a.e&&r===a.f},t.apply=function(a,l){l===void 0&&(l={});var n=a.x,i=a.y,s=this.a,d=this.b,r=this.c,c=this.d,u=this.e,p=this.f;return l.x=n*s+i*r+u||0,l.y=n*d+i*c+p||0,l},o})();function be(o,t,e,a){if(!o||!o.parentNode||(xe||ca(o)).documentElement===o)return new Fe;var l=Dr(o),n=ma(o),i=n?io:ro,s=$r(o,e),d=i[0].getBoundingClientRect(),r=i[1].getBoundingClientRect(),c=i[2].getBoundingClientRect(),u=s.parentNode,p=!a&&_r(o),h=new Fe((r.left-d.left)/100,(r.top-d.top)/100,(c.left-d.left)/100,(c.top-d.top)/100,d.left+(p?0:pa()),d.top+(p?0:da()));if(u.removeChild(s),l)for(d=l.length;d--;)r=l[d],r.scaleX=r.scaleY=0,r.renderTransform(1,r);return t?h.inverse():h}var Tr=1,nt,ue,K,mt,Me,Ce,qt,_a=function(t,e){return t.actions.forEach(function(a){return a.vars[e]&&a.vars[e](a)})},Gt={},Sa=180/Math.PI,Lr=Math.PI/180,Bt={},$a={},$t={},Va=function(t){return typeof t=="string"?t.split(" ").join("").split(","):t},zr=Va("onStart,onUpdate,onComplete,onReverseComplete,onInterrupt"),Tt=Va("transform,transformOrigin,width,height,position,top,left,opacity,zIndex,maxWidth,maxHeight,minWidth,minHeight"),Vt=function(t){return nt(t)[0]||void 0},Ke=function(t){return Math.round(t*1e4)/1e4||0},Rt=function(t,e,a){return t.forEach(function(l){return l.classList[a](e)})},Ta={zIndex:1,kill:1,simple:1,spin:1,clearProps:1,targets:1,toggleClass:1,onComplete:1,onUpdate:1,onInterrupt:1,onStart:1,delay:1,repeat:1,repeatDelay:1,yoyo:1,scale:1,fade:1,absolute:1,props:1,onEnter:1,onLeave:1,custom:1,paused:1,nested:1,prune:1,absoluteOnLeave:1},uo={zIndex:1,simple:1,clearProps:1,scale:1,absolute:1,fitChild:1,getVars:1,props:1},co=function(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()},Ze=function(t,e){var a={},l;for(l in t)e[l]||(a[l]=t[l]);return a},va={},po=function(t){var e=va[t]=Va(t);return $t[t]=e.concat(Tt),e},Or=function(t){var e=t._gsap||ue.core.getCache(t);return e.gmCache===ue.ticker.frame?e.gMatrix:(e.gmCache=ue.ticker.frame,e.gMatrix=be(t,!0,!1,!0))},Ir=function o(t,e,a){a===void 0&&(a=0);for(var l=t.parentNode,n=1e3*Math.pow(10,a)*(e?-1:1),i=e?-n*900:0;t;)i+=n,t=t.previousSibling;return l?i+o(l,e,a+1):i},Mt=function(t,e,a){return t.forEach(function(l){return l.d=Ir(a?l.element:l.t,e)}),t.sort(function(l,n){return l.d-n.d}),t},ht=function(t,e){for(var a=t.element.style,l=t.css=t.css||[],n=e.length,i,s;n--;)i=e[n],s=a[i]||a.getPropertyValue(i),l.push(s?i:$a[i]||($a[i]=co(i)),s);return a},Dt=function(t){var e=t.css,a=t.element.style,l=0;for(t.cache.uncache=1;l<e.length;l+=2)e[l+1]?a[e[l]]=e[l+1]:a.removeProperty(e[l]);!e[e.indexOf("transform")+1]&&a.translate&&(a.removeProperty("translate"),a.removeProperty("scale"),a.removeProperty("rotate"))},La=function(t,e){t.forEach(function(a){return a.a.cache.uncache=1}),e||t.finalStates.forEach(Dt)},Ft="paddingTop,paddingRight,paddingBottom,paddingLeft,gridArea,transition".split(","),ha=function(t,e,a){var l=t.element,n=t.width,i=t.height,s=t.uncache,d=t.getProp,r=l.style,c=4,u,p,h;if(typeof e!="object"&&(e=t),K&&a!==1)return K._abs.push({t:l,b:t,a:t,sd:0}),K._final.push(function(){return(t.cache.uncache=1)&&Dt(t)}),l;for(p=d("display")==="none",(!t.isVisible||p)&&(p&&(ht(t,["display"]).display=e.display),t.matrix=e.matrix,t.width=n=t.width||e.width,t.height=i=t.height||e.height),ht(t,Ft),h=window.getComputedStyle(l);c--;)r[Ft[c]]=h[Ft[c]];if(r.gridArea="1 / 1 / 1 / 1",r.transition="none",r.position="absolute",r.width=n+"px",r.height=i+"px",r.top||(r.top="0px"),r.left||(r.left="0px"),s)u=new Pe(l);else if(u=Ze(t,Bt),u.position="absolute",t.simple){var f=l.getBoundingClientRect();u.matrix=new Fe(1,0,0,1,f.left+pa(),f.top+da())}else u.matrix=be(l,!1,!1,!0);return u=tt(u,t,!0),t.x=Ce(u.x,.01),t.y=Ce(u.y,.01),l},za=function(t,e){return e!==!0&&(e=nt(e),t=t.filter(function(a){if(e.indexOf((a.sd<0?a.b:a.a).element)!==-1)return!0;a.t._gsap.renderTransform(1),a.b.isVisible&&(a.t.style.width=a.b.width+"px",a.t.style.height=a.b.height+"px")})),t},mo=function(t){return Mt(t,!0).forEach(function(e){return(e.a.isVisible||e.b.isVisible)&&ha(e.sd<0?e.b:e.a,e.b,1)})},Ar=function(t,e){return e&&t.idLookup[Qt(e).id]||t.elementStates[0]},Qt=function(t,e,a,l){return t instanceof Pe?t:t instanceof ye?Ar(t,l):new Pe(typeof t=="string"?Vt(t)||void 0:t,e,a)},Rr=function(t,e){for(var a=ue.getProperty(t.element,null,"native"),l=t.props={},n=e.length;n--;)l[e[n]]=(a(e[n])+"").trim();return l.zIndex&&(l.zIndex=parseFloat(l.zIndex)||0),t},Vo=function(t,e){var a=t.style||t,l;for(l in e)a[l]=e[l]},Fr=function(t){var e=t.getAttribute("data-flip-id");return e||t.setAttribute("data-flip-id",e="auto-"+Tr++),e},vo=function(t){return t.map(function(e){return e.element})},Oa=function(t,e,a){return t&&e.length&&a.add(t(vo(e),a,new ye(e,0,!0)),0)},tt=function(t,e,a,l,n,i){var s=t.element,d=t.cache,r=t.parent,c=t.x,u=t.y,p=e.width,h=e.height,f=e.scaleX,g=e.scaleY,V=e.rotation,w=e.bounds,x=i&&qt&&qt(s,"transform,width,height"),C=t,z=e.matrix,_=z.e,m=z.f,$=t.bounds.width!==w.width||t.bounds.height!==w.height||t.scaleX!==f||t.scaleY!==g||t.rotation!==V,T=!$&&t.simple&&e.simple&&!n,F,I,L,B,y,A,v;return T||!r?(f=g=1,V=F=0):(y=Or(r),A=y.clone().multiply(e.ctm?e.matrix.clone().multiply(e.ctm):e.matrix),V=Ke(Math.atan2(A.b,A.a)*Sa),F=Ke(Math.atan2(A.c,A.d)*Sa+V)%360,f=Math.sqrt(Math.pow(A.a,2)+Math.pow(A.b,2)),g=Math.sqrt(Math.pow(A.c,2)+Math.pow(A.d,2))*Math.cos(F*Lr),n&&(n=nt(n)[0],B=ue.getProperty(n),v=n.getBBox&&typeof n.getBBox=="function"&&n.getBBox(),C={scaleX:B("scaleX"),scaleY:B("scaleY"),width:v?v.width:Math.ceil(parseFloat(B("width","px"))),height:v?v.height:parseFloat(B("height","px"))}),d.rotation=V+"deg",d.skewX=F+"deg"),a?(f*=p===C.width||!C.width?1:p/C.width,g*=h===C.height||!C.height?1:h/C.height,d.scaleX=f,d.scaleY=g):(p=Ce(p*f/C.scaleX,0),h=Ce(h*g/C.scaleY,0),s.style.width=p+"px",s.style.height=h+"px"),l&&Vo(s,e.props),T||!r?(c+=_-t.matrix.e,u+=m-t.matrix.f):$||r!==e.parent?(d.x=c+"px",d.y=u+"px",d.renderTransform(1,d),A=be(n||s,!1,!1,!0),I=y.apply({x:A.e,y:A.f}),L=y.apply({x:_,y:m}),c+=L.x-I.x,u+=L.y-I.y):(y.e=y.f=0,L=y.apply({x:_-t.matrix.e,y:m-t.matrix.f}),c+=L.x,u+=L.y),c=Ce(c,.02),u=Ce(u,.02),i&&!(i instanceof Pe)?x&&x.revert():(d.x=c+"px",d.y=u+"px",d.renderTransform(1,d)),i&&(i.x=c,i.y=u,i.rotation=V,i.skewX=F,a?(i.scaleX=f,i.scaleY=g):(i.width=p,i.height=h)),i||d},Pt=function(t,e){return t instanceof ye?t:new ye(t,e)},ho=function(t,e,a){var l=t.idLookup[a],n=t.alt[a];return n.isVisible&&(!(e.getElementState(n.element)||n).isVisible||!l.isVisible)?n:l},Ht=[],Ut="width,height,overflowX,overflowY".split(","),yt,Ia=function(t){if(t!==yt){var e=Me.style,a=Me.clientWidth===window.outerWidth,l=Me.clientHeight===window.outerHeight,n=4;if(t&&(a||l)){for(;n--;)Ht[n]=e[Ut[n]];a&&(e.width=Me.clientWidth+"px",e.overflowY="hidden"),l&&(e.height=Me.clientHeight+"px",e.overflowX="hidden"),yt=t}else if(yt){for(;n--;)Ht[n]?e[Ut[n]]=Ht[n]:e.removeProperty(co(Ut[n]));yt=t}}},Aa=function(t,e){for(var a=0;a<t.length;a+=3)ue.set(t[a],{clearProps:!0}),t[a].setAttribute("style",t[a+e]),t[a]._gsap.gmCache=-1},Wt=function(t,e,a,l){t instanceof ye&&e instanceof ye,a=a||{};var n=a,i=n.clearProps,s=n.onEnter,d=n.onLeave,r=n.absolute,c=n.absoluteOnLeave,u=n.custom,p=n.delay,h=n.paused,f=n.repeat,g=n.repeatDelay,V=n.yoyo,w=n.toggleClass,x=n.nested,C=n.zIndex,z=n.scale,_=n.fade,m=n.stagger,$=n.spin,T=n.prune,F=("props"in a?a:t).props,I=Ze(a,Ta),L=ue.timeline({delay:p,paused:h,repeat:f,repeatDelay:g,yoyo:V,data:"isFlip"}),B=I,y=[],A=[],v=[],M=[],k=$===!0?1:$||0,R=typeof $=="function"?$:function(){return k},H=t.interrupted||e.interrupted,O=L[l!==1?"to":"from"],P,q,ce,ae,j,Y,ne,G,de,re,se,Ve,S,E;for(q in e.idLookup)se=e.alt[q]?ho(e,t,q):e.idLookup[q],j=se.element,re=t.idLookup[q],t.alt[q]&&j===re.element&&(t.alt[q].isVisible||!se.isVisible)&&(re=t.alt[q]),re?(Y={t:j,b:re,a:se,sd:re.element===j?0:se.isVisible?1:-1},v.push(Y),Y.sd&&(Y.sd<0&&(Y.b=se,Y.a=re),H&&ht(Y.b,F?$t[F]:Tt),_&&v.push(Y.swap={t:re.element,b:Y.b,a:Y.a,sd:-Y.sd,swap:Y})),j._flip=re.element._flip=K?K.timeline:L):se.isVisible&&(v.push({t:j,b:Ze(se,{isVisible:1}),a:se,sd:0,entering:1}),j._flip=K?K.timeline:L);if(F&&(va[F]||po(F)).forEach(function(b){return I[b]=function(N){return v[N].a.props[b]}}),v.finalStates=de=[],Ve=function(){Mt(v),Ia(!0);var N=[];for(ae=0;ae<v.length;ae++)Y=v[ae],S=Y.a,E=Y.b,T&&!S.isDifferent(E)&&!Y.entering?v.splice(ae--,1):(j=Y.t,x&&!(Y.sd<0)&&ae&&(S=Y.a=S.clone({matrix:be(j,!1,!1,!0)})),E.isVisible&&S.isVisible?(Y.sd<0?(x&&Aa(N,1),ne=new Pe(j,F,t.simple),tt(ne,S,z,0,0,ne),ne.matrix=be(j,!1,!1,!0),ne.bounds=j.getBoundingClientRect(),ne.css=Y.b.css,Y.a=S=ne,_&&(j.style.opacity=H?E.opacity:S.opacity),m&&M.push(j),x&&(Aa(N,2),N.push(j,j.getAttribute("style")))):Y.sd>0&&_&&(j.style.opacity=H?S.opacity-E.opacity:"0"),tt(S,E,z,F),x&&Y.sd<0&&N.push(j.getAttribute("style"))):E.isVisible!==S.isVisible&&(E.isVisible?S.isVisible||(E.css=S.css,A.push(E),v.splice(ae--,1),r&&x&&tt(S,E,z,F)):(S.isVisible&&y.push(S),v.splice(ae--,1))),z||(j.style.maxWidth=Math.max(S.width,E.width)+"px",j.style.maxHeight=Math.max(S.height,E.height)+"px",j.style.minWidth=Math.min(S.width,E.width)+"px",j.style.minHeight=Math.min(S.height,E.height)+"px"),x&&w&&j.classList.add(w)),de.push(S);var te;if(w&&(te=de.map(function(W){return W.element}),x&&te.forEach(function(W){return W.classList.remove(w)})),Ia(!1),z?(I.scaleX=function(W){return v[W].a.scaleX},I.scaleY=function(W){return v[W].a.scaleY}):(I.width=function(W){return v[W].a.width+"px"},I.height=function(W){return v[W].a.height+"px"},I.autoRound=a.autoRound||!1),I.x=function(W){return v[W].a.x+"px"},I.y=function(W){return v[W].a.y+"px"},I.rotation=function(W){return v[W].a.rotation+($?R(W,G[W],G)*360:0)},I.skewX=function(W){return v[W].a.skewX},G=v.map(function(W){return W.t}),(C||C===0)&&(I.modifiers={zIndex:function(){return C}},I.zIndex=C,I.immediateRender=a.immediateRender!==!1),_&&(I.opacity=function(W){return v[W].sd<0?0:v[W].sd>0?v[W].a.opacity:"+=0"}),M.length){m=ue.utils.distribute(m);var he=G.slice(M.length);I.stagger=function(W,it){return m(~M.indexOf(it)?G.indexOf(v[W].swap.t):W,it,he)}}if(zr.forEach(function(W){return a[W]&&L.eventCallback(W,a[W],a[W+"Params"])}),u&&G.length){B=Ze(I,Ta),"scale"in u&&(u.scaleX=u.scaleY=u.scale,delete u.scale);for(q in u)P=Ze(u[q],uo),P[q]=I[q],!("duration"in P)&&"duration"in I&&(P.duration=I.duration),P.stagger=I.stagger,O.call(L,G,P,0),delete B[q]}(G.length||A.length||y.length)&&(w&&L.add(function(){return Rt(te,w,L._zTime<0?"remove":"add")},0)&&!h&&Rt(te,w,"add"),G.length&&O.call(L,G,B,0)),Oa(s,y,L),Oa(d,A,L);var ke=K&&K.timeline;ke&&(ke.add(L,0),K._final.push(function(){return La(v,!i)})),ce=L.duration(),L.call(function(){var W=L.time()>=ce;W&&!ke&&La(v,!i),w&&Rt(te,w,W?"remove":"add")})},c&&(r=v.filter(function(b){return!b.sd&&!b.a.isVisible&&b.b.isVisible}).map(function(b){return b.a.element})),K){var U;r&&(U=K._abs).push.apply(U,za(v,r)),K._run.push(Ve)}else r&&mo(za(v,r)),Ve();var D=K?K.timeline:L;return D.revert=function(){return fa(D,1,1)},D},Pr=function o(t){t.vars.onInterrupt&&t.vars.onInterrupt.apply(t,t.vars.onInterruptParams||[]),t.getChildren(!0,!1,!0).forEach(o)},fa=function(t,e,a){if(t&&t.progress()<1&&(!t.paused()||a))return e&&(Pr(t),e<2&&t.progress(1),t.kill()),!0},kt=function(t){for(var e=t.idLookup={},a=t.alt={},l=t.elementStates,n=l.length,i;n--;)i=l[n],e[i.id]?a[i.id]=i:e[i.id]=i},ye=(function(){function o(e,a,l){if(this.props=a&&a.props,this.simple=!!(a&&a.simple),l)this.targets=vo(e),this.elementStates=e,kt(this);else{this.targets=nt(e);var n=a&&(a.kill===!1||a.batch&&!a.kill);K&&!n&&K._kill.push(this),this.update(n||!!K)}}var t=o.prototype;return t.update=function(a){var l=this;return this.elementStates=this.targets.map(function(n){return new Pe(n,l.props,l.simple)}),kt(this),this.interrupt(a),this.recordInlineStyles(),this},t.clear=function(){return this.targets.length=this.elementStates.length=0,kt(this),this},t.fit=function(a,l,n){for(var i=Mt(this.elementStates.slice(0),!1,!0),s=(a||this).idLookup,d=0,r,c;d<i.length;d++)r=i[d],n&&(r.matrix=be(r.element,!1,!1,!0)),c=s[r.id],c&&tt(r,c,l,!0,0,r),r.matrix=be(r.element,!1,!1,!0);return this},t.getProperty=function(a,l){var n=this.getElementState(a)||Bt;return(l in n?n:n.props||Bt)[l]},t.add=function(a){for(var l=a.targets.length,n=this.idLookup,i=this.alt,s,d,r;l--;)d=a.elementStates[l],r=n[d.id],r&&(d.element===r.element||i[d.id]&&i[d.id].element===d.element)?(s=this.elementStates.indexOf(d.element===r.element?r:i[d.id]),this.targets.splice(s,1,a.targets[l]),this.elementStates.splice(s,1,d)):(this.targets.push(a.targets[l]),this.elementStates.push(d));return a.interrupted&&(this.interrupted=!0),a.simple||(this.simple=!1),kt(this),this},t.compare=function(a){var l=a.idLookup,n=this.idLookup,i=[],s=[],d=[],r=[],c=[],u=a.alt,p=this.alt,h=function(T,F,I){return(T.isVisible!==F.isVisible?T.isVisible?d:r:T.isVisible?s:i).push(I)&&c.push(I)},f=function(T,F,I){return c.indexOf(I)<0&&h(T,F,I)},g,V,w,x,C,z,_,m;for(w in l)C=u[w],z=p[w],g=C?ho(a,this,w):l[w],x=g.element,V=n[w],z?(m=V.isVisible||!z.isVisible&&x===V.element?V:z,_=C&&!g.isVisible&&!C.isVisible&&m.element===C.element?C:g,_.isVisible&&m.isVisible&&_.element!==m.element?((_.isDifferent(m)?s:i).push(_.element,m.element),c.push(_.element,m.element)):h(_,m,_.element),C&&_.element===C.element&&(C=l[w]),f(_.element!==V.element&&C?C:_,V,V.element),f(C&&C.element===z.element?C:_,z,z.element),C&&f(C,z.element===C.element?z:V,C.element)):(V?V.isDifferent(g)?h(g,V,x):i.push(x):d.push(x),C&&f(C,V,C.element));for(w in n)l[w]||(r.push(n[w].element),p[w]&&r.push(p[w].element));return{changed:s,unchanged:i,enter:d,leave:r}},t.recordInlineStyles=function(){for(var a=$t[this.props]||Tt,l=this.elementStates.length;l--;)ht(this.elementStates[l],a)},t.interrupt=function(a){var l=this,n=[];this.targets.forEach(function(i){var s=i._flip,d=fa(s,a?0:1);a&&d&&n.indexOf(s)<0&&s.add(function(){return l.updateVisibility()}),d&&n.push(s)}),!a&&n.length&&this.updateVisibility(),this.interrupted||(this.interrupted=!!n.length)},t.updateVisibility=function(){this.elementStates.forEach(function(a){var l=a.element.getBoundingClientRect();a.isVisible=!!(l.width||l.height||l.top||l.left),a.uncache=1})},t.getElementState=function(a){return this.elementStates[this.targets.indexOf(Vt(a))]},t.makeAbsolute=function(){return Mt(this.elementStates.slice(0),!0,!0).map(ha)},o})(),Pe=(function(){function o(e,a,l){e instanceof o?Object.assign(this,e,a||{}):(this.element=e,this.update(a,l))}var t=o.prototype;return t.isDifferent=function(a){var l=this.bounds,n=a.bounds;return l.top!==n.top||l.left!==n.left||l.width!==n.width||l.height!==n.height||!this.matrix.equals(a.matrix)||this.opacity!==a.opacity||this.props&&a.props&&JSON.stringify(this.props)!==JSON.stringify(a.props)},t.clone=function(a){return new o(this,a)},t.update=function(a,l){var n=this,i=n.element,s=ue.getProperty(i),d=ue.core.getCache(i),r=i.getBoundingClientRect(),c=i.getBBox&&typeof i.getBBox=="function"&&i.nodeName.toLowerCase()!=="svg"&&i.getBBox(),u=l?new Fe(1,0,0,1,r.left+pa(),r.top+da()):be(i,!1,!1,!0);d.uncache=1,n.getProp=s,n.element=i,n.id=Fr(i),n.matrix=u,n.cache=d,n.bounds=r,n.isVisible=!!(r.width||r.height||r.left||r.top),n.display=s("display"),n.position=s("position"),n.parent=i.parentNode,n.x=s("x","px"),n.y=s("y","px"),n.scaleX=d.scaleX,n.scaleY=d.scaleY,n.rotation=s("rotation"),n.skewX=s("skewX"),n.opacity=s("opacity"),n.width=c?c.width:Ce(s("width","px"),.04),n.height=c?c.height:Ce(s("height","px"),.04),a&&Rr(n,va[a]||po(a)),n.ctm=i.getCTM&&i.nodeName.toLowerCase()==="svg"&&so(i).inverse(),n.simple=l||Ke(u.a)===1&&!Ke(u.b)&&!Ke(u.c)&&Ke(u.d)===1,n.uncache=0},o})(),Hr=(function(){function o(e,a){this.vars=e,this.batch=a,this.states=[],this.timeline=a.timeline}var t=o.prototype;return t.getStateById=function(a){for(var l=this.states.length;l--;)if(this.states[l].idLookup[a])return this.states[l]},t.kill=function(){this.batch.remove(this)},o})(),Ur=(function(){function o(e){this.id=e,this.actions=[],this._kill=[],this._final=[],this._abs=[],this._run=[],this.data={},this.state=new ye,this.timeline=ue.timeline()}var t=o.prototype;return t.add=function(a){var l=this.actions.filter(function(n){return n.vars===a});return l.length?l[0]:(l=new Hr(typeof a=="function"?{animate:a}:a,this),this.actions.push(l),l)},t.remove=function(a){var l=this.actions.indexOf(a);return l>=0&&this.actions.splice(l,1),this},t.getState=function(a){var l=this,n=K,i=mt;return K=this,this.state.clear(),this._kill.length=0,this.actions.forEach(function(s){s.vars.getState&&(s.states.length=0,mt=s,s.state=s.vars.getState(s)),a&&s.states.forEach(function(d){return l.state.add(d)})}),mt=i,K=n,this.killConflicts(),this},t.animate=function(){var a=this,l=K,n=this.timeline,i=this.actions.length,s,d;for(K=this,n.clear(),this._abs.length=this._final.length=this._run.length=0,this.actions.forEach(function(r){r.vars.animate&&r.vars.animate(r);var c=r.vars.onEnter,u=r.vars.onLeave,p=r.targets,h,f;p&&p.length&&(c||u)&&(h=new ye,r.states.forEach(function(g){return h.add(g)}),f=h.compare(Ae.getState(p)),f.enter.length&&c&&c(f.enter),f.leave.length&&u&&u(f.leave))}),mo(this._abs),this._run.forEach(function(r){return r()}),d=n.duration(),s=this._final.slice(0),n.add(function(){d<=n.time()&&(s.forEach(function(r){return r()}),_a(a,"onComplete"))}),K=l;i--;)this.actions[i].vars.once&&this.actions[i].kill();return _a(this,"onStart"),n.restart(),this},t.loadState=function(a){a||(a=function(){return 0});var l=[];return this.actions.forEach(function(n){if(n.vars.loadState){var i,s=function d(r){r&&(n.targets=r),i=l.indexOf(d),~i&&(l.splice(i,1),l.length||a())};l.push(s),n.vars.loadState(s)}}),l.length||a(),this},t.setState=function(){return this.actions.forEach(function(a){return a.targets=a.vars.setState&&a.vars.setState(a)}),this},t.killConflicts=function(a){return this.state.interrupt(a),this._kill.forEach(function(l){return l.interrupt(a)}),this},t.run=function(a,l){var n=this;return this!==K&&(a||this.getState(l),this.loadState(function(){n._killed||(n.setState(),n.animate())})),this},t.clear=function(a){this.state.clear(),a||(this.actions.length=0)},t.getStateById=function(a){for(var l=this.actions.length,n;l--;)if(n=this.actions[l].getStateById(a),n)return n;return this.state.idLookup[a]&&this.state},t.kill=function(){this._killed=1,this.clear(),delete Gt[this.id]},o})(),Ae=(function(){function o(){}return o.getState=function(e,a){var l=Pt(e,a);return mt&&mt.states.push(l),a&&a.batch&&o.batch(a.batch).state.add(l),l},o.from=function(e,a){return a=a||{},"clearProps"in a||(a.clearProps=!0),Wt(e,Pt(a.targets||e.targets,{props:a.props||e.props,simple:a.simple,kill:!!a.kill}),a,-1)},o.to=function(e,a){return Wt(e,Pt(a.targets||e.targets,{props:a.props||e.props,simple:a.simple,kill:!!a.kill}),a,1)},o.fromTo=function(e,a,l){return Wt(e,a,l)},o.fit=function(e,a,l){var n=l?Ze(l,uo):{},i=l||n,s=i.absolute,d=i.scale,r=i.getVars,c=i.props,u=i.runBackwards,p=i.onComplete,h=i.simple,f=l&&l.fitChild&&Vt(l.fitChild),g=Qt(a,c,h,e),V=Qt(e,0,h,g),w=c?$t[c]:Tt,x=ue.context();return c&&Vo(n,g.props),ht(V,w),u&&("immediateRender"in n||(n.immediateRender=!0),n.onComplete=function(){Dt(V),p&&p.apply(this,arguments)}),s&&ha(V,g),n=tt(V,g,d||f,!n.duration&&c,f,n.duration||r?n:0),typeof l=="object"&&"zIndex"in l&&(n.zIndex=l.zIndex),x&&!r&&x.add(function(){return function(){return Dt(V)}}),r?n:n.duration?ue.to(V.element,n):null},o.makeAbsolute=function(e,a){return(e instanceof ye?e:new ye(e,a)).makeAbsolute()},o.batch=function(e){return e||(e="default"),Gt[e]||(Gt[e]=new Ur(e))},o.killFlipsOf=function(e,a){(e instanceof ye?e.targets:nt(e)).forEach(function(l){return l&&fa(l._flip,a!==!1?1:2)})},o.isFlipping=function(e){var a=o.getByTarget(e);return!!a&&a.isActive()},o.getByTarget=function(e){return(Vt(e)||Bt)._flip},o.getElementState=function(e,a){return new Pe(Vt(e),a)},o.convertCoordinates=function(e,a,l){var n=be(a,!0,!0).multiply(be(e));return l?n.apply(l):n},o.register=function(e){if(Me=typeof document<"u"&&document.body,Me){ue=e,ca(Me),nt=ue.utils.toArray,qt=ue.core.getStyleSaver;var a=ue.utils.snap(.1);Ce=function(n,i){return a(parseFloat(n)+i)}}},o})();Ae.version="3.14.2";typeof window<"u"&&window.gsap&&window.gsap.registerPlugin(Ae);const Wr=["data-flip-id"],Yr={key:1,class:"image-skeleton"},Xr={key:2,class:"image-error"},jr=["src","alt","fetchpriority"],qr={key:3,class:"card-category-badge"},Gr={key:4,class:"card-bing-badge"},Qr={key:5,class:"card-overlay"},Kr={class:"card-info"},Zr=["title"],Jr={class:"card-bing-meta"},es={class:"bing-date"},ts=["title"],as=["title"],os={key:0,class:"highlight"},ns={key:1},ls={key:0,class:"card-category"},is={class:"card-meta"},rs={class:"meta-item"},ss={key:0,class:"meta-item meta-views"},us={key:1,class:"meta-item meta-downloads"},cs={class:"card-meta-secondary"},ds={class:"meta-item meta-time"},ps={class:"meta-item meta-format"},ms={__name:"WallpaperCard",props:{wallpaper:{type:Object,required:!0},index:{type:Number,default:0},searchQuery:{type:String,default:""},viewMode:{type:String,default:"grid"},aspectRatio:{type:String,default:"16/10"},popularRank:{type:Number,default:0},downloadCount:{type:Number,default:0},viewCount:{type:Number,default:0}},emits:["click","imageLoad"],setup(o,{emit:t}){const e=o,a=t,{isMobile:l}=lt(),n=Vue.ref(null),i=Vue.ref(null),s=Vue.ref(!1),d=Vue.ref(!1),r=Vue.ref(!1);let c=null,u=[];const p=Vue.computed(()=>r.value?`${wt.BASE_URL}?url=${encodeURIComponent(e.wallpaper.url)}&w=${wt.THUMB_WIDTH}&q=${wt.THUMB_QUALITY}&output=${wt.FORMAT}`:e.wallpaper.previewUrl||e.wallpaper.thumbnailUrl||e.wallpaper.url);Vue.onMounted(()=>{c=setTimeout(()=>{i.value&&i.value.complete&&i.value.naturalWidth>0&&(s.value=!0)},0)}),Vue.onUnmounted(()=>{c&&(clearTimeout(c),c=null),u.length>0&&(u.forEach(A=>Q.killTweensOf(A)),u=[]),n.value&&Q.killTweensOf(n.value)});const h=Vue.computed(()=>ze(e.wallpaper.size)),f=Vue.computed(()=>e.wallpaper.filename.split(".").pop()?.toUpperCase()||""),g=Vue.computed(()=>ra(e.wallpaper.createdAt)),V=Vue.computed(()=>Le(e.wallpaper.filename)),w=Vue.computed(()=>Ro(V.value,e.searchQuery)),x=Vue.computed(()=>{if(!e.wallpaper)return"";const{category:A,subcategory:v}=e.wallpaper;return A?v?`${A} / ${v}`:A:""}),C=Vue.computed(()=>e.wallpaper?.isBing===!0),z=Vue.computed(()=>e.wallpaper?.title||""),_=Vue.computed(()=>e.wallpaper?.date?Fo(e.wallpaper.date):""),m=Vue.computed(()=>{if(!e.wallpaper?.copyright)return"";const A=e.wallpaper.copyright,v=A.indexOf("(");return v>0?A.substring(0,v).trim():A}),$=Vue.computed(()=>e.viewMode==="masonry"?{}:{aspectRatio:e.aspectRatio.replace("/"," / ")}),T=Vue.computed(()=>{if(l.value)return{width:"100px",height:"100px",aspectRatio:"1 / 1"};const[A,v]=e.aspectRatio.split("/").map(Number);return{width:`${A/v>=1?200:120}px`,aspectRatio:e.aspectRatio.replace("/"," / ")}});function F(){s.value=!0,d.value=!1,a("imageLoad")}function I(){r.value?(d.value=!0,s.value=!0):(r.value=!0,s.value=!1)}function L(){a("click",e.wallpaper)}function B(A){if(l.value)return;const v=A.currentTarget,M=v.querySelector(".card-overlay"),k=v.querySelector(".card-image img");u=[v,M,k].filter(Boolean),Q.to(v,{y:-10,boxShadow:"0 20px 40px rgba(0,0,0,0.15)",duration:.3,ease:"power2.out"}),Q.to(M,{opacity:1,duration:.3}),k&&Q.to(k,{scale:1.1,duration:.4,ease:"power2.out"})}function y(A){if(l.value)return;const v=A.currentTarget,M=v.querySelector(".card-overlay"),k=v.querySelector(".card-image img");Q.to(v,{y:0,boxShadow:"0 4px 12px rgba(0,0,0,0.08)",duration:.3,ease:"power2.out",clearProps:"transform"}),Q.to(M,{opacity:0,duration:.3}),k&&Q.to(k,{scale:1,duration:.4,ease:"power2.out",clearProps:"transform"})}return(A,v)=>(Vue.openBlock(),Vue.createElementBlock("div",{ref_key:"cardRef",ref:n,class:Vue.normalizeClass(["wallpaper-card",`view-${o.viewMode}`]),"data-flip-id":o.wallpaper.id,onClick:L,onMouseenter:B,onMouseleave:y},[Vue.createElementVNode("div",{class:"card-image",style:Vue.normalizeStyle(o.viewMode==="list"?T.value:$.value)},[o.popularRank>0&&o.popularRank<=10?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:Vue.normalizeClass(["hot-badge",{"hot-badge--top3":o.popularRank<=3}])},[...v[0]||(v[0]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[Vue.createElementVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})],-1),Vue.createElementVNode("span",null,"ğŸ”¥ çƒ­é—¨",-1)])],2)):Vue.createCommentVNode("",!0),s.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",Yr,[...v[1]||(v[1]=[Vue.createElementVNode("div",{class:"skeleton-shimmer"},null,-1)])])),d.value&&s.value?(Vue.openBlock(),Vue.createElementBlock("div",Xr,[...v[2]||(v[2]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),Vue.createElementVNode("path",{d:"M12 8v4M12 16h.01"})],-1),Vue.createElementVNode("span",null,"åŠ è½½å¤±è´¥",-1)])])):Vue.createCommentVNode("",!0),Vue.createElementVNode("img",{ref_key:"imageRef",ref:i,src:p.value,alt:o.wallpaper.filename,width:"800",height:"600",loading:"lazy",fetchpriority:o.index<6?"high":"auto",class:Vue.normalizeClass({"is-loaded":s.value,"is-error":d.value}),onLoad:F,onError:I},null,42,jr),x.value&&(o.viewMode==="grid"||o.viewMode==="masonry")&&!C.value?(Vue.openBlock(),Vue.createElementBlock("div",qr,[v[3]||(v[3]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),Vue.createElementVNode("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(x.value),1)])):Vue.createCommentVNode("",!0),C.value&&(o.viewMode==="grid"||o.viewMode==="masonry")?(Vue.openBlock(),Vue.createElementBlock("div",Gr,[v[4]||(v[4]=Vue.createStaticVNode('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-aff14d58><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-aff14d58></rect><line x1="16" y1="2" x2="16" y2="6" data-v-aff14d58></line><line x1="8" y1="2" x2="8" y2="6" data-v-aff14d58></line><line x1="3" y1="10" x2="21" y2="10" data-v-aff14d58></line></svg>',1)),Vue.createElementVNode("span",null,Vue.toDisplayString(_.value),1)])):Vue.createCommentVNode("",!0),Vue.unref(l)?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",Qr,[...v[5]||(v[5]=[Vue.createStaticVNode('<div class="overlay-content" data-v-aff14d58><span class="overlay-icon" data-v-aff14d58><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-aff14d58><circle cx="11" cy="11" r="8" data-v-aff14d58></circle><path d="M21 21l-4.35-4.35" data-v-aff14d58></path><path d="M11 8v6M8 11h6" data-v-aff14d58></path></svg></span><span class="overlay-text" data-v-aff14d58>æŸ¥çœ‹å¤§å›¾</span></div>',1)])]))],4),Vue.createElementVNode("div",Kr,[C.value?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:0},[Vue.createElementVNode("p",{class:"card-filename card-bing-title",title:z.value},Vue.toDisplayString(z.value),9,Zr),Vue.createElementVNode("div",Jr,[Vue.createElementVNode("span",es,[v[6]||(v[6]=Vue.createStaticVNode('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-aff14d58><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-aff14d58></rect><line x1="16" y1="2" x2="16" y2="6" data-v-aff14d58></line><line x1="8" y1="2" x2="8" y2="6" data-v-aff14d58></line><line x1="3" y1="10" x2="21" y2="10" data-v-aff14d58></line></svg>',1)),Vue.createTextVNode(" "+Vue.toDisplayString(_.value),1)]),v[7]||(v[7]=Vue.createElementVNode("span",{class:"bing-resolution"},"4K",-1))]),m.value?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"card-bing-copyright",title:o.wallpaper.copyright},[v[8]||(v[8]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"10"}),Vue.createElementVNode("path",{d:"M14.83 14.83a4 4 0 1 1 0-5.66"})],-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(m.value),1)],8,ts)):Vue.createCommentVNode("",!0)],64)):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createElementVNode("p",{class:"card-filename",title:V.value},[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(w.value,(M,k)=>(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:k},[M.highlight?(Vue.openBlock(),Vue.createElementBlock("span",os,Vue.toDisplayString(M.text),1)):(Vue.openBlock(),Vue.createElementBlock("span",ns,Vue.toDisplayString(M.text),1))],64))),128))],8,as),x.value?(Vue.openBlock(),Vue.createElementBlock("div",ls,[v[9]||(v[9]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),Vue.createElementVNode("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(x.value),1)])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",is,[Vue.createElementVNode("span",rs,Vue.toDisplayString(h.value),1),o.viewCount>0?(Vue.openBlock(),Vue.createElementBlock("span",ss,[v[10]||(v[10]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(Vue.unref(Ca)(o.viewCount)),1)])):Vue.createCommentVNode("",!0),o.downloadCount>0?(Vue.openBlock(),Vue.createElementBlock("span",us,[v[11]||(v[11]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(Vue.unref(Ca)(o.downloadCount)),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",cs,[Vue.createElementVNode("span",ds,Vue.toDisplayString(g.value),1),Vue.createElementVNode("span",ps,Vue.toDisplayString(f.value),1)])],64))])],42,Wr))}},Vs=ee(ms,[["__scopeId","data-v-aff14d58"]]),vs={key:0,class:"loading-state"},hs={key:0,class:"mobile-loading-hint"},fs={class:"loading-text"},gs={key:0,class:"skeleton-info"},ws={key:1,class:"grid-empty series-empty"},ys={class:"empty-icon"},ks={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},Es={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},bs={key:2,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},Ns={key:3,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},xs={key:0,class:"empty-actions"},Cs=["onClick"],Bs={key:2,class:"grid-empty filter-empty"},Ms={key:0,class:"mobile-load-more"},Ds={class:"loading-more"},Et=20,_s={__name:"index",props:{wallpapers:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},searchQuery:{type:String,default:""},totalCount:{type:Number,default:0},hasFilters:{type:Boolean,default:!1},popularityData:{type:Array,default:()=>[]}},emits:["select","resetFilters"],setup(o,{emit:t}){const e=o,a=t;Q.registerPlugin(Ae);const l=VueRouter.useRouter(),{currentSeries:n,currentSeriesConfig:i,availableSeriesOptions:s}=$e(),{viewMode:d,setViewMode:r}=ao(),{isMobile:c,isMobileOrTablet:u}=lt();function p(D){if(!e.popularityData||e.popularityData.length===0)return 0;const b=e.popularityData.findIndex(N=>N.filename===D);return b!==-1?b+1:0}function h(D){return!e.popularityData||e.popularityData.length===0?0:e.popularityData.find(N=>N.filename===D)?.download_count||0}function f(D){return!e.popularityData||e.popularityData.length===0?0:e.popularityData.find(N=>N.filename===D)?.view_count||0}const g=Vue.ref(null),V=Vue.ref(null),w=Vue.ref(!1),x=Vue.ref(d.value),C=Vue.computed(()=>{if(u.value){const D=x.value;return D==="masonry"?"grid":D}return x.value}),z=Vue.ref(Et),_=Vue.ref(!1),m=Vue.ref(!1),$=new Set,T=Vue.computed(()=>e.wallpapers.slice(0,z.value)),F=Vue.computed(()=>z.value<e.wallpapers.length);function I(){if(m.value||_.value||!F.value)return;const D=window.scrollY||document.documentElement.scrollTop,b=window.innerHeight,N=document.documentElement.scrollHeight;D+b>=N-200&&L()}function L(){if(_.value||!F.value)return;_.value=!0;const D=setTimeout(()=>{$.delete(D);const b=Math.min(z.value+Et,e.wallpapers.length);z.value=b,_.value=!1},150);$.add(D)}function B(){m.value=!0}function y(){m.value=!1}const A=Vue.computed(()=>e.loading?"loading":e.wallpapers.length===0?e.hasFilters||e.searchQuery?"no-filter-results":"no-series-data":null),v=Vue.computed(()=>i.value?.name||"å£çº¸"),M=Vue.computed(()=>{const D=i.value?.aspectRatio||"16/10",[b,N]=D.split("/").map(Number);return b<N?"portrait":b===N?"square":"landscape"}),k=Vue.computed(()=>s.value.filter(D=>D.id!==n.value));function R(D){l.push(`/${D}`)}function H(){a("resetFilters")}const O=Vue.ref(!0),P=["grid","list"],q=["grid","masonry","list"];function ce(D){return(u.value?P:q).indexOf(D)}const ae=Vue.ref(0),j=Vue.ref(0),Y=Vue.ref(!1);function ne(D){u.value&&(ae.value=D.touches[0].clientX,j.value=D.touches[0].clientY,Y.value=!1)}function G(D){if(!u.value)return;const b=D.touches[0].clientX-ae.value,N=D.touches[0].clientY-j.value;Math.abs(b)>Math.abs(N)*1.5&&Math.abs(b)>30&&(Y.value=!0)}function de(D){if(!u.value||!Y.value)return;const b=D.changedTouches[0].clientX-ae.value,N=u.value?P:q;if(Math.abs(b)>80){const te=ce(d.value);let he;b<0?he=(te+1)%N.length:he=(te-1+N.length)%N.length,r(N[he])}Y.value=!1}const re=Vue.ref(!1);Vue.watch(d,async(D,b)=>{if(!(!g.value||D===b)){w.value&&Q.killTweensOf(".wallpaper-card"),w.value=!0,B();try{const N=g.value.querySelectorAll(".wallpaper-card");if(N.length===0){x.value=D,w.value=!1,y();return}if(V.value){const ke=V.value.offsetHeight;V.value.style.minHeight=`${ke}px`}const te=Ae.getState(N,{simple:!0});x.value=D,await Vue.nextTick();const he=u.value?{duration:.35,ease:"power2.out",stagger:{amount:.08,from:"start",grid:[2,"auto"]}}:{duration:.45,ease:"power2.inOut",stagger:{amount:.12,from:"start"}};Ae.from(te,{...he,absolute:!0,scale:!0,onComplete:()=>{w.value=!1,re.value=!0,y(),V.value&&(V.value.style.minHeight="")}})}catch{x.value=D,w.value=!1,y(),V.value&&(V.value.style.minHeight="")}}});function se(){if(re.value||!g.value)return;const D=g.value.querySelectorAll(".wallpaper-card");D.length>0&&(Ae.getState(D,{simple:!0}),re.value=!0)}function Ve(){g.value&&Vue.nextTick(()=>{const D=g.value?.querySelectorAll(".wallpaper-card");D&&D.length>0&&(u.value?(Q.set(D,{opacity:0,scale:.85,y:20}),Q.to(D,{opacity:1,scale:1,y:0,duration:.4,stagger:{amount:.35,from:"start",grid:[2,"auto"]},ease:"back.out(1.2)",onComplete:()=>{D.forEach(b=>{b.style.transform="",b.style.opacity=""})}})):(Q.set(D,{opacity:0,y:15}),Q.to(D,{opacity:1,y:0,duration:.3,stagger:{amount:.2,from:"start"},ease:"power2.out",onComplete:()=>{D.forEach(b=>{b.style.transform="",b.style.opacity=""}),se()}})))})}Vue.onMounted(()=>{if(window.addEventListener("scroll",I),g.value&&T.value.length>0)Ve();else{const D=setTimeout(()=>{$.delete(D),se()},500);$.add(D)}}),Vue.onUnmounted(()=>{if(window.removeEventListener("scroll",I),$.forEach(D=>clearTimeout(D)),$.clear(),Q.killTweensOf(".wallpaper-card"),g.value){const D=g.value.querySelectorAll(".wallpaper-card");D.length>0&&Q.killTweensOf(D)}});let S=!1;Vue.watch(()=>e.wallpapers,async(D,b)=>{if(S||b&&b.length>0&&D&&D.length>b.length&&b.length>=Et&&D[0]?.id===b[0]?.id)return;if(S=!0,z.value=Et,!b||b.length===0){O.value=!0,await Vue.nextTick(),D&&D.length>0?Ve():se(),S=!1;return}if(D===b||D?.length===b?.length&&D?.[0]?.id===b?.[0]?.id){S=!1;return}O.value=!1;const te=setTimeout(()=>{$.delete(te),O.value=!0,Vue.nextTick(()=>{Ve(),S=!1})},100);$.add(te)},{deep:!1});function E(D){a("select",D)}const U=Vue.computed(()=>c.value?6:12);return(D,b)=>(Vue.openBlock(),Vue.createElementBlock("div",{ref_key:"wrapperRef",ref:V,class:"wallpaper-grid-wrapper"},[o.loading?(Vue.openBlock(),Vue.createElementBlock("div",vs,[Vue.unref(u)?(Vue.openBlock(),Vue.createElementBlock("div",hs,[Vue.createVNode(ie,{size:"md"}),Vue.createElementVNode("p",fs," æ­£åœ¨åŠ è½½"+Vue.toDisplayString(v.value)+"... ",1)])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",{class:Vue.normalizeClass(["wallpaper-grid skeleton-grid",[`view-${C.value}`,`aspect-${M.value}`]])},[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(U.value,N=>(Vue.openBlock(),Vue.createElementBlock("div",{key:N,class:"skeleton-card"},[b[1]||(b[1]=Vue.createElementVNode("div",{class:"skeleton-image"},[Vue.createElementVNode("div",{class:"skeleton-shimmer"})],-1)),Vue.unref(u)?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",gs,[...b[0]||(b[0]=[Vue.createElementVNode("div",{class:"skeleton-title"},null,-1),Vue.createElementVNode("div",{class:"skeleton-meta"},null,-1)])]))]))),128))],2)])):A.value==="no-series-data"?(Vue.openBlock(),Vue.createElementBlock("div",ws,[Vue.createElementVNode("div",ys,[Vue.unref(n)==="desktop"?(Vue.openBlock(),Vue.createElementBlock("svg",ks,[...b[2]||(b[2]=[Vue.createElementVNode("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"},null,-1),Vue.createElementVNode("line",{x1:"8",y1:"21",x2:"16",y2:"21"},null,-1),Vue.createElementVNode("line",{x1:"12",y1:"17",x2:"12",y2:"21"},null,-1)])])):Vue.unref(n)==="mobile"?(Vue.openBlock(),Vue.createElementBlock("svg",Es,[...b[3]||(b[3]=[Vue.createElementVNode("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},null,-1),Vue.createElementVNode("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"},null,-1)])])):Vue.unref(n)==="avatar"?(Vue.openBlock(),Vue.createElementBlock("svg",bs,[...b[4]||(b[4]=[Vue.createElementVNode("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},null,-1),Vue.createElementVNode("circle",{cx:"12",cy:"7",r:"4"},null,-1)])])):(Vue.openBlock(),Vue.createElementBlock("svg",Ns,[...b[5]||(b[5]=[Vue.createElementVNode("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"},null,-1),Vue.createElementVNode("circle",{cx:"8.5",cy:"8.5",r:"1.5"},null,-1),Vue.createElementVNode("path",{d:"M21 15l-5-5L5 21"},null,-1)])]))]),Vue.createElementVNode("h3",null,"æš‚æ— "+Vue.toDisplayString(v.value),1),b[6]||(b[6]=Vue.createElementVNode("p",null,"è¯¥åˆ†ç±»æš‚æ—¶æ²¡æœ‰å†…å®¹ï¼Œæ•¬è¯·æœŸå¾…~",-1)),k.value.length>0?(Vue.openBlock(),Vue.createElementBlock("div",xs,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(k.value,N=>(Vue.openBlock(),Vue.createElementBlock("button",{key:N.id,class:"action-btn",onClick:te=>R(N.id)}," æŸ¥çœ‹"+Vue.toDisplayString(N.name),9,Cs))),128))])):Vue.createCommentVNode("",!0)])):A.value==="no-filter-results"?(Vue.openBlock(),Vue.createElementBlock("div",Bs,[b[7]||(b[7]=Vue.createStaticVNode('<div class="empty-icon" data-v-70a2683f><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-70a2683f><circle cx="11" cy="11" r="8" data-v-70a2683f></circle><path d="M21 21l-4.35-4.35" data-v-70a2683f></path><path d="M8 8l6 6M14 8l-6 6" data-v-70a2683f></path></svg></div><h3 data-v-70a2683f>æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å£çº¸</h3><p data-v-70a2683f>å°è¯•è°ƒæ•´æœç´¢æ¡ä»¶æˆ–ç­›é€‰å™¨</p>',3)),Vue.createElementVNode("div",{class:"empty-actions"},[Vue.createElementVNode("button",{class:"action-btn primary",onClick:H}," æ¸…é™¤ç­›é€‰æ¡ä»¶ ")])])):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:3},[Vue.createElementVNode("div",{ref_key:"gridRef",ref:g,class:Vue.normalizeClass(["wallpaper-grid",[`view-${C.value}`,`aspect-${M.value}`,{"is-hidden":!O.value,"is-animating":w.value}]]),onTouchstart:ne,onTouchmove:G,onTouchend:de},[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(T.value,(N,te)=>(Vue.openBlock(),Vue.createBlock(Vs,{key:N.id,wallpaper:N,index:te,"search-query":o.searchQuery,"view-mode":C.value,"aspect-ratio":Vue.unref(i)?.aspectRatio||"16/10","popular-rank":p(N.filename),"download-count":h(N.filename),"view-count":f(N.filename),onClick:E},null,8,["wallpaper","index","search-query","view-mode","aspect-ratio","popular-rank","download-count","view-count"]))),128))],34),_.value?(Vue.openBlock(),Vue.createElementBlock("div",Ms,[Vue.createElementVNode("div",Ds,[Vue.createVNode(ie,{size:"sm"}),b[8]||(b[8]=Vue.createElementVNode("span",null,"åŠ è½½ä¸­...",-1))])])):Vue.createCommentVNode("",!0)],64))],512))}},Ss=ee(_s,[["__scopeId","data-v-70a2683f"]]);function Ra(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable})),e.push.apply(e,a)}return e}function fo(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ra(Object(e),!0).forEach(function(a){zs(o,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):Ra(Object(e)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(e,a))})}return o}function $s(o,t){if(typeof o!="object"||!o)return o;var e=o[Symbol.toPrimitive];if(e!==void 0){var a=e.call(o,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}function go(o){var t=$s(o,"string");return typeof t=="symbol"?t:t+""}function Kt(o){"@babel/helpers - typeof";return Kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(o)}function Ts(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function Fa(o,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,go(a.key),a)}}function Ls(o,t,e){return t&&Fa(o.prototype,t),e&&Fa(o,e),Object.defineProperty(o,"prototype",{writable:!1}),o}function zs(o,t,e){return t=go(t),t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}function wo(o){return Os(o)||Is(o)||As(o)||Rs()}function Os(o){if(Array.isArray(o))return Zt(o)}function Is(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function As(o,t){if(o){if(typeof o=="string")return Zt(o,t);var e=Object.prototype.toString.call(o).slice(8,-1);if(e==="Object"&&o.constructor&&(e=o.constructor.name),e==="Map"||e==="Set")return Array.from(o);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Zt(o,t)}}function Zt(o,t){(t==null||t>o.length)&&(t=o.length);for(var e=0,a=new Array(t);e<t;e++)a[e]=o[e];return a}function Rs(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lt=typeof window<"u"&&typeof window.document<"u",Ne=Lt?window:{},ga=Lt&&Ne.document.documentElement?"ontouchstart"in Ne.document.documentElement:!1,wa=Lt?"PointerEvent"in Ne:!1,Z="cropper",ya="all",yo="crop",ko="move",Eo="zoom",Oe="e",Ie="w",Qe="s",Be="n",rt="ne",st="nw",ut="se",ct="sw",Jt="".concat(Z,"-crop"),Pa="".concat(Z,"-disabled"),me="".concat(Z,"-hidden"),Ha="".concat(Z,"-hide"),Fs="".concat(Z,"-invisible"),_t="".concat(Z,"-modal"),ea="".concat(Z,"-move"),ft="".concat(Z,"Action"),bt="".concat(Z,"Preview"),ka="crop",bo="move",No="none",ta="crop",aa="cropend",oa="cropmove",na="cropstart",Ua="dblclick",Ps=ga?"touchstart":"mousedown",Hs=ga?"touchmove":"mousemove",Us=ga?"touchend touchcancel":"mouseup",Wa=wa?"pointerdown":Ps,Ya=wa?"pointermove":Hs,Xa=wa?"pointerup pointercancel":Us,ja="ready",qa="resize",Ga="wheel",la="zoom",Qa="image/jpeg",Ws=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Ys=/^data:/,Xs=/^data:image\/jpeg;base64,/,js=/^img|canvas$/i,xo=200,Co=100,Ka={viewMode:0,dragMode:ka,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:xo,minContainerHeight:Co,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},qs='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Gs=Number.isNaN||Ne.isNaN;function X(o){return typeof o=="number"&&!Gs(o)}var Za=function(t){return t>0&&t<1/0};function Yt(o){return typeof o>"u"}function He(o){return Kt(o)==="object"&&o!==null}var Qs=Object.prototype.hasOwnProperty;function Je(o){if(!He(o))return!1;try{var t=o.constructor,e=t.prototype;return t&&e&&Qs.call(e,"isPrototypeOf")}catch{return!1}}function pe(o){return typeof o=="function"}var Ks=Array.prototype.slice;function Bo(o){return Array.from?Array.from(o):Ks.call(o)}function oe(o,t){return o&&pe(t)&&(Array.isArray(o)||X(o.length)?Bo(o).forEach(function(e,a){t.call(o,e,a,o)}):He(o)&&Object.keys(o).forEach(function(e){t.call(o,o[e],e,o)})),o}var J=Object.assign||function(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),l=1;l<e;l++)a[l-1]=arguments[l];return He(t)&&a.length>0&&a.forEach(function(n){He(n)&&Object.keys(n).forEach(function(i){t[i]=n[i]})}),t},Zs=/\.\d*(?:0|9){12}\d*$/;function at(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Zs.test(o)?Math.round(o*t)/t:o}var Js=/^width|height|left|top|marginLeft|marginTop$/;function De(o,t){var e=o.style;oe(t,function(a,l){Js.test(l)&&X(a)&&(a="".concat(a,"px")),e[l]=a})}function eu(o,t){return o.classList?o.classList.contains(t):o.className.indexOf(t)>-1}function le(o,t){if(t){if(X(o.length)){oe(o,function(a){le(a,t)});return}if(o.classList){o.classList.add(t);return}var e=o.className.trim();e?e.indexOf(t)<0&&(o.className="".concat(e," ").concat(t)):o.className=t}}function Ee(o,t){if(t){if(X(o.length)){oe(o,function(e){Ee(e,t)});return}if(o.classList){o.classList.remove(t);return}o.className.indexOf(t)>=0&&(o.className=o.className.replace(t,""))}}function et(o,t,e){if(t){if(X(o.length)){oe(o,function(a){et(a,t,e)});return}e?le(o,t):Ee(o,t)}}var tu=/([a-z\d])([A-Z])/g;function Ea(o){return o.replace(tu,"$1-$2").toLowerCase()}function ia(o,t){return He(o[t])?o[t]:o.dataset?o.dataset[t]:o.getAttribute("data-".concat(Ea(t)))}function gt(o,t,e){He(e)?o[t]=e:o.dataset?o.dataset[t]=e:o.setAttribute("data-".concat(Ea(t)),e)}function au(o,t){if(He(o[t]))try{delete o[t]}catch{o[t]=void 0}else if(o.dataset)try{delete o.dataset[t]}catch{o.dataset[t]=void 0}else o.removeAttribute("data-".concat(Ea(t)))}var Mo=/\s\s*/,Do=(function(){var o=!1;if(Lt){var t=!1,e=function(){},a=Object.defineProperty({},"once",{get:function(){return o=!0,t},set:function(n){t=n}});Ne.addEventListener("test",e,a),Ne.removeEventListener("test",e,a)}return o})();function ge(o,t,e){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=e;t.trim().split(Mo).forEach(function(n){if(!Do){var i=o.listeners;i&&i[n]&&i[n][e]&&(l=i[n][e],delete i[n][e],Object.keys(i[n]).length===0&&delete i[n],Object.keys(i).length===0&&delete o.listeners)}o.removeEventListener(n,l,a)})}function ve(o,t,e){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=e;t.trim().split(Mo).forEach(function(n){if(a.once&&!Do){var i=o.listeners,s=i===void 0?{}:i;l=function(){delete s[n][e],o.removeEventListener(n,l,a);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];e.apply(o,c)},s[n]||(s[n]={}),s[n][e]&&o.removeEventListener(n,s[n][e],a),s[n][e]=l,o.listeners=s}o.addEventListener(n,l,a)})}function ot(o,t,e){var a;return pe(Event)&&pe(CustomEvent)?a=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent"),a.initCustomEvent(t,!0,!0,e)),o.dispatchEvent(a)}function _o(o){var t=o.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Xt=Ne.location,ou=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Ja(o){var t=o.match(ou);return t!==null&&(t[1]!==Xt.protocol||t[2]!==Xt.hostname||t[3]!==Xt.port)}function eo(o){var t="timestamp=".concat(new Date().getTime());return o+(o.indexOf("?")===-1?"?":"&")+t}function vt(o){var t=o.rotate,e=o.scaleX,a=o.scaleY,l=o.translateX,n=o.translateY,i=[];X(l)&&l!==0&&i.push("translateX(".concat(l,"px)")),X(n)&&n!==0&&i.push("translateY(".concat(n,"px)")),X(t)&&t!==0&&i.push("rotate(".concat(t,"deg)")),X(e)&&e!==1&&i.push("scaleX(".concat(e,")")),X(a)&&a!==1&&i.push("scaleY(".concat(a,")"));var s=i.length?i.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function nu(o){var t=fo({},o),e=0;return oe(o,function(a,l){delete t[l],oe(t,function(n){var i=Math.abs(a.startX-n.startX),s=Math.abs(a.startY-n.startY),d=Math.abs(a.endX-n.endX),r=Math.abs(a.endY-n.endY),c=Math.sqrt(i*i+s*s),u=Math.sqrt(d*d+r*r),p=(u-c)/c;Math.abs(p)>Math.abs(e)&&(e=p)})}),e}function Nt(o,t){var e=o.pageX,a=o.pageY,l={endX:e,endY:a};return t?l:fo({startX:e,startY:a},l)}function lu(o){var t=0,e=0,a=0;return oe(o,function(l){var n=l.startX,i=l.startY;t+=n,e+=i,a+=1}),t/=a,e/=a,{pageX:t,pageY:e}}function _e(o){var t=o.aspectRatio,e=o.height,a=o.width,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",n=Za(a),i=Za(e);if(n&&i){var s=e*t;l==="contain"&&s>a||l==="cover"&&s<a?e=a/t:a=e*t}else n?e=a/t:i&&(a=e*t);return{width:a,height:e}}function iu(o){var t=o.width,e=o.height,a=o.degree;if(a=Math.abs(a)%180,a===90)return{width:e,height:t};var l=a%90*Math.PI/180,n=Math.sin(l),i=Math.cos(l),s=t*i+e*n,d=t*n+e*i;return a>90?{width:d,height:s}:{width:s,height:d}}function ru(o,t,e,a){var l=t.aspectRatio,n=t.naturalWidth,i=t.naturalHeight,s=t.rotate,d=s===void 0?0:s,r=t.scaleX,c=r===void 0?1:r,u=t.scaleY,p=u===void 0?1:u,h=e.aspectRatio,f=e.naturalWidth,g=e.naturalHeight,V=a.fillColor,w=V===void 0?"transparent":V,x=a.imageSmoothingEnabled,C=x===void 0?!0:x,z=a.imageSmoothingQuality,_=z===void 0?"low":z,m=a.maxWidth,$=m===void 0?1/0:m,T=a.maxHeight,F=T===void 0?1/0:T,I=a.minWidth,L=I===void 0?0:I,B=a.minHeight,y=B===void 0?0:B,A=document.createElement("canvas"),v=A.getContext("2d"),M=_e({aspectRatio:h,width:$,height:F}),k=_e({aspectRatio:h,width:L,height:y},"cover"),R=Math.min(M.width,Math.max(k.width,f)),H=Math.min(M.height,Math.max(k.height,g)),O=_e({aspectRatio:l,width:$,height:F}),P=_e({aspectRatio:l,width:L,height:y},"cover"),q=Math.min(O.width,Math.max(P.width,n)),ce=Math.min(O.height,Math.max(P.height,i)),ae=[-q/2,-ce/2,q,ce];return A.width=at(R),A.height=at(H),v.fillStyle=w,v.fillRect(0,0,R,H),v.save(),v.translate(R/2,H/2),v.rotate(d*Math.PI/180),v.scale(c,p),v.imageSmoothingEnabled=C,v.imageSmoothingQuality=_,v.drawImage.apply(v,[o].concat(wo(ae.map(function(j){return Math.floor(at(j))})))),v.restore(),A}var So=String.fromCharCode;function su(o,t,e){var a="";e+=t;for(var l=t;l<e;l+=1)a+=So(o.getUint8(l));return a}var uu=/^data:.*,/;function cu(o){var t=o.replace(uu,""),e=atob(t),a=new ArrayBuffer(e.length),l=new Uint8Array(a);return oe(l,function(n,i){l[i]=e.charCodeAt(i)}),a}function du(o,t){for(var e=[],a=8192,l=new Uint8Array(o);l.length>0;)e.push(So.apply(null,Bo(l.subarray(0,a)))),l=l.subarray(a);return"data:".concat(t,";base64,").concat(btoa(e.join("")))}function pu(o){var t=new DataView(o),e;try{var a,l,n;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var i=t.byteLength,s=2;s+1<i;){if(t.getUint8(s)===255&&t.getUint8(s+1)===225){l=s;break}s+=1}if(l){var d=l+4,r=l+10;if(su(t,d,4)==="Exif"){var c=t.getUint16(r);if(a=c===18761,(a||c===19789)&&t.getUint16(r+2,a)===42){var u=t.getUint32(r+4,a);u>=8&&(n=r+u)}}}if(n){var p=t.getUint16(n,a),h,f;for(f=0;f<p;f+=1)if(h=n+f*12+2,t.getUint16(h,a)===274){h+=8,e=t.getUint16(h,a),t.setUint16(h,1,a);break}}}catch{e=1}return e}function mu(o){var t=0,e=1,a=1;switch(o){case 2:e=-1;break;case 3:t=-180;break;case 4:a=-1;break;case 5:t=90,a=-1;break;case 6:t=90;break;case 7:t=90,e=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:e,scaleY:a}}var Vu={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,a=this.container,l=this.cropper,n=Number(e.minContainerWidth),i=Number(e.minContainerHeight);le(l,me),Ee(t,me);var s={width:Math.max(a.offsetWidth,n>=0?n:xo),height:Math.max(a.offsetHeight,i>=0?i:Co)};this.containerData=s,De(l,{width:s.width,height:s.height}),le(t,me),Ee(l,me)},initCanvas:function(){var t=this.containerData,e=this.imageData,a=this.options.viewMode,l=Math.abs(e.rotate)%180===90,n=l?e.naturalHeight:e.naturalWidth,i=l?e.naturalWidth:e.naturalHeight,s=n/i,d=t.width,r=t.height;t.height*s>t.width?a===3?d=t.height*s:r=t.width/s:a===3?r=t.width/s:d=t.height*s;var c={aspectRatio:s,naturalWidth:n,naturalHeight:i,width:d,height:r};this.canvasData=c,this.limited=a===1||a===2,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(t.width-c.width)/2,c.top=(t.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=J({},c)},limitCanvas:function(t,e){var a=this.options,l=this.containerData,n=this.canvasData,i=this.cropBoxData,s=a.viewMode,d=n.aspectRatio,r=this.cropped&&i;if(t){var c=Number(a.minCanvasWidth)||0,u=Number(a.minCanvasHeight)||0;s>1?(c=Math.max(c,l.width),u=Math.max(u,l.height),s===3&&(u*d>c?c=u*d:u=c/d)):s>0&&(c?c=Math.max(c,r?i.width:0):u?u=Math.max(u,r?i.height:0):r&&(c=i.width,u=i.height,u*d>c?c=u*d:u=c/d));var p=_e({aspectRatio:d,width:c,height:u});c=p.width,u=p.height,n.minWidth=c,n.minHeight=u,n.maxWidth=1/0,n.maxHeight=1/0}if(e)if(s>(r?0:1)){var h=l.width-n.width,f=l.height-n.height;n.minLeft=Math.min(0,h),n.minTop=Math.min(0,f),n.maxLeft=Math.max(0,h),n.maxTop=Math.max(0,f),r&&this.limited&&(n.minLeft=Math.min(i.left,i.left+(i.width-n.width)),n.minTop=Math.min(i.top,i.top+(i.height-n.height)),n.maxLeft=i.left,n.maxTop=i.top,s===2&&(n.width>=l.width&&(n.minLeft=Math.min(0,h),n.maxLeft=Math.max(0,h)),n.height>=l.height&&(n.minTop=Math.min(0,f),n.maxTop=Math.max(0,f))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=l.width,n.maxTop=l.height},renderCanvas:function(t,e){var a=this.canvasData,l=this.imageData;if(e){var n=iu({width:l.naturalWidth*Math.abs(l.scaleX||1),height:l.naturalHeight*Math.abs(l.scaleY||1),degree:l.rotate||0}),i=n.width,s=n.height,d=a.width*(i/a.naturalWidth),r=a.height*(s/a.naturalHeight);a.left-=(d-a.width)/2,a.top-=(r-a.height)/2,a.width=d,a.height=r,a.aspectRatio=i/s,a.naturalWidth=i,a.naturalHeight=s,this.limitCanvas(!0,!1)}(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCanvas(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,De(this.canvas,J({width:a.width,height:a.height},vt({translateX:a.left,translateY:a.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,a=this.imageData,l=a.naturalWidth*(e.width/e.naturalWidth),n=a.naturalHeight*(e.height/e.naturalHeight);J(a,{width:l,height:n,left:(e.width-l)/2,top:(e.height-n)/2}),De(this.image,J({width:a.width,height:a.height},vt(J({translateX:a.left,translateY:a.top},a)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,a=t.aspectRatio||t.initialAspectRatio,l=Number(t.autoCropArea)||.8,n={width:e.width,height:e.height};a&&(e.height*a>e.width?n.height=n.width/a:n.width=n.height*a),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*l),n.height=Math.max(n.minHeight,n.height*l),n.left=e.left+(e.width-n.width)/2,n.top=e.top+(e.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=J({},n)},limitCropBox:function(t,e){var a=this.options,l=this.containerData,n=this.canvasData,i=this.cropBoxData,s=this.limited,d=a.aspectRatio;if(t){var r=Number(a.minCropBoxWidth)||0,c=Number(a.minCropBoxHeight)||0,u=s?Math.min(l.width,n.width,n.width+n.left,l.width-n.left):l.width,p=s?Math.min(l.height,n.height,n.height+n.top,l.height-n.top):l.height;r=Math.min(r,l.width),c=Math.min(c,l.height),d&&(r&&c?c*d>r?c=r/d:r=c*d:r?c=r/d:c&&(r=c*d),p*d>u?p=u/d:u=p*d),i.minWidth=Math.min(r,u),i.minHeight=Math.min(c,p),i.maxWidth=u,i.maxHeight=p}e&&(s?(i.minLeft=Math.max(0,n.left),i.minTop=Math.max(0,n.top),i.maxLeft=Math.min(l.width,n.left+n.width)-i.width,i.maxTop=Math.min(l.height,n.top+n.height)-i.height):(i.minLeft=0,i.minTop=0,i.maxLeft=l.width-i.width,i.maxTop=l.height-i.height))},renderCropBox:function(){var t=this.options,e=this.containerData,a=this.cropBoxData;(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCropBox(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,t.movable&&t.cropBoxMovable&&gt(this.face,ft,a.width>=e.width&&a.height>=e.height?ko:ya),De(this.cropBox,J({width:a.width,height:a.height},vt({translateX:a.left,translateY:a.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ot(this.element,ta,this.getData())}},vu={initPreview:function(){var t=this.element,e=this.crossOrigin,a=this.options.preview,l=e?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",i=document.createElement("img");if(e&&(i.crossOrigin=e),i.src=l,i.alt=n,this.viewBox.appendChild(i),this.viewBoxImage=i,!!a){var s=a;typeof a=="string"?s=t.ownerDocument.querySelectorAll(a):a.querySelector&&(s=[a]),this.previews=s,oe(s,function(d){var r=document.createElement("img");gt(d,bt,{width:d.offsetWidth,height:d.offsetHeight,html:d.innerHTML}),e&&(r.crossOrigin=e),r.src=l,r.alt=n,r.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',d.innerHTML="",d.appendChild(r)})}},resetPreview:function(){oe(this.previews,function(t){var e=ia(t,bt);De(t,{width:e.width,height:e.height}),t.innerHTML=e.html,au(t,bt)})},preview:function(){var t=this.imageData,e=this.canvasData,a=this.cropBoxData,l=a.width,n=a.height,i=t.width,s=t.height,d=a.left-e.left-t.left,r=a.top-e.top-t.top;!this.cropped||this.disabled||(De(this.viewBoxImage,J({width:i,height:s},vt(J({translateX:-d,translateY:-r},t)))),oe(this.previews,function(c){var u=ia(c,bt),p=u.width,h=u.height,f=p,g=h,V=1;l&&(V=p/l,g=n*V),n&&g>h&&(V=h/n,f=l*V,g=h),De(c,{width:f,height:g}),De(c.getElementsByTagName("img")[0],J({width:i*V,height:s*V},vt(J({translateX:-d*V,translateY:-r*V},t))))}))}},hu={bind:function(){var t=this.element,e=this.options,a=this.cropper;pe(e.cropstart)&&ve(t,na,e.cropstart),pe(e.cropmove)&&ve(t,oa,e.cropmove),pe(e.cropend)&&ve(t,aa,e.cropend),pe(e.crop)&&ve(t,ta,e.crop),pe(e.zoom)&&ve(t,la,e.zoom),ve(a,Wa,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&ve(a,Ga,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&ve(a,Ua,this.onDblclick=this.dblclick.bind(this)),ve(t.ownerDocument,Ya,this.onCropMove=this.cropMove.bind(this)),ve(t.ownerDocument,Xa,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&ve(window,qa,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,a=this.cropper;pe(e.cropstart)&&ge(t,na,e.cropstart),pe(e.cropmove)&&ge(t,oa,e.cropmove),pe(e.cropend)&&ge(t,aa,e.cropend),pe(e.crop)&&ge(t,ta,e.crop),pe(e.zoom)&&ge(t,la,e.zoom),ge(a,Wa,this.onCropStart),e.zoomable&&e.zoomOnWheel&&ge(a,Ga,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&ge(a,Ua,this.onDblclick),ge(t.ownerDocument,Ya,this.onCropMove),ge(t.ownerDocument,Xa,this.onCropEnd),e.responsive&&ge(window,qa,this.onResize)}},fu={resize:function(){if(!this.disabled){var t=this.options,e=this.container,a=this.containerData,l=e.offsetWidth/a.width,n=e.offsetHeight/a.height,i=Math.abs(l-1)>Math.abs(n-1)?l:n;if(i!==1){var s,d;t.restore&&(s=this.getCanvasData(),d=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(oe(s,function(r,c){s[c]=r*i})),this.setCropBoxData(oe(d,function(r,c){d[c]=r*i})))}}},dblclick:function(){this.disabled||this.options.dragMode===No||this.setDragMode(eu(this.dragBox,Jt)?bo:ka)},wheel:function(t){var e=this,a=Number(this.options.wheelZoomRatio)||.1,l=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?l=t.deltaY>0?1:-1:t.wheelDelta?l=-t.wheelDelta/120:t.detail&&(l=t.detail>0?1:-1),this.zoom(-l*a,t)))},cropStart:function(t){var e=t.buttons,a=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(X(e)&&e!==1||X(a)&&a!==0||t.ctrlKey))){var l=this.options,n=this.pointers,i;t.changedTouches?oe(t.changedTouches,function(s){n[s.identifier]=Nt(s)}):n[t.pointerId||0]=Nt(t),Object.keys(n).length>1&&l.zoomable&&l.zoomOnTouch?i=Eo:i=ia(t.target,ft),Ws.test(i)&&ot(this.element,na,{originalEvent:t,action:i})!==!1&&(t.preventDefault(),this.action=i,this.cropping=!1,i===yo&&(this.cropping=!0,le(this.dragBox,_t)))}},cropMove:function(t){var e=this.action;if(!(this.disabled||!e)){var a=this.pointers;t.preventDefault(),ot(this.element,oa,{originalEvent:t,action:e})!==!1&&(t.changedTouches?oe(t.changedTouches,function(l){J(a[l.identifier]||{},Nt(l,!0))}):J(a[t.pointerId||0]||{},Nt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,a=this.pointers;t.changedTouches?oe(t.changedTouches,function(l){delete a[l.identifier]}):delete a[t.pointerId||0],e&&(t.preventDefault(),Object.keys(a).length||(this.action=""),this.cropping&&(this.cropping=!1,et(this.dragBox,_t,this.cropped&&this.options.modal)),ot(this.element,aa,{originalEvent:t,action:e}))}}},gu={change:function(t){var e=this.options,a=this.canvasData,l=this.containerData,n=this.cropBoxData,i=this.pointers,s=this.action,d=e.aspectRatio,r=n.left,c=n.top,u=n.width,p=n.height,h=r+u,f=c+p,g=0,V=0,w=l.width,x=l.height,C=!0,z;!d&&t.shiftKey&&(d=u&&p?u/p:1),this.limited&&(g=n.minLeft,V=n.minTop,w=g+Math.min(l.width,a.width,a.left+a.width),x=V+Math.min(l.height,a.height,a.top+a.height));var _=i[Object.keys(i)[0]],m={x:_.endX-_.startX,y:_.endY-_.startY},$=function(F){switch(F){case Oe:h+m.x>w&&(m.x=w-h);break;case Ie:r+m.x<g&&(m.x=g-r);break;case Be:c+m.y<V&&(m.y=V-c);break;case Qe:f+m.y>x&&(m.y=x-f);break}};switch(s){case ya:r+=m.x,c+=m.y;break;case Oe:if(m.x>=0&&(h>=w||d&&(c<=V||f>=x))){C=!1;break}$(Oe),u+=m.x,u<0&&(s=Ie,u=-u,r-=u),d&&(p=u/d,c+=(n.height-p)/2);break;case Be:if(m.y<=0&&(c<=V||d&&(r<=g||h>=w))){C=!1;break}$(Be),p-=m.y,c+=m.y,p<0&&(s=Qe,p=-p,c-=p),d&&(u=p*d,r+=(n.width-u)/2);break;case Ie:if(m.x<=0&&(r<=g||d&&(c<=V||f>=x))){C=!1;break}$(Ie),u-=m.x,r+=m.x,u<0&&(s=Oe,u=-u,r-=u),d&&(p=u/d,c+=(n.height-p)/2);break;case Qe:if(m.y>=0&&(f>=x||d&&(r<=g||h>=w))){C=!1;break}$(Qe),p+=m.y,p<0&&(s=Be,p=-p,c-=p),d&&(u=p*d,r+=(n.width-u)/2);break;case rt:if(d){if(m.y<=0&&(c<=V||h>=w)){C=!1;break}$(Be),p-=m.y,c+=m.y,u=p*d}else $(Be),$(Oe),m.x>=0?h<w?u+=m.x:m.y<=0&&c<=V&&(C=!1):u+=m.x,m.y<=0?c>V&&(p-=m.y,c+=m.y):(p-=m.y,c+=m.y);u<0&&p<0?(s=ct,p=-p,u=-u,c-=p,r-=u):u<0?(s=st,u=-u,r-=u):p<0&&(s=ut,p=-p,c-=p);break;case st:if(d){if(m.y<=0&&(c<=V||r<=g)){C=!1;break}$(Be),p-=m.y,c+=m.y,u=p*d,r+=n.width-u}else $(Be),$(Ie),m.x<=0?r>g?(u-=m.x,r+=m.x):m.y<=0&&c<=V&&(C=!1):(u-=m.x,r+=m.x),m.y<=0?c>V&&(p-=m.y,c+=m.y):(p-=m.y,c+=m.y);u<0&&p<0?(s=ut,p=-p,u=-u,c-=p,r-=u):u<0?(s=rt,u=-u,r-=u):p<0&&(s=ct,p=-p,c-=p);break;case ct:if(d){if(m.x<=0&&(r<=g||f>=x)){C=!1;break}$(Ie),u-=m.x,r+=m.x,p=u/d}else $(Qe),$(Ie),m.x<=0?r>g?(u-=m.x,r+=m.x):m.y>=0&&f>=x&&(C=!1):(u-=m.x,r+=m.x),m.y>=0?f<x&&(p+=m.y):p+=m.y;u<0&&p<0?(s=rt,p=-p,u=-u,c-=p,r-=u):u<0?(s=ut,u=-u,r-=u):p<0&&(s=st,p=-p,c-=p);break;case ut:if(d){if(m.x>=0&&(h>=w||f>=x)){C=!1;break}$(Oe),u+=m.x,p=u/d}else $(Qe),$(Oe),m.x>=0?h<w?u+=m.x:m.y>=0&&f>=x&&(C=!1):u+=m.x,m.y>=0?f<x&&(p+=m.y):p+=m.y;u<0&&p<0?(s=st,p=-p,u=-u,c-=p,r-=u):u<0?(s=ct,u=-u,r-=u):p<0&&(s=rt,p=-p,c-=p);break;case ko:this.move(m.x,m.y),C=!1;break;case Eo:this.zoom(nu(i),t),C=!1;break;case yo:if(!m.x||!m.y){C=!1;break}z=_o(this.cropper),r=_.startX-z.left,c=_.startY-z.top,u=n.minWidth,p=n.minHeight,m.x>0?s=m.y>0?ut:rt:m.x<0&&(r-=u,s=m.y>0?ct:st),m.y<0&&(c-=p),this.cropped||(Ee(this.cropBox,me),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}C&&(n.width=u,n.height=p,n.left=r,n.top=c,this.action=s,this.renderCropBox()),oe(i,function(T){T.startX=T.endX,T.startY=T.endY})}},wu={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&le(this.dragBox,_t),Ee(this.cropBox,me),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=J({},this.initialImageData),this.canvasData=J({},this.initialCanvasData),this.cropBoxData=J({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(J(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Ee(this.dragBox,_t),le(this.cropBox,me)),this},replace:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,oe(this.previews,function(a){a.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Ee(this.cropper,Pa)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,le(this.cropper,Pa)),this},destroy:function(){var t=this.element;return t[Z]?(t[Z]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,a=this.canvasData,l=a.left,n=a.top;return this.moveTo(Yt(t)?t:l+Number(t),Yt(e)?e:n+Number(e))},moveTo:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,a=this.canvasData,l=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(X(t)&&(a.left=t,l=!0),X(e)&&(a.top=e,l=!0),l&&this.renderCanvas(!0)),this},zoom:function(t,e){var a=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(a.width*t/a.naturalWidth,null,e)},zoomTo:function(t,e,a){var l=this.options,n=this.canvasData,i=n.width,s=n.height,d=n.naturalWidth,r=n.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&l.zoomable){var c=d*t,u=r*t;if(ot(this.element,la,{ratio:t,oldRatio:i/d,originalEvent:a})===!1)return this;if(a){var p=this.pointers,h=_o(this.cropper),f=p&&Object.keys(p).length?lu(p):{pageX:a.pageX,pageY:a.pageY};n.left-=(c-i)*((f.pageX-h.left-n.left)/i),n.top-=(u-s)*((f.pageY-h.top-n.top)/s)}else Je(e)&&X(e.x)&&X(e.y)?(n.left-=(c-i)*((e.x-n.left)/i),n.top-=(u-s)*((e.y-n.top)/s)):(n.left-=(c-i)/2,n.top-=(u-s)/2);n.width=c,n.height=u,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),X(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,X(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(X(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,a=this.imageData,l=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(X(t)&&(a.scaleX=t,l=!0),X(e)&&(a.scaleY=e,l=!0),l&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.options,a=this.imageData,l=this.canvasData,n=this.cropBoxData,i;if(this.ready&&this.cropped){i={x:n.left-l.left,y:n.top-l.top,width:n.width,height:n.height};var s=a.width/a.naturalWidth;if(oe(i,function(c,u){i[u]=c/s}),t){var d=Math.round(i.y+i.height),r=Math.round(i.x+i.width);i.x=Math.round(i.x),i.y=Math.round(i.y),i.width=r-i.x,i.height=d-i.y}}else i={x:0,y:0,width:0,height:0};return e.rotatable&&(i.rotate=a.rotate||0),e.scalable&&(i.scaleX=a.scaleX||1,i.scaleY=a.scaleY||1),i},setData:function(t){var e=this.options,a=this.imageData,l=this.canvasData,n={};if(this.ready&&!this.disabled&&Je(t)){var i=!1;e.rotatable&&X(t.rotate)&&t.rotate!==a.rotate&&(a.rotate=t.rotate,i=!0),e.scalable&&(X(t.scaleX)&&t.scaleX!==a.scaleX&&(a.scaleX=t.scaleX,i=!0),X(t.scaleY)&&t.scaleY!==a.scaleY&&(a.scaleY=t.scaleY,i=!0)),i&&this.renderCanvas(!0,!0);var s=a.width/a.naturalWidth;X(t.x)&&(n.left=t.x*s+l.left),X(t.y)&&(n.top=t.y*s+l.top),X(t.width)&&(n.width=t.width*s),X(t.height)&&(n.height=t.height*s),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?J({},this.containerData):{}},getImageData:function(){return this.sized?J({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&oe(["left","top","width","height","naturalWidth","naturalHeight"],function(a){e[a]=t[a]}),e},setCanvasData:function(t){var e=this.canvasData,a=e.aspectRatio;return this.ready&&!this.disabled&&Je(t)&&(X(t.left)&&(e.left=t.left),X(t.top)&&(e.top=t.top),X(t.width)?(e.width=t.width,e.height=t.width/a):X(t.height)&&(e.height=t.height,e.width=t.height*a),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,e;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(t){var e=this.cropBoxData,a=this.options.aspectRatio,l,n;return this.ready&&this.cropped&&!this.disabled&&Je(t)&&(X(t.left)&&(e.left=t.left),X(t.top)&&(e.top=t.top),X(t.width)&&t.width!==e.width&&(l=!0,e.width=t.width),X(t.height)&&t.height!==e.height&&(n=!0,e.height=t.height),a&&(l?e.height=e.width/a:n&&(e.width=e.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,a=ru(this.image,this.imageData,e,t);if(!this.cropped)return a;var l=this.getData(t.rounded),n=l.x,i=l.y,s=l.width,d=l.height,r=a.width/Math.floor(e.naturalWidth);r!==1&&(n*=r,i*=r,s*=r,d*=r);var c=s/d,u=_e({aspectRatio:c,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=_e({aspectRatio:c,width:t.minWidth||0,height:t.minHeight||0},"cover"),h=_e({aspectRatio:c,width:t.width||(r!==1?a.width:s),height:t.height||(r!==1?a.height:d)}),f=h.width,g=h.height;f=Math.min(u.width,Math.max(p.width,f)),g=Math.min(u.height,Math.max(p.height,g));var V=document.createElement("canvas"),w=V.getContext("2d");V.width=at(f),V.height=at(g),w.fillStyle=t.fillColor||"transparent",w.fillRect(0,0,f,g);var x=t.imageSmoothingEnabled,C=x===void 0?!0:x,z=t.imageSmoothingQuality;w.imageSmoothingEnabled=C,z&&(w.imageSmoothingQuality=z);var _=a.width,m=a.height,$=n,T=i,F,I,L,B,y,A;$<=-s||$>_?($=0,F=0,L=0,y=0):$<=0?(L=-$,$=0,F=Math.min(_,s+$),y=F):$<=_&&(L=0,F=Math.min(s,_-$),y=F),F<=0||T<=-d||T>m?(T=0,I=0,B=0,A=0):T<=0?(B=-T,T=0,I=Math.min(m,d+T),A=I):T<=m&&(B=0,I=Math.min(d,m-T),A=I);var v=[$,T,F,I];if(y>0&&A>0){var M=f/s;v.push(L*M,B*M,y*M,A*M)}return w.drawImage.apply(w,[a].concat(wo(v.map(function(k){return Math.floor(at(k))})))),V},setAspectRatio:function(t){var e=this.options;return!this.disabled&&!Yt(t)&&(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,a=this.dragBox,l=this.face;if(this.ready&&!this.disabled){var n=t===ka,i=e.movable&&t===bo;t=n||i?t:No,e.dragMode=t,gt(a,ft,t),et(a,Jt,n),et(a,ea,i),e.cropBoxMovable||(gt(l,ft,t),et(l,Jt,n),et(l,ea,i))}return this}},yu=Ne.Cropper,$o=(function(){function o(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ts(this,o),!t||!js.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=J({},Ka,Je(e)&&e),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Ls(o,[{key:"init",value:function(){var e=this.element,a=e.tagName.toLowerCase(),l;if(!e[Z]){if(e[Z]=this,a==="img"){if(this.isImg=!0,l=e.getAttribute("src")||"",this.originalUrl=l,!l)return;l=e.src}else a==="canvas"&&window.HTMLCanvasElement&&(l=e.toDataURL());this.load(l)}}},{key:"load",value:function(e){var a=this;if(e){this.url=e,this.imageData={};var l=this.element,n=this.options;if(!n.rotatable&&!n.scalable&&(n.checkOrientation=!1),!n.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Ys.test(e)){Xs.test(e)?this.read(cu(e)):this.clone();return}var i=new XMLHttpRequest,s=this.clone.bind(this);this.reloading=!0,this.xhr=i,i.onabort=s,i.onerror=s,i.ontimeout=s,i.onprogress=function(){i.getResponseHeader("content-type")!==Qa&&i.abort()},i.onload=function(){a.read(i.response)},i.onloadend=function(){a.reloading=!1,a.xhr=null},n.checkCrossOrigin&&Ja(e)&&l.crossOrigin&&(e=eo(e)),i.open("GET",e,!0),i.responseType="arraybuffer",i.withCredentials=l.crossOrigin==="use-credentials",i.send()}}},{key:"read",value:function(e){var a=this.options,l=this.imageData,n=pu(e),i=0,s=1,d=1;if(n>1){this.url=du(e,Qa);var r=mu(n);i=r.rotate,s=r.scaleX,d=r.scaleY}a.rotatable&&(l.rotate=i),a.scalable&&(l.scaleX=s,l.scaleY=d),this.clone()}},{key:"clone",value:function(){var e=this.element,a=this.url,l=e.crossOrigin,n=a;this.options.checkCrossOrigin&&Ja(a)&&(l||(l="anonymous"),n=eo(a)),this.crossOrigin=l,this.crossOriginUrl=n;var i=document.createElement("img");l&&(i.crossOrigin=l),i.src=n||a,i.alt=e.alt||"The image to crop",this.image=i,i.onload=this.start.bind(this),i.onerror=this.stop.bind(this),le(i,Ha),e.parentNode.insertBefore(i,e.nextSibling)}},{key:"start",value:function(){var e=this,a=this.image;a.onload=null,a.onerror=null,this.sizing=!0;var l=Ne.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Ne.navigator.userAgent),n=function(r,c){J(e.imageData,{naturalWidth:r,naturalHeight:c,aspectRatio:r/c}),e.initialImageData=J({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(a.naturalWidth&&!l){n(a.naturalWidth,a.naturalHeight);return}var i=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=i,i.onload=function(){n(i.width,i.height),l||s.removeChild(i)},i.src=a.src,l||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(i))}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var e=this.element,a=this.options,l=this.image,n=e.parentNode,i=document.createElement("div");i.innerHTML=qs;var s=i.querySelector(".".concat(Z,"-container")),d=s.querySelector(".".concat(Z,"-canvas")),r=s.querySelector(".".concat(Z,"-drag-box")),c=s.querySelector(".".concat(Z,"-crop-box")),u=c.querySelector(".".concat(Z,"-face"));this.container=n,this.cropper=s,this.canvas=d,this.dragBox=r,this.cropBox=c,this.viewBox=s.querySelector(".".concat(Z,"-view-box")),this.face=u,d.appendChild(l),le(e,me),n.insertBefore(s,e.nextSibling),Ee(l,Ha),this.initPreview(),this.bind(),a.initialAspectRatio=Math.max(0,a.initialAspectRatio)||NaN,a.aspectRatio=Math.max(0,a.aspectRatio)||NaN,a.viewMode=Math.max(0,Math.min(3,Math.round(a.viewMode)))||0,le(c,me),a.guides||le(c.getElementsByClassName("".concat(Z,"-dashed")),me),a.center||le(c.getElementsByClassName("".concat(Z,"-center")),me),a.background&&le(s,"".concat(Z,"-bg")),a.highlight||le(u,Fs),a.cropBoxMovable&&(le(u,ea),gt(u,ft,ya)),a.cropBoxResizable||(le(c.getElementsByClassName("".concat(Z,"-line")),me),le(c.getElementsByClassName("".concat(Z,"-point")),me)),this.render(),this.ready=!0,this.setDragMode(a.dragMode),a.autoCrop&&this.crop(),this.setData(a.data),pe(a.ready)&&ve(e,ja,a.ready,{once:!0}),ot(e,ja)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var e=this.cropper.parentNode;e&&e.removeChild(this.cropper),Ee(this.element,me)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=yu,o}},{key:"setDefaults",value:function(e){J(Ka,Je(e)&&e)}}])})();J($o.prototype,Vu,vu,hu,fu,gu,wu);const ku={class:"crop-main"},Eu={class:"crop-left"},bu={class:"crop-area"},Nu={key:0,class:"crop-size-badge"},xu={class:"size-dimensions"},Cu={class:"size-ratio"},Bu={key:1,class:"crop-loading"},Mu={key:2,class:"crop-error"},Du=["src"],_u={class:"preview-section"},Su={class:"preview-header"},$u={class:"preview-info"},Tu={class:"preview-size"},Lu=["disabled"],zu={class:"preview-canvas-wrapper"},Ou={class:"crop-panel"},Iu={class:"panel-section"},Au={class:"ratio-grid"},Ru=["onClick"],Fu={class:"ratio-name"},Pu={class:"ratio-desc"},Hu={key:0,class:"custom-input-card"},Uu={class:"custom-inputs"},Wu={class:"panel-section panel-section--tools"},Yu={class:"zoom-controls"},Xu={class:"zoom-slider"},ju={class:"zoom-track"},qu={class:"zoom-value"},Gu={class:"panel-section panel-section--output"},Qu={class:"option-toggle"},Ku={class:"panel-section panel-section--info"},Zu={class:"size-info"},Ju={class:"size-row"},ec={class:"size-value highlight"},tc={key:0,class:"size-row"},ac={class:"size-value"},oc={class:"panel-actions"},nc=["disabled"],lc={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ic=["src"],rc={__name:"ImageCropModal",props:{imageUrl:{type:String,required:!0},filename:{type:String,default:"cropped-wallpaper"},isOpen:{type:Boolean,default:!1},originalResolution:{type:Object,default:null}},emits:["close"],setup(o,{emit:t}){const e=o,a=t,l=Vue.ref(null),n=Vue.ref(null),i=Vue.ref(null),s=Vue.ref(null),d=Vue.ref(null),r=Vue.ref(!1),c=Vue.ref(!1),u=Vue.ref(!1),p=Vue.ref(!1),h=Vue.ref("auto"),f=Vue.ref({width:0,height:0}),g=Vue.ref(1),V=Vue.ref(1),w=Vue.ref(!1),x=Vue.ref(""),C=Vue.ref(!1),z=Vue.ref(!1),_=Vue.ref(""),m=Vue.ref(""),$=Vue.ref(null),T=Vue.ref(null),F=Vue.ref(""),I=Vue.ref({width:0,height:0}),L=Vue.ref({width:Math.round(window.screen.width*(window.devicePixelRatio||1)),height:Math.round(window.screen.height*(window.devicePixelRatio||1))}),B=Vue.computed(()=>[{id:"auto",name:"è‡ªåŠ¨é€‚é…",description:`${L.value.width}Ã—${L.value.height}`,ratio:L.value.width/L.value.height,highlight:!0},{id:"16:9",name:"16:9",description:"æ ‡å‡†å®½å±",ratio:16/9},{id:"21:9",name:"21:9",description:"å¸¦é±¼å±",ratio:21/9},{id:"16:10",name:"16:10",description:"MacBook",ratio:16/10},{id:"3:2",name:"3:2",description:"Surface",ratio:3/2},{id:"4:3",name:"4:3",description:"iPad",ratio:4/3},{id:"9:16",name:"9:16",description:"æ‰‹æœºæ ‡å‡†",ratio:9/16},{id:"9:19.5",name:"9:19.5",description:"iPhone",ratio:9/19.5},{id:"9:21",name:"9:21",description:"å®‰å“å…¨é¢å±",ratio:9/21},{id:"1:1",name:"1:1",description:"æ­£æ–¹å½¢",ratio:1},{id:"free",name:"è‡ªç”±",description:"ä»»æ„æ¯”ä¾‹",ratio:Number.NaN}]),y=Vue.computed(()=>B.value.find(S=>S.id===h.value)||B.value[0]),A=Vue.computed(()=>{if(h.value==="free"||h.value==="custom"){if(f.value.width>0&&f.value.height>0){const S=(b,N)=>N===0?b:S(N,b%N),E=S(f.value.width,f.value.height),U=Math.round(f.value.width/E),D=Math.round(f.value.height/E);return U>100||D>100?(f.value.width/f.value.height).toFixed(2):`${U}:${D}`}return"è‡ªç”±"}return y.value?.name||""}),v=Vue.computed(()=>F.value||e.imageUrl);function M(){if(!i.value||d.value)return;const S=y.value,E=Number.isNaN(S.ratio)?Number.NaN:S.ratio;d.value=new $o(i.value,{aspectRatio:E,viewMode:1,dragMode:"move",autoCropArea:1,restore:!1,guides:!0,center:!0,highlight:!1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!1,initialAspectRatio:E,minContainerWidth:200,minContainerHeight:200,checkCrossOrigin:!1,checkOrientation:!1,background:!1,responsive:!0,ready(){const U=d.value.getCanvasData(),D=d.value.getImageData();V.value=U.width/D.naturalWidth,g.value=1,H()},crop(U){f.value={width:Math.round(U.detail.width),height:Math.round(U.detail.height)},R()},zoom(U){V.value>0&&(g.value=U.detail.ratio/V.value),R()}})}function k(){d.value&&(d.value.destroy(),d.value=null)}function R(){T.value&&cancelAnimationFrame(T.value),T.value=requestAnimationFrame(()=>{H()})}function H(){if(!(!d.value||!s.value))try{const S=d.value.getCroppedCanvas({maxWidth:1200,maxHeight:800,imageSmoothingEnabled:!0,imageSmoothingQuality:"high"});if(S){const E=s.value.getContext("2d",{alpha:!1}),U=s.value.offsetWidth||800,D=s.value.offsetHeight||220,b=Math.min(U/S.width,D/S.height),N=S.width*b,te=S.height*b,he=(U-N)/2,ke=(D-te)/2,W=Math.min(window.devicePixelRatio||1,2),it=U*W,ba=D*W;(s.value.width!==it||s.value.height!==ba)&&(s.value.width=it,s.value.height=ba,s.value.style.width=`${U}px`,s.value.style.height=`${D}px`),E.setTransform(W,0,0,W,0,0),E.fillStyle="#0a0a12",E.fillRect(0,0,U,D),E.imageSmoothingEnabled=!0,E.imageSmoothingQuality="high",E.drawImage(S,he,ke,N,te)}}catch{}}function O(S){if(h.value===S)return;h.value=S,z.value=!1;const E=B.value.find(U=>U.id===S);if(d.value&&E){const U=Number.isNaN(E.ratio)?Number.NaN:E.ratio;d.value.setAspectRatio(U)}}function P(){const S=Number.parseInt(_.value),E=Number.parseInt(m.value);if(S>0&&E>0&&d.value){const U=S/E;d.value.setAspectRatio(U),h.value="custom"}}function q(S){if(!d.value)return;const E=S==="in"?.1:-.1;d.value.zoom(E)}function ce(){if(!d.value)return;d.value.reset();const S=d.value.getCanvasData(),E=d.value.getImageData();V.value=S.width/E.naturalWidth,g.value=1}async function ae(){if(!(!d.value||u.value)){u.value=!0;try{const S=d.value.getCroppedCanvas({maxWidth:4096,maxHeight:4096,imageSmoothingEnabled:!0,imageSmoothingQuality:"high"});S&&(x.value=S.toDataURL("image/png"),w.value=!0,await Vue.nextTick(),Q.fromTo(".immersive-preview",{opacity:0},{opacity:1,duration:.3,ease:"power2.out"}),Q.fromTo(".immersive-image",{scale:.9,opacity:0},{scale:1,opacity:1,duration:.4,ease:"back.out(1.2)",delay:.1}))}catch{}finally{u.value=!1}}}function j(){Q.to(".immersive-preview",{opacity:0,duration:.2,ease:"power2.in",onComplete:()=>{w.value=!1,x.value=""}})}function Y(){r.value=!0,i.value&&(I.value={width:i.value.naturalWidth,height:i.value.naturalHeight}),Vue.nextTick(()=>{M()})}function ne(){if(!F.value&&e.imageUrl){F.value=Po(e.imageUrl),c.value=!1,r.value=!1;return}c.value=!0,r.value=!0}async function G(){if(!(!d.value||u.value)){u.value=!0;try{const S={imageSmoothingEnabled:!0,imageSmoothingQuality:"high"};C.value?(S.maxWidth=16384,S.maxHeight=16384):(S.maxWidth=8192,S.maxHeight=8192);const E=d.value.getCroppedCanvas(S);if(!E)throw new Error("è£å‰ªå¤±è´¥");const U=await new Promise((te,he)=>{E.toBlob(ke=>{ke?te(ke):he(new Error("è½¬æ¢å¤±è´¥"))},"image/jpeg",.92)});zt("complete",{aspect_ratio:h.value,output_size:`${f.value.width}x${f.value.height}`}),p.value=!0;const D=URL.createObjectURL(U),b=document.createElement("a"),N=e.filename.replace(/\.[^.]+$/,"");b.href=D,b.download=`${N}_${f.value.width}x${f.value.height}.jpg`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(D),setTimeout(()=>de(),300)}catch{}finally{u.value=!1}}}function de(){!p.value&&r.value&&zt("cancel"),se(()=>{a("close")})}function re(){if(!l.value||!n.value)return;const S=Q.timeline();S.fromTo(l.value,{opacity:0},{opacity:1,duration:.3,ease:"power2.out"}),S.fromTo(n.value,{scale:.95,opacity:0},{scale:1,opacity:1,duration:.4,ease:"back.out(1.2)"},"-=0.15")}function se(S){if(!l.value||!n.value){S?.();return}const E=Q.timeline({onComplete:S});E.to(n.value,{scale:.95,opacity:0,duration:.25,ease:"power2.in"}),E.to(l.value,{opacity:0,duration:.2},"-=0.1")}Vue.watch(()=>e.isOpen,async S=>{S?(zt("open",{filename:e.filename}),r.value=!1,c.value=!1,p.value=!1,h.value="auto",g.value=1,V.value=1,C.value=!1,z.value=!1,_.value="",m.value="",await Vue.nextTick(),re()):(k(),$.value&&(clearTimeout($.value),$.value=null),T.value&&(cancelAnimationFrame(T.value),T.value=null),x.value&&(x.value=""),w.value=!1,F.value="",I.value={width:0,height:0})});function Ve(S){if(e.isOpen){if(w.value){(S.key==="Escape"||S.key===" ")&&(S.preventDefault(),j());return}S.key==="Escape"?de():S.key==="Enter"&&!u.value?G():S.key==="+"||S.key==="="?q("in"):S.key==="-"&&q("out")}}return Vue.onMounted(()=>{document.addEventListener("keydown",Ve)}),Vue.onUnmounted(()=>{document.removeEventListener("keydown",Ve),k(),$.value&&(clearTimeout($.value),$.value=null),T.value&&(cancelAnimationFrame(T.value),T.value=null),x.value&&(x.value=""),F.value="",I.value={width:0,height:0}}),(S,E)=>(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{to:"body"},[Vue.createVNode(Vue.Transition,{name:"crop-modal"},{default:Vue.withCtx(()=>[o.isOpen?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,ref_key:"modalRef",ref:l,class:"crop-modal-overlay",onClick:Vue.withModifiers(de,["self"])},[Vue.createElementVNode("div",{ref_key:"contentRef",ref:n,class:"crop-modal-content"},[Vue.createElementVNode("div",{class:"crop-header"},[Vue.createElementVNode("button",{class:"back-btn",onClick:de},[...E[6]||(E[6]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),Vue.createElementVNode("span",null,"è¿”å›",-1)])]),E[7]||(E[7]=Vue.createElementVNode("h2",{class:"crop-title"},[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M6 2v4M6 14v8M18 2v4M18 14v8M2 6h4M14 6h8M2 18h4M14 18h8"})]),Vue.createTextVNode(" æ™ºèƒ½è£å‰ª ")],-1)),E[8]||(E[8]=Vue.createElementVNode("div",{class:"header-spacer"},null,-1))]),Vue.createElementVNode("div",ku,[Vue.createElementVNode("div",Eu,[Vue.createElementVNode("div",bu,[f.value.width>0?(Vue.openBlock(),Vue.createElementBlock("div",Nu,[Vue.createElementVNode("span",xu,Vue.toDisplayString(f.value.width)+" Ã— "+Vue.toDisplayString(f.value.height),1),E[9]||(E[9]=Vue.createElementVNode("span",{class:"size-divider"},"|",-1)),Vue.createElementVNode("span",Cu,Vue.toDisplayString(A.value),1)])):Vue.createCommentVNode("",!0),r.value?c.value?(Vue.openBlock(),Vue.createElementBlock("div",Mu,[...E[12]||(E[12]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"10"}),Vue.createElementVNode("path",{d:"M12 8v4M12 16h.01"})],-1),Vue.createElementVNode("p",null,"åŸå›¾åŠ è½½å¤±è´¥",-1)])])):Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",Bu,[Vue.createVNode(ie,{size:"lg"}),E[10]||(E[10]=Vue.createElementVNode("p",null,"æ­£åœ¨åŠ è½½åŸå›¾...",-1)),E[11]||(E[11]=Vue.createElementVNode("p",{class:"loading-hint"}," åŸå›¾è¾ƒå¤§ï¼Œè¯·è€å¿ƒç­‰å¾… ",-1))])),Vue.withDirectives(Vue.createElementVNode("img",{ref_key:"imageRef",ref:i,src:v.value,class:"crop-image",crossorigin:"anonymous",onLoad:Y,onError:ne},null,40,Du),[[Vue.vShow,r.value&&!c.value]])]),Vue.createElementVNode("div",_u,[Vue.createElementVNode("div",Su,[E[14]||(E[14]=Vue.createElementVNode("h3",{class:"preview-title"},[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),Vue.createElementVNode("path",{d:"M8 21h8M12 17v4"})]),Vue.createTextVNode(" å®æ—¶é¢„è§ˆ ")],-1)),Vue.createElementVNode("div",$u,[Vue.createElementVNode("span",Tu,Vue.toDisplayString(f.value.width||"â€”")+" Ã— "+Vue.toDisplayString(f.value.height||"â€”"),1),Vue.createElementVNode("button",{class:"preview-fullscreen-btn",title:"æ²‰æµ¸é¢„è§ˆ",disabled:u.value||!r.value,onClick:ae},[...E[13]||(E[13]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})],-1),Vue.createElementVNode("span",null,"å…¨å±é¢„è§ˆ",-1)])],8,Lu)])]),Vue.createElementVNode("div",zu,[Vue.createElementVNode("canvas",{ref_key:"previewCanvasRef",ref:s,class:"preview-canvas"},null,512)])])]),Vue.createElementVNode("div",Ou,[Vue.createElementVNode("div",Iu,[E[17]||(E[17]=Vue.createElementVNode("h3",{class:"section-title"},[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),Vue.createElementVNode("path",{d:"M3 9h18M9 21V9"})]),Vue.createTextVNode(" æ¯”ä¾‹é¢„è®¾ ")],-1)),Vue.createElementVNode("div",Au,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(B.value,U=>(Vue.openBlock(),Vue.createElementBlock("button",{key:U.id,class:Vue.normalizeClass(["ratio-btn",{"ratio-btn--active":h.value===U.id,"ratio-btn--highlight":U.highlight}]),onClick:D=>O(U.id)},[Vue.createElementVNode("span",Fu,Vue.toDisplayString(U.name),1),Vue.createElementVNode("span",Pu,Vue.toDisplayString(U.description),1)],10,Ru))),128))]),Vue.createElementVNode("button",{class:Vue.normalizeClass(["custom-toggle",{"custom-toggle--active":z.value}]),onClick:E[0]||(E[0]=U=>z.value=!z.value)},[...E[15]||(E[15]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M12 5v14M5 12h14"})],-1),Vue.createElementVNode("span",null,"è‡ªå®šä¹‰æ¯”ä¾‹",-1)])],2),Vue.createVNode(Vue.Transition,{name:"slide-fade"},{default:Vue.withCtx(()=>[z.value?(Vue.openBlock(),Vue.createElementBlock("div",Hu,[Vue.createElementVNode("div",Uu,[Vue.withDirectives(Vue.createElementVNode("input",{"onUpdate:modelValue":E[1]||(E[1]=U=>_.value=U),type:"number",placeholder:"å®½",min:"1",onKeyup:Vue.withKeys(P,["enter"])},null,544),[[Vue.vModelText,_.value]]),E[16]||(E[16]=Vue.createElementVNode("span",{class:"input-divider"},":",-1)),Vue.withDirectives(Vue.createElementVNode("input",{"onUpdate:modelValue":E[2]||(E[2]=U=>m.value=U),type:"number",placeholder:"é«˜",min:"1",onKeyup:Vue.withKeys(P,["enter"])},null,544),[[Vue.vModelText,m.value]]),Vue.createElementVNode("button",{class:"apply-btn",onClick:P}," åº”ç”¨ ")])])):Vue.createCommentVNode("",!0)]),_:1})]),Vue.createElementVNode("div",Wu,[E[20]||(E[20]=Vue.createElementVNode("h3",{class:"section-title"},[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("circle",{cx:"11",cy:"11",r:"8"}),Vue.createElementVNode("path",{d:"M21 21l-4.35-4.35"})]),Vue.createTextVNode(" ç¼©æ”¾ ")],-1)),Vue.createElementVNode("div",Yu,[Vue.createElementVNode("button",{class:"zoom-btn",title:"ç¼©å° (-)",onClick:E[3]||(E[3]=U=>q("out"))},[...E[18]||(E[18]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("circle",{cx:"11",cy:"11",r:"8"}),Vue.createElementVNode("path",{d:"M21 21l-4.35-4.35M8 11h6"})],-1)])]),Vue.createElementVNode("div",Xu,[Vue.createElementVNode("div",ju,[Vue.createElementVNode("div",{class:"zoom-fill",style:Vue.normalizeStyle({width:`${Math.min(g.value*50,100)}%`})},null,4)]),Vue.createElementVNode("span",qu,Vue.toDisplayString(Math.round(g.value*100))+"%",1)]),Vue.createElementVNode("button",{class:"zoom-btn",title:"æ”¾å¤§ (+)",onClick:E[4]||(E[4]=U=>q("in"))},[...E[19]||(E[19]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("circle",{cx:"11",cy:"11",r:"8"}),Vue.createElementVNode("path",{d:"M21 21l-4.35-4.35M11 8v6M8 11h6"})],-1)])]),Vue.createElementVNode("button",{class:"zoom-reset-btn",onClick:ce}," é‡ç½® ")])]),Vue.createElementVNode("div",Gu,[E[23]||(E[23]=Vue.createElementVNode("h3",{class:"section-title"},[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})]),Vue.createTextVNode(" è¾“å‡ºé€‰é¡¹ ")],-1)),Vue.createElementVNode("label",Qu,[Vue.withDirectives(Vue.createElementVNode("input",{"onUpdate:modelValue":E[5]||(E[5]=U=>C.value=U),type:"checkbox"},null,512),[[Vue.vModelCheckbox,C.value]]),E[21]||(E[21]=Vue.createElementVNode("span",{class:"toggle-track"},[Vue.createElementVNode("span",{class:"toggle-thumb"})],-1)),E[22]||(E[22]=Vue.createElementVNode("span",{class:"toggle-label"},[Vue.createElementVNode("span",{class:"label-text"},"è¶…é«˜åˆ†è¾¨ç‡"),Vue.createElementVNode("span",{class:"label-hint"},"æœ€å¤§ 16Kï¼Œé€‚åˆå¤§å±æ˜¾ç¤ºå™¨")],-1))])]),Vue.createElementVNode("div",Ku,[Vue.createElementVNode("div",Zu,[Vue.createElementVNode("div",Ju,[E[24]||(E[24]=Vue.createElementVNode("span",{class:"size-label"},"è£å‰ªå°ºå¯¸",-1)),Vue.createElementVNode("span",ec,Vue.toDisplayString(f.value.width||"â€”")+" Ã— "+Vue.toDisplayString(f.value.height||"â€”"),1)]),o.originalResolution?(Vue.openBlock(),Vue.createElementBlock("div",tc,[E[25]||(E[25]=Vue.createElementVNode("span",{class:"size-label"},"åŸå›¾å°ºå¯¸",-1)),Vue.createElementVNode("span",ac,Vue.toDisplayString(o.originalResolution.width)+" Ã— "+Vue.toDisplayString(o.originalResolution.height),1)])):Vue.createCommentVNode("",!0)])]),Vue.createElementVNode("div",oc,[Vue.createElementVNode("button",{class:"action-btn action-btn--primary",disabled:!r.value||c.value||u.value,onClick:G},[u.value?(Vue.openBlock(),Vue.createBlock(ie,{key:0,size:"sm"})):(Vue.openBlock(),Vue.createElementBlock("svg",lc,[...E[26]||(E[26]=[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"},null,-1)])])),Vue.createElementVNode("span",null,Vue.toDisplayString(u.value?"å¤„ç†ä¸­...":"è£å‰ªä¸‹è½½"),1)],8,nc)])])])],512),Vue.createVNode(Vue.Transition,{name:"fade"},{default:Vue.withCtx(()=>[w.value?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"immersive-preview",onClick:j},[Vue.createElementVNode("img",{src:x.value,class:"immersive-image",alt:"é¢„è§ˆ"},null,8,ic),E[27]||(E[27]=Vue.createElementVNode("div",{class:"immersive-hint"}," ç‚¹å‡»ä»»æ„å¤„å…³é—­ / æŒ‰ ESC é€€å‡º ",-1))])):Vue.createCommentVNode("",!0)]),_:1})],512)):Vue.createCommentVNode("",!0)]),_:1})]))}},sc=ee(rc,[["__scopeId","data-v-15d6154f"]]),uc={class:"bing-title"},cc={class:"bing-date-row"},dc={class:"bing-date-badge"},pc={key:0,class:"bing-location"},mc={key:1,class:"bing-photographer"},Vc={key:2,class:"bing-links"},vc={__name:"BingWallpaperInfo",props:{wallpaper:{type:Object,required:!0},compact:{type:Boolean,default:!1}},setup(o){const t=o,e=Vue.computed(()=>t.wallpaper?.title||""),a=Vue.computed(()=>t.wallpaper?.date?Ho(t.wallpaper.date):""),l=Vue.computed(()=>t.wallpaper?.copyright||""),n=Vue.computed(()=>{const c=l.value;if(!c)return"";const u=c.match(/^([^(]+)\(Â©/);return u?u[1].trim():c.split("(Â©")[0].trim()}),i=Vue.computed(()=>{const c=l.value;if(!c)return"";const u=c.match(/\(Â©([^)]+)\)$/);return u?u[1].trim():""}),s=Vue.computed(()=>t.wallpaper?.copyrightlink||""),d=Vue.computed(()=>{const c=t.wallpaper?.quiz;return c?c.startsWith("http")?c:`https://cn.bing.com${c}`:""});function r(c){c&&window.open(c,"_blank","noopener,noreferrer")}return(c,u)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(["bing-info",{"bing-info--compact":o.compact}])},[Vue.createElementVNode("h3",uc,Vue.toDisplayString(e.value),1),Vue.createElementVNode("div",cc,[Vue.createElementVNode("span",dc,[u[2]||(u[2]=Vue.createStaticVNode('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-c3f41b15><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-c3f41b15></rect><line x1="16" y1="2" x2="16" y2="6" data-v-c3f41b15></line><line x1="8" y1="2" x2="8" y2="6" data-v-c3f41b15></line><line x1="3" y1="10" x2="21" y2="10" data-v-c3f41b15></line></svg>',1)),Vue.createTextVNode(" "+Vue.toDisplayString(a.value),1)]),u[3]||(u[3]=Vue.createElementVNode("span",{class:"bing-resolution-badge"},"4K UHD",-1))]),n.value?(Vue.openBlock(),Vue.createElementBlock("div",pc,[u[4]||(u[4]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),Vue.createElementVNode("circle",{cx:"12",cy:"10",r:"3"})],-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(n.value),1)])):Vue.createCommentVNode("",!0),i.value?(Vue.openBlock(),Vue.createElementBlock("div",mc,[u[5]||(u[5]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),Vue.createElementVNode("circle",{cx:"12",cy:"13",r:"4"})],-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(i.value),1)])):Vue.createCommentVNode("",!0),!o.compact&&(s.value||d.value)?(Vue.openBlock(),Vue.createElementBlock("div",Vc,[s.value?(Vue.openBlock(),Vue.createElementBlock("button",{key:0,class:"bing-link-btn bing-link-btn--search",onClick:u[0]||(u[0]=p=>r(s.value))},[...u[6]||(u[6]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("circle",{cx:"11",cy:"11",r:"8"}),Vue.createElementVNode("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1),Vue.createElementVNode("span",null,"äº†è§£æ›´å¤š",-1)])])):Vue.createCommentVNode("",!0),d.value?(Vue.openBlock(),Vue.createElementBlock("button",{key:1,class:"bing-link-btn bing-link-btn--quiz",onClick:u[1]||(u[1]=p=>r(d.value))},[...u[7]||(u[7]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"10"}),Vue.createElementVNode("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),Vue.createElementVNode("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1),Vue.createElementVNode("span",null,"æ¯æ—¥é—®ç­”",-1)])])):Vue.createCommentVNode("",!0)])):Vue.createCommentVNode("",!0)],2))}},hc=ee(vc,[["__scopeId","data-v-c3f41b15"]]),fc={class:"desktop-modal__content"},gc={class:"desktop-modal__preview"},wc={class:"screen-area"},yc={key:0,class:"loading-placeholder"},kc=["src"],Ec={class:"menu-bar"},bc={class:"menu-right"},Nc={class:"time"},xc={class:"desktop-modal__info"},Cc={class:"info-header"},Bc={class:"info-title"},Mc={key:0,class:"info-category"},Dc={key:1,class:"info-copyright"},_c={class:"info-tags"},Sc={key:0,class:"tag tag--secondary"},$c={key:1,class:"tag tag--bing"},Tc={key:2,class:"tag tag--view"},Lc={key:3,class:"tag tag--download"},zc={class:"info-details"},Oc={key:0,class:"detail-row"},Ic={class:"detail-value"},Ac={class:"detail-row"},Rc={class:"detail-label"},Fc={class:"detail-value"},Pc={class:"detail-sub"},Hc={key:1,class:"detail-row"},Uc={class:"detail-value"},Wc={key:0,class:"original-card"},Yc={class:"original-header"},Xc={class:"original-details"},jc={class:"original-item"},qc={class:"action-buttons"},Gc=["disabled"],Qc=["disabled"],Kc={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Zc={__name:"DesktopModal",props:{wallpaper:{type:Object,default:null},isOpen:{type:Boolean,default:!1}},emits:["close","openCrop"],setup(o,{emit:t}){const e=o,a=t,{currentSeries:l}=$e(),n=Te(),i=Vue.ref(!1),s=Vue.ref(!1),d=Vue.ref(!1),r=Vue.ref(!1),c=Vue.ref({width:0,height:0}),u=Vue.computed(()=>e.wallpaper?n.getDownloadCount(e.wallpaper.filename):0),p=Vue.computed(()=>e.wallpaper?n.getViewCount(e.wallpaper.filename):0),h=Vue.ref(!1),f=Vue.ref("");let g=null;function V(){const H=new Date,O=H.getMonth()+1,P=H.getDate(),ce=["å‘¨æ—¥","å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­"][H.getDay()],ae=String(H.getHours()).padStart(2,"0"),j=String(H.getMinutes()).padStart(2,"0"),Y=String(H.getSeconds()).padStart(2,"0");f.value=`${O}æœˆ${P}æ—¥ ${ce} ${ae}:${j}:${Y}`}const w=Vue.computed(()=>e.wallpaper?Le(e.wallpaper.filename):""),x=Vue.computed(()=>{if(!e.wallpaper?.category)return"";const{category:H,subcategory:O}=e.wallpaper;return O?`${H} / ${O}`:H}),C=Vue.computed(()=>e.wallpaper?.resolution?e.wallpaper.resolution:c.value.width>0?Se(c.value.width,c.value.height):{label:"åŠ è½½ä¸­",type:"secondary"}),z=Vue.computed(()=>e.wallpaper?Ue(e.wallpaper.filename).toUpperCase():""),_=Vue.computed(()=>e.wallpaper?ze(e.wallpaper.size):""),m=Vue.computed(()=>{if(!e.wallpaper)return"";const H=e.wallpaper.date||e.wallpaper.createdAt;return We(H)}),$=Vue.computed(()=>{if(!e.wallpaper)return"";const H=e.wallpaper.date||e.wallpaper.createdAt;return ra(H)}),T=Vue.computed(()=>e.wallpaper?.isBing===!0),F=Vue.computed(()=>e.wallpaper?.url?e.wallpaper.previewUrl||e.wallpaper.url:"");Vue.watch(()=>e.isOpen,async H=>{H&&e.wallpaper?I():!H&&i.value&&L()}),Vue.watch(()=>e.wallpaper,()=>{k()});function I(){Ye(e.wallpaper),qe(e.wallpaper,l.value),i.value=!0,V(),g&&clearInterval(g),g=setInterval(V,1e3)}function L(){i.value=!1,g&&(clearInterval(g),g=null)}function B(){a("close")}async function y(){if(!(!e.wallpaper||r.value)){r.value=!0;try{await Xe(e.wallpaper.url,e.wallpaper.filename),je(e.wallpaper,l.value),Ge(e.wallpaper,l.value)}finally{r.value=!1}}}function A(H){s.value=!0,c.value={width:H.target.naturalWidth,height:H.target.naturalHeight}}function v(){d.value=!0}function M(){a("openCrop")}function k(){s.value=!1,c.value={width:0,height:0}}function R(H){i.value&&H.key==="Escape"&&L()}return Vue.onMounted(()=>{document.addEventListener("keydown",R)}),Vue.onUnmounted(()=>{document.removeEventListener("keydown",R),g&&clearInterval(g)}),(H,O)=>(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{to:"body"},[Vue.createVNode(Vue.Transition,{name:"modal",onAfterLeave:B},{default:Vue.withCtx(()=>[i.value&&o.wallpaper?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"desktop-modal",onClick:Vue.withModifiers(L,["self"])},[Vue.createElementVNode("div",fc,[Vue.createElementVNode("button",{class:"desktop-modal__close","aria-label":"å…³é—­",onClick:L},[...O[2]||(O[2]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])]),Vue.createElementVNode("div",gc,[Vue.createElementVNode("div",{class:Vue.normalizeClass(["macbook-wrapper",{"is-hovered":h.value}]),onMouseenter:O[0]||(O[0]=P=>h.value=!0),onMouseleave:O[1]||(O[1]=P=>h.value=!1)},[Vue.createElementVNode("div",wc,[s.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",yc,[Vue.createVNode(ie,{size:"md"})])),Vue.createElementVNode("img",{src:F.value,alt:"å£çº¸é¢„è§ˆ",class:Vue.normalizeClass(["wallpaper-img",{loaded:s.value}]),onLoad:A},null,42,kc),Vue.createElementVNode("div",Ec,[O[7]||(O[7]=Vue.createElementVNode("div",{class:"menu-left"},[Vue.createElementVNode("span",{class:"apple-logo"}),Vue.createElementVNode("span",{class:"menu-item active"},"è®¿è¾¾"),Vue.createElementVNode("span",{class:"menu-item"},"æ–‡ä»¶"),Vue.createElementVNode("span",{class:"menu-item"},"ç¼–è¾‘"),Vue.createElementVNode("span",{class:"menu-item"},"æ˜¾ç¤º"),Vue.createElementVNode("span",{class:"menu-item"},"å‰å¾€"),Vue.createElementVNode("span",{class:"menu-item"},"çª—å£"),Vue.createElementVNode("span",{class:"menu-item"},"å¸®åŠ©")],-1)),Vue.createElementVNode("div",bc,[O[3]||(O[3]=Vue.createElementVNode("svg",{class:"menu-icon",viewBox:"0 0 24 24",fill:"currentColor"},[Vue.createElementVNode("path",{d:"M17.71 7.71L12 2h-1v7.59L6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 11 14.41V22h1l5.71-5.71-4.3-4.29 4.3-4.29zM13 5.83l1.88 1.88L13 9.59V5.83zm1.88 10.46L13 18.17v-3.76l1.88 1.88z"})],-1)),O[4]||(O[4]=Vue.createElementVNode("svg",{class:"menu-icon",viewBox:"0 0 24 24",fill:"currentColor"},[Vue.createElementVNode("path",{d:"M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z"})],-1)),O[5]||(O[5]=Vue.createElementVNode("svg",{class:"menu-icon",viewBox:"0 0 24 24",fill:"currentColor"},[Vue.createElementVNode("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14zM4 6h4v2H4zm0 3h4v2H4zm0 3h4v2H4z"})],-1)),O[6]||(O[6]=Vue.createElementVNode("svg",{class:"menu-icon",viewBox:"0 0 24 24",fill:"currentColor"},[Vue.createElementVNode("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"})],-1)),Vue.createElementVNode("span",Nc,Vue.toDisplayString(f.value),1)])])]),Vue.createElementVNode("img",{src:"https://dynamicwallpaper.club/landing-vids/mb3.png",alt:"MacBook Pro",class:"macbook-shell",onLoad:v},null,32)],34)]),Vue.createElementVNode("div",xc,[Vue.createElementVNode("div",Cc,[Vue.createElementVNode("h2",Bc,Vue.toDisplayString(T.value?o.wallpaper.title:w.value),1),x.value&&!T.value?(Vue.openBlock(),Vue.createElementBlock("p",Mc,[O[8]||(O[8]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),Vue.createElementVNode("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(x.value),1)])):Vue.createCommentVNode("",!0),T.value&&o.wallpaper.copyright?(Vue.openBlock(),Vue.createElementBlock("p",Dc,[O[9]||(O[9]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"10"}),Vue.createElementVNode("path",{d:"M14.83 14.83a4 4 0 1 1 0-5.66"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(o.wallpaper.copyright),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",_c,[Vue.createElementVNode("span",{class:Vue.normalizeClass(["tag",[`tag--${C.value.type||"success"}`]])},Vue.toDisplayString(C.value.label),3),T.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("span",Sc,Vue.toDisplayString(z.value),1)),T.value?(Vue.openBlock(),Vue.createElementBlock("span",$c,[...O[10]||(O[10]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),Vue.createElementVNode("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),Vue.createElementVNode("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),Vue.createElementVNode("line",{x1:"3",y1:"10",x2:"21",y2:"10"})],-1),Vue.createTextVNode(" æ¯æ—¥ Bing ",-1)])])):Vue.createCommentVNode("",!0),p.value>0?(Vue.openBlock(),Vue.createElementBlock("span",Tc,[O[11]||(O[11]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(p.value),1)])):Vue.createCommentVNode("",!0),u.value>0?(Vue.openBlock(),Vue.createElementBlock("span",Lc,[O[12]||(O[12]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(u.value),1)])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",zc,[!T.value&&_.value?(Vue.openBlock(),Vue.createElementBlock("div",Oc,[O[13]||(O[13]=Vue.createElementVNode("span",{class:"detail-label"},"æ–‡ä»¶å¤§å°",-1)),Vue.createElementVNode("span",Ic,Vue.toDisplayString(_.value),1)])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",Ac,[Vue.createElementVNode("span",Rc,Vue.toDisplayString(T.value?"å‘å¸ƒæ—¥æœŸ":"ä¸Šä¼ æ—¶é—´"),1),Vue.createElementVNode("span",Fc,[Vue.createTextVNode(Vue.toDisplayString(m.value)+" ",1),Vue.createElementVNode("span",Pc,"("+Vue.toDisplayString($.value)+")",1)])]),c.value.width>0?(Vue.openBlock(),Vue.createElementBlock("div",Hc,[O[14]||(O[14]=Vue.createElementVNode("span",{class:"detail-label"},"åˆ†è¾¨ç‡",-1)),Vue.createElementVNode("span",Uc,Vue.toDisplayString(c.value.width)+" Ã— "+Vue.toDisplayString(c.value.height),1)])):Vue.createCommentVNode("",!0)]),o.wallpaper.resolution&&!T.value?(Vue.openBlock(),Vue.createElementBlock("div",Wc,[Vue.createElementVNode("div",Yc,[O[15]||(O[15]=Vue.createElementVNode("span",{class:"original-label"},"åŸå›¾",-1)),Vue.createElementVNode("span",{class:Vue.normalizeClass(["original-tag",[`tag--${o.wallpaper.resolution.type||"success"}`]])},Vue.toDisplayString(o.wallpaper.resolution.label),3)]),Vue.createElementVNode("div",Xc,[Vue.createElementVNode("div",jc,[O[16]||(O[16]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),Vue.createElementVNode("path",{d:"M8 21h8M12 17v4"})],-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(o.wallpaper.resolution.width)+" Ã— "+Vue.toDisplayString(o.wallpaper.resolution.height),1)])]),O[17]||(O[17]=Vue.createElementVNode("p",{class:"original-hint"}," ä¸‹è½½è·å–å®Œæ•´é«˜æ¸…åŸå›¾ ",-1))])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",qc,[Vue.unref(l)==="desktop"?(Vue.openBlock(),Vue.createElementBlock("button",{key:0,class:"crop-btn",disabled:!s.value,onClick:M},[...O[18]||(O[18]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M6 2v4M6 14v8M18 2v4M18 14v8M2 6h4M14 6h8M2 18h4M14 18h8"})],-1),Vue.createElementVNode("span",null,"æ™ºèƒ½è£å‰ª",-1)])],8,Gc)):Vue.createCommentVNode("",!0),Vue.createElementVNode("button",{class:"download-btn",disabled:r.value,onClick:y},[r.value?(Vue.openBlock(),Vue.createBlock(ie,{key:0,size:"sm"})):(Vue.openBlock(),Vue.createElementBlock("svg",Kc,[...O[19]||(O[19]=[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"},null,-1)])])),Vue.createElementVNode("span",null,Vue.toDisplayString(r.value?"ä¸‹è½½ä¸­...":"ä¸‹è½½åŸå›¾"),1)],8,Qc)])])])])):Vue.createCommentVNode("",!0)]),_:1})]))}},Jc=ee(Zc,[["__scopeId","data-v-2057fb58"]]),ed={class:"modal-image-container"},td={key:0,class:"modal-loading"},ad={key:0,class:"loading-text"},od={key:1,class:"modal-error"},nd=["src","alt"],ld={key:2,class:"preview-badge"},id={key:3,class:"original-badge"},rd={key:0,class:"info-skeleton"},sd={class:"info-header"},ud={key:1,class:"info-title"},cd={key:2,class:"info-category"},dd={class:"info-tags"},pd={key:2,class:"tag tag--secondary"},md={key:3,class:"tag tag--view"},Vd={key:4,class:"tag tag--download"},vd={key:0,class:"mobile-original-card"},hd={class:"mobile-card-header"},fd={class:"mobile-card-details"},gd={class:"mobile-card-item"},wd={class:"mobile-card-value"},yd={class:"mobile-card-item"},kd={class:"mobile-card-value"},Ed={key:0,class:"detail-item"},bd={class:"detail-sub"},Nd={key:0,class:"detail-item detail-item--highlight"},xd={key:0,class:"detail-label"},Cd={class:"detail-item"},Bd={class:"detail-sub"},Md={key:1,class:"original-info-card"},Dd={class:"original-info-header"},_d={class:"original-info-details"},Sd={class:"original-dimension"},$d={class:"original-size"},Td={class:"action-buttons"},Ld=["disabled"],zd=["disabled"],Od={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Id={__name:"index",props:{wallpaper:{type:Object,default:null},isOpen:{type:Boolean,default:!1}},emits:["close","prev","next"],setup(o,{emit:t}){const e=o,a=t,{isMobile:l,isTablet:n,isDesktop:i,isLandscape:s,isPortrait:d}=lt(),{currentSeries:r}=$e(),c=Te(),u=Vue.computed(()=>i.value&&(r.value==="desktop"||r.value==="bing")),p=Vue.computed(()=>!l.value&&r.value==="desktop"),h=Vue.computed(()=>!!(i.value||n.value&&s.value)),f=Vue.computed(()=>!!(l.value||n.value&&d.value)),g=Vue.ref(!1);function V(){g.value=!0}function w(){g.value=!1}const x=Vue.ref(null),C=Vue.ref(null),z=Vue.ref(null),_=Vue.ref(!1),m=Vue.ref(!1),$=Vue.ref(!1),T=Vue.ref({width:0,height:0}),F=Vue.ref(0),I=Vue.ref(!1),L=Vue.ref(!1),B=Vue.ref(!1),y=Vue.ref(!1),A=Vue.computed(()=>e.wallpaper?c.getDownloadCount(e.wallpaper.filename):0),v=Vue.computed(()=>e.wallpaper?c.getViewCount(e.wallpaper.filename):0),M=Vue.computed(()=>!!e.wallpaper?.previewUrl),k=Vue.computed(()=>e.wallpaper?!M.value||B.value?e.wallpaper.url:e.wallpaper.previewUrl||e.wallpaper.url:"");Vue.watch(()=>e.isOpen,async b=>{b?(!u.value&&e.wallpaper&&(Ye(e.wallpaper),qe(e.wallpaper,r.value)),F.value=window.scrollY||window.pageYOffset,document.body.style.top=`-${F.value}px`,document.body.classList.add("modal-open"),await Vue.nextTick(),R()):(document.body.classList.remove("modal-open"),document.body.style.top="",window.scrollTo({top:F.value,behavior:"instant"}))});function R(){if(!x.value||!C.value)return;const b=Q.timeline();b.fromTo(x.value,{opacity:0},{opacity:1,duration:.3,ease:"power2.out"}),b.fromTo(C.value,{scale:.9,y:30,opacity:0},{scale:1,y:0,opacity:1,duration:.4,ease:"back.out(1.2)"},"-=0.1"),z.value&&b.fromTo(z.value.children,{y:20,opacity:0},{y:0,opacity:1,duration:.3,stagger:.05,ease:"power2.out"},"-=0.2")}function H(b){if(!x.value||!C.value){b?.();return}const N=Q.timeline({onComplete:b});N.to(C.value,{scale:.95,y:20,opacity:0,duration:.25,ease:"power2.in"}),N.to(x.value,{opacity:0,duration:.2},"-=0.1")}Vue.watch(()=>e.wallpaper,()=>{_.value=!1,m.value=!1,T.value={width:0,height:0},I.value=!1,L.value=!1,B.value=!1,y.value=!1});const O=Vue.computed(()=>T.value.width>0?Se(T.value.width,T.value.height):{label:"åŠ è½½ä¸­",type:"secondary"}),P=Vue.computed(()=>e.wallpaper?Ue(e.wallpaper.filename).toUpperCase():""),q=Vue.computed(()=>e.wallpaper?ze(e.wallpaper.size):""),ce=Vue.computed(()=>e.wallpaper?We(e.wallpaper.createdAt):""),ae=Vue.computed(()=>e.wallpaper?ra(e.wallpaper.createdAt):""),j=Vue.computed(()=>e.wallpaper?Le(e.wallpaper.filename):""),Y=Vue.computed(()=>{if(!e.wallpaper)return"";const{category:b,subcategory:N}=e.wallpaper;return b?N?`${b} / ${N}`:b:""}),ne=Vue.computed(()=>e.wallpaper?.isBing===!0),G=Vue.computed(()=>{if(!e.wallpaper?.resolution)return null;const b=e.wallpaper.resolution;if(b.width&&b.height){const N=Se(b.width,b.height);return{width:b.width,height:b.height,label:N.label,type:N.type}}return b}),de=Vue.computed(()=>T.value.width>0?T.value:{width:0,height:0});function re(b){_.value=!0,M.value?B.value?(L.value=!0,y.value=!1):I.value=!0:L.value=!0,b.target&&(T.value={width:b.target.naturalWidth,height:b.target.naturalHeight})}function se(){m.value=!0,_.value=!0,y.value=!1}function Ve(){H(()=>{a("close")})}function S(){a("prev")}function E(){a("next")}async function U(){if(!(!e.wallpaper||$.value)){$.value=!0;try{await Xe(e.wallpaper.url,e.wallpaper.filename),je(e.wallpaper,r.value),Ge(e.wallpaper,r.value)}finally{$.value=!1}}}function D(b){if(e.isOpen)switch(b.key){case"Escape":Ve();break;case"ArrowLeft":S();break;case"ArrowRight":E();break}}return Vue.onMounted(()=>{document.addEventListener("keydown",D)}),Vue.onUnmounted(()=>{document.removeEventListener("keydown",D),document.body.classList.remove("modal-open"),document.body.style.top="",F.value>0&&window.scrollTo({top:F.value,behavior:"instant"})}),(b,N)=>(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[u.value?(Vue.openBlock(),Vue.createBlock(Jc,{key:0,wallpaper:o.wallpaper,"is-open":o.isOpen,onClose:N[0]||(N[0]=te=>a("close")),onOpenCrop:V},null,8,["wallpaper","is-open"])):(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{key:1,to:"body"},[o.isOpen&&o.wallpaper?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,ref_key:"modalRef",ref:x,class:"modal-overlay"},[Vue.createElementVNode("div",{ref_key:"contentRef",ref:C,class:Vue.normalizeClass(["modal-content",{"modal-content--horizontal":h.value}])},[Vue.createElementVNode("button",{class:"modal-close","aria-label":"å…³é—­",onClick:Ve},[...N[1]||(N[1]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])]),Vue.createElementVNode("button",{class:"modal-nav modal-nav--prev","aria-label":"ä¸Šä¸€å¼ ",onClick:S},[...N[2]||(N[2]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M15 18l-6-6 6-6"})],-1)])]),Vue.createElementVNode("button",{class:"modal-nav modal-nav--next","aria-label":"ä¸‹ä¸€å¼ ",onClick:E},[...N[3]||(N[3]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M9 18l6-6-6-6"})],-1)])]),Vue.createElementVNode("div",ed,[_.value?m.value?(Vue.openBlock(),Vue.createElementBlock("div",od,[...N[4]||(N[4]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),Vue.createElementVNode("path",{d:"M12 8v4M12 16h.01"})],-1),Vue.createElementVNode("p",null,"å›¾ç‰‡åŠ è½½å¤±è´¥",-1)])])):Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",td,[Vue.createVNode(ie,{size:"lg"}),y.value?(Vue.openBlock(),Vue.createElementBlock("p",ad," æ­£åœ¨åŠ è½½åŸå›¾... ")):Vue.createCommentVNode("",!0)])),Vue.withDirectives(Vue.createElementVNode("img",{src:k.value,alt:o.wallpaper.filename,width:"1920",height:"1080",class:"modal-image",onLoad:re,onError:se},null,40,nd),[[Vue.vShow,_.value&&!m.value]]),M.value&&_.value&&!m.value&&!B.value?(Vue.openBlock(),Vue.createElementBlock("div",ld,[...N[5]||(N[5]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"3"})],-1),Vue.createElementVNode("span",null,"é¢„è§ˆå›¾",-1)])])):Vue.createCommentVNode("",!0),M.value&&_.value&&!m.value&&B.value?(Vue.openBlock(),Vue.createElementBlock("div",id,[...N[6]||(N[6]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M5 3l14 9-14 9V3z"})],-1),Vue.createElementVNode("span",null,"åŸå›¾",-1)])])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",{ref_key:"infoRef",ref:z,class:"modal-info"},[!_.value||m.value?(Vue.openBlock(),Vue.createElementBlock("div",rd,[...N[7]||(N[7]=[Vue.createElementVNode("div",{class:"skeleton-title"},null,-1),Vue.createElementVNode("div",{class:"skeleton-tags"},[Vue.createElementVNode("div",{class:"skeleton-tag"}),Vue.createElementVNode("div",{class:"skeleton-tag"}),Vue.createElementVNode("div",{class:"skeleton-tag"})],-1),Vue.createElementVNode("div",{class:"skeleton-details"},[Vue.createElementVNode("div",{class:"skeleton-line"}),Vue.createElementVNode("div",{class:"skeleton-line"}),Vue.createElementVNode("div",{class:"skeleton-line"})],-1),Vue.createElementVNode("div",{class:"skeleton-btn"},null,-1)])])):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createElementVNode("div",sd,[ne.value?(Vue.openBlock(),Vue.createBlock(hc,{key:0,wallpaper:o.wallpaper,compact:f.value},null,8,["wallpaper","compact"])):Vue.createCommentVNode("",!0),ne.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("h3",ud,Vue.toDisplayString(j.value),1)),Y.value&&!ne.value?(Vue.openBlock(),Vue.createElementBlock("div",cd,[N[8]||(N[8]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),Vue.createElementVNode("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(Y.value),1)])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",dd,[f.value&&G.value?(Vue.openBlock(),Vue.createElementBlock("span",{key:0,class:Vue.normalizeClass(["tag",[`tag--${G.value.type||"success"}`]])},Vue.toDisplayString(G.value.label),3)):(Vue.openBlock(),Vue.createElementBlock("span",{key:1,class:Vue.normalizeClass(["tag",[`tag--${O.value.type||"success"}`]])},Vue.toDisplayString(O.value.label),3)),ne.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("span",pd,Vue.toDisplayString(P.value),1)),v.value>0?(Vue.openBlock(),Vue.createElementBlock("span",md,[N[9]||(N[9]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(v.value),1)])):Vue.createCommentVNode("",!0),A.value>0?(Vue.openBlock(),Vue.createElementBlock("span",Vd,[N[10]||(N[10]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)),Vue.createTextVNode(" "+Vue.toDisplayString(A.value),1)])):Vue.createCommentVNode("",!0)])]),Vue.unref(l)&&G.value&&!ne.value?(Vue.openBlock(),Vue.createElementBlock("div",vd,[Vue.createElementVNode("div",hd,[N[11]||(N[11]=Vue.createElementVNode("span",{class:"mobile-card-label"},"åŸå›¾ä¿¡æ¯",-1)),Vue.createElementVNode("span",{class:Vue.normalizeClass(["mobile-resolution-tag",[`tag--${G.value.type||"success"}`]])},Vue.toDisplayString(G.value.label),3)]),Vue.createElementVNode("div",fd,[Vue.createElementVNode("div",gd,[N[12]||(N[12]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),Vue.createElementVNode("path",{d:"M8 21h8M12 17v4"})],-1)),Vue.createElementVNode("span",wd,Vue.toDisplayString(G.value.width)+" Ã— "+Vue.toDisplayString(G.value.height),1)]),Vue.createElementVNode("div",yd,[N[13]||(N[13]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)),Vue.createElementVNode("span",kd,Vue.toDisplayString(q.value),1)])])])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",{class:Vue.normalizeClass(["info-details",{"info-details--compact":Vue.unref(l)}])},[Vue.unref(l)?(Vue.openBlock(),Vue.createElementBlock("div",Ed,[N[14]||(N[14]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),Vue.createElementVNode("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),Vue.createElementVNode("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),Vue.createElementVNode("line",{x1:"3",y1:"10",x2:"21",y2:"10"})],-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(ce.value),1),Vue.createElementVNode("span",bd,"("+Vue.toDisplayString(ae.value)+")",1)])):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[de.value.width>0?(Vue.openBlock(),Vue.createElementBlock("div",Nd,[N[15]||(N[15]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),Vue.createElementVNode("path",{d:"M8 21h8M12 17v4"})],-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(de.value.width)+" Ã— "+Vue.toDisplayString(de.value.height),1),M.value&&!B.value?(Vue.openBlock(),Vue.createElementBlock("span",xd,"é¢„è§ˆå›¾")):Vue.createCommentVNode("",!0)])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",Cd,[N[16]||(N[16]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),Vue.createElementVNode("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),Vue.createElementVNode("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),Vue.createElementVNode("line",{x1:"3",y1:"10",x2:"21",y2:"10"})],-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(ce.value),1),Vue.createElementVNode("span",Bd,"("+Vue.toDisplayString(ae.value)+")",1)])],64))],2),h.value&&M.value&&G.value&&!ne.value?(Vue.openBlock(),Vue.createElementBlock("div",Md,[Vue.createElementVNode("div",Dd,[N[17]||(N[17]=Vue.createElementVNode("span",{class:"original-label"},"åŸå›¾",-1)),Vue.createElementVNode("span",{class:Vue.normalizeClass(["original-resolution-tag",[`tag--${G.value.type||"success"}`]])},Vue.toDisplayString(G.value.label),3)]),Vue.createElementVNode("div",_d,[Vue.createElementVNode("div",Sd,[N[18]||(N[18]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),Vue.createElementVNode("path",{d:"M8 21h8M12 17v4"})],-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(G.value.width)+" Ã— "+Vue.toDisplayString(G.value.height),1)]),Vue.createElementVNode("div",$d,[N[19]||(N[19]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)),Vue.createElementVNode("span",null,Vue.toDisplayString(q.value),1)])]),N[20]||(N[20]=Vue.createElementVNode("p",{class:"original-hint"}," ä¸‹è½½è·å–å®Œæ•´é«˜æ¸…åŸå›¾ ",-1))])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",Td,[p.value?(Vue.openBlock(),Vue.createElementBlock("button",{key:0,class:"crop-btn",disabled:!_.value||m.value,onClick:V},[...N[21]||(N[21]=[Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("path",{d:"M6 2v4M6 14v8M18 2v4M18 14v8M2 6h4M14 6h8M2 18h4M14 18h8"})],-1),Vue.createElementVNode("span",null,"æ™ºèƒ½è£å‰ª",-1)])],8,Ld)):Vue.createCommentVNode("",!0),Vue.createElementVNode("button",{class:"download-btn",disabled:$.value,onClick:U},[$.value?(Vue.openBlock(),Vue.createBlock(ie,{key:0,size:"sm"})):(Vue.openBlock(),Vue.createElementBlock("svg",Od,[...N[22]||(N[22]=[Vue.createElementVNode("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"},null,-1)])])),Vue.createElementVNode("span",null,Vue.toDisplayString($.value?"ä¸‹è½½ä¸­...":"ä¸‹è½½åŸå›¾"),1)],8,zd)])],64))],512)],2)],512)):Vue.createCommentVNode("",!0)])),o.wallpaper?(Vue.openBlock(),Vue.createBlock(sc,{key:2,"image-url":o.wallpaper.url,filename:o.wallpaper.filename,"is-open":g.value,"original-resolution":G.value,onClose:w},null,8,["image-url","filename","is-open","original-resolution"])):Vue.createCommentVNode("",!0)],64))}},Ad=ee(Id,[["__scopeId","data-v-af7c921f"]]);function Rd(){const o=Vue.ref(!1),t=Vue.ref(null),e=(s=null)=>{t.value=s,o.value=!0,document.body.style.overflow="hidden"},a=()=>{o.value=!1,document.body.style.overflow=""},l=(s=null)=>{o.value?a():e(s)},n=s=>{t.value=s},i=s=>{o.value&&s.key==="Escape"&&a()};return Vue.onMounted(()=>{document.addEventListener("keydown",i)}),Vue.onUnmounted(()=>{document.removeEventListener("keydown",i),document.body.style.overflow=""}),{isOpen:o,currentData:t,open:e,close:a,toggle:l,updateData:n}}const Fd={class:"home-page"},Pd={class:"container"},Hd={key:1,class:"error-state"},Ud={__name:"Home",setup(o){const t=VueRouter.useRoute(),e=VueRouter.useRouter(),a=Uo(),l=Wo(),n=Te(),i=Yo(),s=Vue.ref(!1),d=Vue.ref(!1),r=Vue.computed(()=>a.currentSeries),c=Vue.computed(()=>["mobile","avatar"].includes(r.value)),u=Vue.computed(()=>Xo[r.value]?.hideFormatFilter===!0),p=Vue.computed(()=>d.value||l.loading||n.loading),h=Vue.computed(()=>l.error),f=Vue.computed(()=>i.createCategoryOptions(l.wallpapers)),g=Vue.computed(()=>i.createSubcategoryOptions(f.value)),V=Vue.computed(()=>i.getFilteredAndSorted(l.wallpapers)),w=Vue.computed(()=>V.value.length),x=Vue.computed(()=>i.hasActiveFilters(r.value)),{isOpen:C,currentData:z,open:_,close:m,updateData:$}=Rd(),T=Vue.computed(()=>z.value);function F(v){_(v)}function I(){if(!T.value)return;const v=l.getPrevWallpaper(T.value.id);v&&$(v)}function L(){if(!T.value)return;const v=l.getNextWallpaper(T.value.id);v&&$(v)}async function B(v){if(!(!v||d.value)){d.value=!0;try{i.setDefaultSortBySeries(v),await Promise.all([l.initSeries(v),n.fetchPopularityData(v)])}finally{d.value=!1}}}function y(){i.resetFilters(i.sortBy,r.value)}function A(){l.initSeries(r.value,!0)}return Vue.watch(()=>t.meta?.series,(v,M)=>{s.value&&v&&v!==M&&a.initFromRoute(v)}),Vue.watch(r,async(v,M)=>{s.value&&v&&v!==M&&await B(v)}),Vue.watch(()=>i.categoryFilter,async v=>{if(!(!s.value||r.value!=="bing")&&v&&/^\d{4}-\d{2}$/.test(v)){const M=Number.parseInt(v.split("-")[0]);await l.loadBingYear(M)}}),Vue.onMounted(async()=>{const v=t.meta?.series;if(v){const M=jo()?"mobile":"desktop";if(!(Ba[M]||Ba.desktop).includes(v)){const R=M==="mobile"?"mobile":"desktop";e.replace(`/${R}`);return}a.currentSeries=v}else a.currentSeries||a.initSeries();await B(a.currentSeries),s.value=!0}),(v,M)=>(Vue.openBlock(),Vue.createElementBlock("div",Fd,[Vue.createElementVNode("div",Pd,[Vue.createVNode(tn),r.value==="avatar"?(Vue.openBlock(),Vue.createBlock(Jo,{key:0})):Vue.createCommentVNode("",!0),Vue.createVNode(el,{"sort-by":Vue.unref(i).sortBy,"onUpdate:sortBy":M[0]||(M[0]=k=>Vue.unref(i).sortBy=k),"format-filter":Vue.unref(i).formatFilter,"onUpdate:formatFilter":M[1]||(M[1]=k=>Vue.unref(i).formatFilter=k),"resolution-filter":Vue.unref(i).resolutionFilter,"onUpdate:resolutionFilter":M[2]||(M[2]=k=>Vue.unref(i).resolutionFilter=k),"category-filter":Vue.unref(i).categoryFilter,"onUpdate:categoryFilter":M[3]||(M[3]=k=>Vue.unref(i).categoryFilter=k),"subcategory-filter":Vue.unref(i).subcategoryFilter,"onUpdate:subcategoryFilter":M[4]||(M[4]=k=>Vue.unref(i).subcategoryFilter=k),"category-options":f.value,"subcategory-options":g.value,"result-count":w.value,"total-count":Vue.unref(l).displayTotal,loading:p.value,"hide-format-filter":u.value,"current-series":r.value,onReset:y},null,8,["sort-by","format-filter","resolution-filter","category-filter","subcategory-filter","category-options","subcategory-options","result-count","total-count","loading","hide-format-filter","current-series"]),h.value?(Vue.openBlock(),Vue.createElementBlock("div",Hd,[M[5]||(M[5]=Vue.createElementVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Vue.createElementVNode("circle",{cx:"12",cy:"12",r:"10"}),Vue.createElementVNode("path",{d:"M12 8v4M12 16h.01"})],-1)),M[6]||(M[6]=Vue.createElementVNode("h3",null,"åŠ è½½å¤±è´¥",-1)),Vue.createElementVNode("p",null,Vue.toDisplayString(h.value),1),Vue.createElementVNode("button",{class:"btn btn--primary",onClick:A}," é‡æ–°åŠ è½½ ")])):(Vue.openBlock(),Vue.createBlock(Ss,{key:2,wallpapers:V.value,loading:p.value,"search-query":Vue.unref(i).searchQuery,"total-count":Vue.unref(l).displayTotal,"has-filters":x.value,"popularity-data":Vue.unref(n).allTimeData,onSelect:F,onResetFilters:y},null,8,["wallpapers","loading","search-query","total-count","has-filters","popularity-data"]))]),c.value?(Vue.openBlock(),Vue.createBlock(Mr,{key:1,wallpaper:T.value,"is-open":Vue.unref(C),onClose:Vue.unref(m),onPrev:I,onNext:L},null,8,["wallpaper","is-open","onClose"])):(Vue.openBlock(),Vue.createBlock(Ad,{key:0,wallpaper:T.value,"is-open":Vue.unref(C),onClose:Vue.unref(m),onPrev:I,onNext:L},null,8,["wallpaper","is-open","onClose"])),Vue.createVNode(ol)]))}},qd=ee(Ud,[["__scopeId","data-v-522634d2"]]);export{qd as default};
